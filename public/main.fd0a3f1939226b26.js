"use strict";(self.webpackChunkangular_15_firebase_storage=self.webpackChunkangular_15_firebase_storage||[]).push([[179],{2011:(et,we,k)=>{k.d(we,{Dh:()=>le,GT:()=>oe,cc:()=>Re,hO:()=>He,on:()=>j,pX:()=>re,xv:()=>_e});var p=k(4650),X=k(9260),N=k(7184);et=k.hmd(et);const se=["ngOnDestroy"],re=(ye,de,be,Ee={})=>new Proxy(ye,{get:(fe,De)=>be.runOutsideAngular(()=>{var Ne;if(ye[De])return!(null===(Ne=Ee?.spy)||void 0===Ne)&&Ne.get&&Ee.spy.get(De,ye[De]),ye[De];if(se.indexOf(De)>-1)return()=>{};const Se=de.toPromise().then(U=>{const ue=U&&U[De];return"function"==typeof ue?ue.bind(U):ue&&ue.then?ue.then($=>be.run(()=>$)):be.run(()=>ue)});return new Proxy(()=>{},{get:(U,ue)=>Se[ue],apply:(U,ue,$)=>Se.then(q=>{var ee;const te=q&&q(...$);return!(null===(ee=Ee?.spy)||void 0===ee)&&ee.apply&&Ee.spy.apply(De,$,te),te})})})}),oe=(ye,de)=>{de.forEach(be=>{Object.getOwnPropertyNames(be.prototype||be).forEach(Ee=>{Object.defineProperty(ye.prototype,Ee,Object.getOwnPropertyDescriptor(be.prototype||be,Ee))})})};class ge{constructor(de){return de}}const le=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function j(ye,de,be){const fe="object"==typeof be&&be||{};fe.name=fe.name||"string"==typeof be&&be||"[DEFAULT]";const Ne=X.Z.apps.filter(Se=>Se&&Se.name===fe.name)[0]||de.runOutsideAngular(()=>X.Z.initializeApp(ye,fe));try{JSON.stringify(ye)!==JSON.stringify(Ne.options)&&H("error",`${Ne.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(Ne)}const H=(ye,...de)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ye](...de)},Y={provide:ge,useFactory:j,deps:[le,p.R0b,[new p.FiY,_e]]};let He=(()=>{class ye{constructor(be){X.Z.registerVersion("angularfire",N.q4.full,"core"),X.Z.registerVersion("angularfire",N.q4.full,"app-compat"),X.Z.registerVersion("angular",p.q4F.full,be.toString())}static initializeApp(be,Ee){return{ngModule:ye,providers:[{provide:le,useValue:be},{provide:_e,useValue:Ee}]}}}return ye.\u0275fac=function(be){return new(be||ye)(p.LFG(p.Lbi))},ye.\u0275mod=p.oAB({type:ye}),ye.\u0275inj=p.cJS({providers:[Y]}),ye})();function Re(ye,de,be,Ee,fe){const[,De,Ne]=globalThis.\u0275AngularfireInstanceCache.find(Se=>Se[0]===ye)||[];if(De)return function tt(ye,de){try{return ye.toString()===de.toString()}catch{return ye===de}}(fe,Ne)||(ie("error",`${de} was already initialized on the ${be} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),ie("warn",{is:fe,was:Ne})),De;{const Se=Ee();return globalThis.\u0275AngularfireInstanceCache.push([ye,Se,fe]),Se}}const xe=!!et.hot,ie=(ye,...de)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ye](...de)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7184:(et,we,k)=>{k.d(we,{q4:()=>oc,iC:()=>js,fc:()=>Hl,HU:()=>Fr,vb:()=>So,JM:()=>Ni});var p=k(4650),X=k(259),N=k(5861),se=k(9681),re=k(2090),oe=k(4859),ge=k(1877),le=k(8766);const _e="@firebase/installations",j="0.6.4",Y=`w:${j}`,He="FIS_v2",de=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function be(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Ee({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function fe(I){return{token:I.token,requestStatus:2,expiresIn:q(I.expiresIn),creationTime:Date.now()}}function De(I,C){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,N.Z)(function*(I,C){const x=(yield C.json()).error;return de.create("request-failed",{requestName:I,serverCode:x.code,serverMessage:x.message,serverStatus:x.status})})).apply(this,arguments)}function Se({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function U(I,{refreshToken:C}){const S=Se(I);return S.append("Authorization",function ee(I){return`${He} ${I}`}(C)),S}function ue(I){return $.apply(this,arguments)}function $(){return($=(0,N.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function q(I){return Number(I.replace("s","000"))}function te(I,C){return Te.apply(this,arguments)}function Te(){return(Te=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:S}){const x=Ee(I),Z=Se(I),K=C.getImmediate({optional:!0});if(K){const je=yield K.getHeartbeatsHeader();je&&Z.append("x-firebase-client",je)}const Ue={method:"POST",headers:Z,body:JSON.stringify({fid:S,authVersion:He,appId:I.appId,sdkVersion:Y})},Le=yield ue(()=>fetch(x,Ue));if(Le.ok){const je=yield Le.json();return{fid:je.fid||S,registrationStatus:2,refreshToken:je.refreshToken,authToken:fe(je.authToken)}}throw yield De("Create Installation",Le)})).apply(this,arguments)}function Pe(I){return new Promise(C=>{setTimeout(C,I)})}const Nt=/^[cdef][\w-]{21}$/;function _t(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const S=function Et(I){return function qe(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Nt.test(S)?S:""}catch{return""}}function it(I){return`${I.appName}!${I.appId}`}const St=new Map;function On(I,C){const S=it(I);Ut(S,C),function li(I,C){const S=function rr(){return!An&&"BroadcastChannel"in self&&(An=new BroadcastChannel("[Firebase] FID Change"),An.onmessage=I=>{Ut(I.data.key,I.data.fid)}),An}();S&&S.postMessage({key:I,fid:C}),function Zn(){0===St.size&&An&&(An.close(),An=null)}()}(S,C)}function Ut(I,C){const S=St.get(I);if(S)for(const x of S)x(C)}let An=null;const _r="firebase-installations-store";let qn=null;function Di(){return qn||(qn=(0,le.X3)("firebase-installations-database",1,{upgrade:(I,C)=>{0===C&&I.createObjectStore(_r)}})),qn}function zt(I,C){return ir.apply(this,arguments)}function ir(){return(ir=(0,N.Z)(function*(I,C){const S=it(I),Z=(yield Di()).transaction(_r,"readwrite"),K=Z.objectStore(_r),me=yield K.get(S);return yield K.put(C,S),yield Z.done,(!me||me.fid!==C.fid)&&On(I,C.fid),C})).apply(this,arguments)}function Ke(I){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,N.Z)(function*(I){const C=it(I),x=(yield Di()).transaction(_r,"readwrite");yield x.objectStore(_r).delete(C),yield x.done})).apply(this,arguments)}function Ar(I,C){return en.apply(this,arguments)}function en(){return(en=(0,N.Z)(function*(I,C){const S=it(I),Z=(yield Di()).transaction(_r,"readwrite"),K=Z.objectStore(_r),me=yield K.get(S),Ue=C(me);return void 0===Ue?yield K.delete(S):yield K.put(Ue,S),yield Z.done,Ue&&(!me||me.fid!==Ue.fid)&&On(I,Ue.fid),Ue})).apply(this,arguments)}function Un(I){return wi.apply(this,arguments)}function wi(){return(wi=(0,N.Z)(function*(I){let C;const S=yield Ar(I.appConfig,x=>{const Z=dt(x),K=Je(I,Z);return C=K.registrationPromise,K.installationEntry});return""===S.fid?{installationEntry:yield C}:{installationEntry:S,registrationPromise:C}})).apply(this,arguments)}function dt(I){return Hn(I||{fid:_t(),registrationStatus:0})}function Je(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(de.create("app-offline"))};const S={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},x=function ct(I,C){return es.apply(this,arguments)}(I,S);return{installationEntry:S,registrationPromise:x}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Zt(I)}:{installationEntry:C}}function es(){return(es=(0,N.Z)(function*(I,C){try{const S=yield te(I,C);return zt(I.appConfig,S)}catch(S){throw be(S)&&409===S.customData.serverCode?yield Ke(I.appConfig):yield zt(I.appConfig,{fid:C.fid,registrationStatus:0}),S}})).apply(this,arguments)}function Zt(I){return dn.apply(this,arguments)}function dn(){return(dn=(0,N.Z)(function*(I){let C=yield Bn(I.appConfig);for(;1===C.registrationStatus;)yield Pe(100),C=yield Bn(I.appConfig);if(0===C.registrationStatus){const{installationEntry:S,registrationPromise:x}=yield Un(I);return x||S}return C})).apply(this,arguments)}function Bn(I){return Ar(I,C=>{if(!C)throw de.create("installation-not-found");return Hn(C)})}function Hn(I){return function Ts(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ot(I,C){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:C},S){const x=At(I,S),Z=U(I,S),K=C.getImmediate({optional:!0});if(K){const je=yield K.getHeartbeatsHeader();je&&Z.append("x-firebase-client",je)}const Ue={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:Y,appId:I.appId}})},Le=yield ue(()=>fetch(x,Ue));if(Le.ok)return fe(yield Le.json());throw yield De("Generate Auth Token",Le)})).apply(this,arguments)}function At(I,{fid:C}){return`${Ee(I)}/${C}/authTokens:generate`}function Kn(I){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,N.Z)(function*(I,C=!1){let S;const x=yield Ar(I.appConfig,K=>{if(!yt(K))throw de.create("not-registered");const me=K.authToken;if(!C&&jn(me))return K;if(1===me.requestStatus)return S=ke(I,C),K;{if(!navigator.onLine)throw de.create("app-offline");const Ue=F(K);return S=lt(I,Ue),Ue}});return S?yield S:x.authToken})).apply(this,arguments)}function ke(I,C){return ve.apply(this,arguments)}function ve(){return(ve=(0,N.Z)(function*(I,C){let S=yield Ge(I.appConfig);for(;1===S.authToken.requestStatus;)yield Pe(100),S=yield Ge(I.appConfig);const x=S.authToken;return 0===x.requestStatus?Kn(I,C):x})).apply(this,arguments)}function Ge(I){return Ar(I,C=>{if(!yt(C))throw de.create("not-registered");return function W(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function lt(I,C){return ht.apply(this,arguments)}function ht(){return(ht=(0,N.Z)(function*(I,C){try{const S=yield Ot(I,C),x=Object.assign(Object.assign({},C),{authToken:S});return yield zt(I.appConfig,x),S}catch(S){if(!be(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const x=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield zt(I.appConfig,x)}else yield Ke(I.appConfig);throw S}})).apply(this,arguments)}function yt(I){return void 0!==I&&2===I.registrationStatus}function jn(I){return 2===I.requestStatus&&!function L(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+36e5}(I)}function F(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}function ne(){return(ne=(0,N.Z)(function*(I){const C=I,{installationEntry:S,registrationPromise:x}=yield Un(C);return x?x.catch(console.error):Kn(C).catch(console.error),S.fid})).apply(this,arguments)}function rt(){return(rt=(0,N.Z)(function*(I,C=!1){const S=I;return yield Pt(S),(yield Kn(S,C)).token})).apply(this,arguments)}function Pt(I){return ot.apply(this,arguments)}function ot(){return(ot=(0,N.Z)(function*(I){const{registrationPromise:C}=yield Un(I);C&&(yield C)})).apply(this,arguments)}function ea(I){return de.create("missing-app-config-values",{valueName:I})}const cl="installations",nn=I=>{const C=I.getProvider("app").getImmediate(),S=function no(I){if(!I||!I.options)throw ea("App Configuration");if(!I.name)throw ea("App Name");const C=["projectId","apiKey","appId"];for(const S of C)if(!I.options[S])throw ea(S);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:S,heartbeatServiceProvider:(0,se._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Nu=I=>{const C=I.getProvider("app").getImmediate(),S=(0,se._getProvider)(C,cl).getImmediate();return{getId:()=>function ce(I){return ne.apply(this,arguments)}(S),getToken:Z=>function Ze(I){return rt.apply(this,arguments)}(S,Z)}};(function dl(){(0,se._registerComponent)(new oe.wA(cl,nn,"PUBLIC")),(0,se._registerComponent)(new oe.wA("installations-internal",Nu,"PRIVATE"))})(),(0,se.registerVersion)(_e,j),(0,se.registerVersion)(_e,j,"esm2017");const ro="@firebase/remote-config",wn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class is{constructor(C,S,x,Z){this.client=C,this.storage=S,this.storageCache=x,this.logger=Z}isCachedDataFresh(C,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const x=Date.now()-S,Z=x<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${x}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Z}.`),Z}fetch(C){var S=this;return(0,N.Z)(function*(){const[x,Z]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(Z&&S.isCachedDataFresh(C.cacheMaxAgeMillis,x))return Z;C.eTag=Z&&Z.eTag;const K=yield S.client.fetch(C),me=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&me.push(S.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(me),K})()}}function yr(I=navigator){return I.languages&&I.languages[0]||I.language}class bi{constructor(C,S,x,Z,K,me){this.firebaseInstallations=C,this.sdkVersion=S,this.namespace=x,this.projectId=Z,this.apiKey=K,this.appId=me}fetch(C){var S=this;return(0,N.Z)(function*(){const[x,Z]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Le={sdk_version:S.sdkVersion,app_instance_id:x,app_instance_id_token:Z,app_id:S.appId,language_code:yr()},je={method:"POST",headers:Ue,body:JSON.stringify(Le)},It=fetch(me,je),ze=new Promise((Lr,Vr)=>{C.signal.addEventListener(()=>{const ac=new Error("The operation was aborted.");ac.name="AbortError",Vr(ac)})});let Lt;try{yield Promise.race([It,ze]),Lt=yield It}catch(Lr){let Vr="fetch-client-network";throw"AbortError"===Lr?.name&&(Vr="fetch-timeout"),wn.create(Vr,{originalErrorMessage:Lr?.message})}let bn=Lt.status;const Oi=Lt.headers.get("ETag")||void 0;let ki,Ro;if(200===Lt.status){let Lr;try{Lr=yield Lt.json()}catch(Vr){throw wn.create("fetch-client-parse",{originalErrorMessage:Vr?.message})}ki=Lr.entries,Ro=Lr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ro?bn=500:"NO_CHANGE"===Ro?bn=304:("NO_TEMPLATE"===Ro||"EMPTY_CONFIG"===Ro)&&(ki={}),304!==bn&&200!==bn)throw wn.create("fetch-status",{httpStatus:bn});return{status:bn,eTag:Oi,config:ki}})()}}class Wh{constructor(C,S){this.client=C,this.storage=S}fetch(C){var S=this;return(0,N.Z)(function*(){const x=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(C,x)})()}attemptFetch(C,{throttleEndTimeMillis:S,backoffCount:x}){var Z=this;return(0,N.Z)(function*(){yield function pn(I,C){return new Promise((S,x)=>{const Z=Math.max(C-Date.now(),0),K=setTimeout(S,Z);I.addEventListener(()=>{clearTimeout(K),x(wn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,S);try{const K=yield Z.client.fetch(C);return yield Z.storage.deleteThrottleMetadata(),K}catch(K){if(!function xt(I){if(!(I instanceof re.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(K))throw K;const me={throttleEndTimeMillis:Date.now()+(0,re.$s)(x),backoffCount:x+1};return yield Z.storage.setThrottleMetadata(me),Z.attemptFetch(C,me)}})()}}class ss{constructor(C,S,x,Z,K){this.app=C,this._client=S,this._storageCache=x,this._storage=Z,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function os(I,C){const S=I.target.error||void 0;return wn.create(C,{originalErrorMessage:S&&S?.message})}const Yn="app_namespace_store";class Rr{constructor(C,S,x,Z=function or(){return new Promise((I,C)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=x=>{C(os(x,"storage-open"))},S.onsuccess=x=>{I(x.target.result)},S.onupgradeneeded=x=>{0===x.oldVersion&&x.target.result.createObjectStore(Yn,{keyPath:"compositeKey"})}}catch(S){C(wn.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=C,this.appName=S,this.namespace=x,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var S=this;return(0,N.Z)(function*(){const x=yield S.openDbPromise;return new Promise((Z,K)=>{const Ue=x.transaction([Yn],"readonly").objectStore(Yn),Le=S.createCompositeKey(C);try{const je=Ue.get(Le);je.onerror=It=>{K(os(It,"storage-get"))},je.onsuccess=It=>{const ze=It.target.result;Z(ze?ze.value:void 0)}}catch(je){K(wn.create("storage-get",{originalErrorMessage:je?.message}))}})})()}set(C,S){var x=this;return(0,N.Z)(function*(){const Z=yield x.openDbPromise;return new Promise((K,me)=>{const Le=Z.transaction([Yn],"readwrite").objectStore(Yn),je=x.createCompositeKey(C);try{const It=Le.put({compositeKey:je,value:S});It.onerror=ze=>{me(os(ze,"storage-set"))},It.onsuccess=()=>{K()}}catch(It){me(wn.create("storage-set",{originalErrorMessage:It?.message}))}})})()}delete(C){var S=this;return(0,N.Z)(function*(){const x=yield S.openDbPromise;return new Promise((Z,K)=>{const Ue=x.transaction([Yn],"readwrite").objectStore(Yn),Le=S.createCompositeKey(C);try{const je=Ue.delete(Le);je.onerror=It=>{K(os(It,"storage-delete"))},je.onsuccess=()=>{Z()}}catch(je){K(wn.create("storage-delete",{originalErrorMessage:je?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class so{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,N.Z)(function*(){const S=C.storage.getLastFetchStatus(),x=C.storage.getLastSuccessfulFetchTimestampMillis(),Z=C.storage.getActiveConfig(),K=yield S;K&&(C.lastFetchStatus=K);const me=yield x;me&&(C.lastSuccessfulFetchTimestampMillis=me);const Ue=yield Z;Ue&&(C.activeConfig=Ue)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function oo(){return pd.apply(this,arguments)}function pd(){return(pd=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function Pr(){(0,se._registerComponent)(new oe.wA("remote-config",function I(C,{instanceIdentifier:S}){const x=C.getProvider("app").getImmediate(),Z=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wn.create("registration-window");if(!(0,re.hl)())throw wn.create("indexed-db-unavailable");const{projectId:K,apiKey:me,appId:Ue}=x.options;if(!K)throw wn.create("registration-project-id");if(!me)throw wn.create("registration-api-key");if(!Ue)throw wn.create("registration-app-id");const Le=new Rr(Ue,x.name,S=S||"firebase"),je=new so(Le),It=new ge.Yd(ro);It.logLevel=ge.in.ERROR;const ze=new bi(Z,se.SDK_VERSION,S,K,me,Ue),Lt=new Wh(ze,Le),bn=new is(Lt,Le,je,It),Oi=new ss(x,bn,je,Le,It);return function Yt(I){const C=(0,re.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Oi),Oi},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(ro,"0.4.4"),(0,se.registerVersion)(ro,"0.4.4","esm2017")}();const fl="/firebase-messaging-sw.js",ci="/firebase-cloud-messaging-push-scope",as="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xu="google.c.a.c_id",gd="google.c.a.c_l",pl="google.c.a.ts",Fu="google.c.a.e";var ra=(()=>{return(I=ra||(ra={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ra;var I})();function Nr(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lu(I){const S=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),x=atob(S),Z=new Uint8Array(x.length);for(let K=0;K<x.length;++K)Z[K]=x.charCodeAt(K);return Z}const gl="fcm_token_details_db",Qn="fcm_token_object_Store";function Uu(I){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(gl))return null;let C=null;return(yield(0,le.X3)(gl,5,{upgrade:(x=(0,N.Z)(function*(Z,K,me,Ue){var Le;if(K<2||!Z.objectStoreNames.contains(Qn))return;const je=Ue.objectStore(Qn),It=yield je.index("fcmSenderId").get(I);if(yield je.clear(),It)if(2===K){const ze=It;if(!ze.auth||!ze.p256dh||!ze.endpoint)return;C={token:ze.fcmToken,createTime:null!==(Le=ze.createTime)&&void 0!==Le?Le:Date.now(),subscriptionOptions:{auth:ze.auth,p256dh:ze.p256dh,endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:"string"==typeof ze.vapidKey?ze.vapidKey:Nr(ze.vapidKey)}}}else if(3===K){const ze=It;C={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:Nr(ze.auth),p256dh:Nr(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:Nr(ze.vapidKey)}}}else if(4===K){const ze=It;C={token:ze.fcmToken,createTime:ze.createTime,subscriptionOptions:{auth:Nr(ze.auth),p256dh:Nr(ze.p256dh),endpoint:ze.endpoint,swScope:ze.swScope,vapidKey:Nr(ze.vapidKey)}}}}),function(K,me,Ue,Le){return x.apply(this,arguments)})})).close(),yield(0,le.Lj)(gl),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),md(C)?C:null;var x}),Bu.apply(this,arguments)}function md(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const us="firebase-messaging-store";let ia=null;function cs(){return ia||(ia=(0,le.X3)("firebase-messaging-database",1,{upgrade:(I,C)=>{0===C&&I.createObjectStore(us)}})),ia}function sa(I){return oa.apply(this,arguments)}function oa(){return(oa=(0,N.Z)(function*(I){const C=la(I),x=yield(yield cs()).transaction(us).objectStore(us).get(C);if(x)return x;{const Z=yield Uu(I.appConfig.senderId);if(Z)return yield ds(I,Z),Z}})).apply(this,arguments)}function ds(I,C){return lo.apply(this,arguments)}function lo(){return(lo=(0,N.Z)(function*(I,C){const S=la(I),Z=(yield cs()).transaction(us,"readwrite");return yield Z.objectStore(us).put(C,S),yield Z.done,C})).apply(this,arguments)}function aa(I){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(I){const C=la(I),x=(yield cs()).transaction(us,"readwrite");yield x.objectStore(us).delete(C),yield x.done})).apply(this,arguments)}function la({appConfig:I}){return I.appId}const ln=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uo(I,C){return gn.apply(this,arguments)}function gn(){return(gn=(0,N.Z)(function*(I,C){const S=yield Ti(I),x=co(C),Z={method:"POST",headers:S,body:JSON.stringify(x)};let K;try{K=yield(yield fetch(Ps(I.appConfig),Z)).json()}catch(me){throw ln.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(K.error)throw ln.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw ln.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function Rs(I,C){return hs.apply(this,arguments)}function hs(){return(hs=(0,N.Z)(function*(I,C){const S=yield Ti(I),x=co(C.subscriptionOptions),Z={method:"PATCH",headers:S,body:JSON.stringify(x)};let K;try{K=yield(yield fetch(`${Ps(I.appConfig)}/${C.token}`,Z)).json()}catch(me){throw ln.create("token-update-failed",{errorInfo:me?.toString()})}if(K.error)throw ln.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw ln.create("token-update-no-token");return K.token})).apply(this,arguments)}function xn(I,C){return ju.apply(this,arguments)}function ju(){return(ju=(0,N.Z)(function*(I,C){const x={method:"DELETE",headers:yield Ti(I)};try{const K=yield(yield fetch(`${Ps(I.appConfig)}/${C}`,x)).json();if(K.error)throw ln.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(Z){throw ln.create("token-unsubscribe-failed",{errorInfo:Z?.toString()})}})).apply(this,arguments)}function Ps({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ti(I){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,N.Z)(function*({appConfig:I,installations:C}){const S=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function co({p256dh:I,auth:C,endpoint:S,vapidKey:x}){const Z={web:{endpoint:S,auth:C,p256dh:I}};return x!==as&&(Z.web.applicationPubKey=x),Z}const ho=6048e5;function ua(I){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,N.Z)(function*(I){const C=yield _l(I.swRegistration,I.vapidKey),S={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:Nr(C.getKey("auth")),p256dh:Nr(C.getKey("p256dh"))},x=yield sa(I.firebaseDependencies);if(x){if(ha(x.subscriptionOptions,S))return Date.now()>=x.createTime+ho?ft(I,{token:x.token,createTime:Date.now(),subscriptionOptions:S}):x.token;try{yield xn(I.firebaseDependencies,x.token)}catch(Z){console.warn(Z)}return ml(I.firebaseDependencies,S)}return ml(I.firebaseDependencies,S)})).apply(this,arguments)}function fo(I){return po.apply(this,arguments)}function po(){return(po=(0,N.Z)(function*(I){const C=yield sa(I.firebaseDependencies);C&&(yield xn(I.firebaseDependencies,C.token),yield aa(I.firebaseDependencies));const S=yield I.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function ft(I,C){return ca.apply(this,arguments)}function ca(){return(ca=(0,N.Z)(function*(I,C){try{const S=yield Rs(I.firebaseDependencies,C),x=Object.assign(Object.assign({},C),{token:S,createTime:Date.now()});return yield ds(I.firebaseDependencies,x),S}catch(S){throw yield fo(I),S}})).apply(this,arguments)}function ml(I,C){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*(I,C){const x={token:yield uo(I,C),createTime:Date.now(),subscriptionOptions:C};return yield ds(I,x),x.token})).apply(this,arguments)}function _l(I,C){return $u.apply(this,arguments)}function $u(){return($u=(0,N.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lu(C)})})).apply(this,arguments)}function ha(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}function mn(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Gu(I,C){if(!C.notification)return;I.notification={};const S=C.notification.title;S&&(I.notification.title=S);const x=C.notification.body;x&&(I.notification.body=x);const Z=C.notification.image;Z&&(I.notification.image=Z);const K=C.notification.icon;K&&(I.notification.icon=K)}(C,I),function Ie(I,C){!C.data||(I.data=C.data)}(C,I),function Rt(I,C){var S,x,Z,K,me;if(!(C.fcmOptions||null!==(S=C.notification)&&void 0!==S&&S.click_action))return;I.fcmOptions={};const Ue=null!==(Z=null===(x=C.fcmOptions)||void 0===x?void 0:x.link)&&void 0!==Z?Z:null===(K=C.notification)||void 0===K?void 0:K.click_action;Ue&&(I.fcmOptions.link=Ue);const Le=null===(me=C.fcmOptions)||void 0===me?void 0:me.analytics_label;Le&&(I.fcmOptions.analyticsLabel=Le)}(C,I),C}function yl(I){return"object"==typeof I&&!!I&&xu in I}function Wu(I,C){const S=[];for(let x=0;x<I.length;x++)S.push(I.charAt(x)),x<C.length&&S.push(C.charAt(x));return S.join("")}function Ns(I){return ln.create("missing-app-config-values",{valueName:I})}Wu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fa{constructor(C,S,x){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Fn(I){if(!I||!I.options)throw Ns("App Configuration Object");if(!I.name)throw Ns("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:S}=I;for(const x of C)if(!S[x])throw Ns(x);return{appName:I.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Z,installations:S,analyticsProvider:x}}_delete(){return Promise.resolve()}}function Er(I){return pa.apply(this,arguments)}function pa(){return(pa=(0,N.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(fl,{scope:ci}),I.swRegistration.update().catch(()=>{})}catch(C){throw ln.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Os(I,C){return vl.apply(this,arguments)}function vl(){return(vl=(0,N.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield Er(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function zu(I,C){return ks.apply(this,arguments)}function ks(){return(ks=(0,N.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=as)})).apply(this,arguments)}function Yr(){return(Yr=(0,N.Z)(function*(I,C){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield zu(I,C?.vapidKey),yield Os(I,C?.serviceWorkerRegistration),ua(I)})).apply(this,arguments)}function El(I,C,S){return di.apply(this,arguments)}function di(){return(di=(0,N.Z)(function*(I,C,S){const x=Ir(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(x,{message_id:S[xu],message_name:S[gd],message_time:S[pl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ir(I){switch(I){case ra.NOTIFICATION_CLICKED:return"notification_open";case ra.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Il(){return(Il=(0,N.Z)(function*(I,C){const S=C.data;if(!S.isFirebaseMessaging)return;I.onMessageHandler&&S.messageType===ra.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(mn(S)):I.onMessageHandler.next(mn(S)));const x=S.data;yl(x)&&"1"===x[Fu]&&(yield El(I,S.messageType,x))})).apply(this,arguments)}const Dl="@firebase/messaging",Zu=I=>{const C=new fa(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function zh(I,C){return Il.apply(this,arguments)}(C,S)),C},fs=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:x=>function rn(I,C){return Yr.apply(this,arguments)}(C,x)}};function Cl(){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qu(){(0,se._registerComponent)(new oe.wA("messaging",Zu,"PUBLIC")),(0,se._registerComponent)(new oe.wA("messaging-internal",fs,"PRIVATE")),(0,se.registerVersion)(Dl,"0.12.4"),(0,se.registerVersion)(Dl,"0.12.4","esm2017")}();const wl="analytics",lr="firebase_id",xs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bl="https://www.googletagmanager.com/gtag/js",Ln=new ge.Yd("@firebase/analytics");function vd(I){return Promise.all(I.map(C=>C.catch(S=>S)))}function Kh(I,C){const S=document.createElement("script");S.src=`${bl}?l=${I}&id=${C}`,S.async=!0,document.head.appendChild(S)}function Si(I,C,S,x,Z,K){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,N.Z)(function*(I,C,S,x,Z,K){const me=x[Z];try{if(me)yield C[me];else{const Le=(yield vd(S)).find(je=>je.measurementId===Z);Le&&(yield C[Le.appId])}}catch(Ue){Ln.error(Ue)}I("config",Z,K)})).apply(this,arguments)}function _a(I,C,S,x,Z){return Or.apply(this,arguments)}function Or(){return(Or=(0,N.Z)(function*(I,C,S,x,Z){try{let K=[];if(Z&&Z.send_to){let me=Z.send_to;Array.isArray(me)||(me=[me]);const Ue=yield vd(S);for(const Le of me){const je=Ue.find(ze=>ze.measurementId===Le),It=je&&C[je.appId];if(!It){K=[];break}K.push(It)}}0===K.length&&(K=Object.values(C)),yield Promise.all(K),I("event",x,Z||{})}catch(K){Ln.error(K)}})).apply(this,arguments)}function Fs(I){const C=window.document.getElementsByTagName("script");for(const S of Object.values(C))if(S.src&&S.src.includes(bl)&&S.src.includes(I))return S;return null}const Cr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Al=new class Qr{constructor(C={},S=1e3){this.throttleMetadata=C,this.intervalMillis=S}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,S){this.throttleMetadata[C]=S}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Qu(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ai(I){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,N.Z)(function*(I){var C;const{appId:S,apiKey:x}=I,Z={method:"GET",headers:Qu(x)},K=xs.replace("{app-id}",S),me=yield fetch(K,Z);if(200!==me.status&&304!==me.status){let Ue="";try{const Le=yield me.json();null!==(C=Le.error)&&void 0!==C&&C.message&&(Ue=Le.error.message)}catch{}throw Cr.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Ue})}return me.json()})).apply(this,arguments)}function Qt(I){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,N.Z)(function*(I,C=Al,S){const{appId:x,apiKey:Z,measurementId:K}=I.options;if(!x)throw Cr.create("no-app-id");if(!Z){if(K)return{measurementId:K,appId:x};throw Cr.create("no-api-key")}const me=C.getThrottleMetadata(x)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new va;return setTimeout((0,N.Z)(function*(){Ue.abort()}),void 0!==S?S:6e4),Vs({appId:x,apiKey:Z,measurementId:K},me,Ue,C)})).apply(this,arguments)}function Vs(I,C,S){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,N.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:S},x,Z=Al){var K;const{appId:me,measurementId:Ue}=I;try{yield ya(x,C)}catch(Le){if(Ue)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${Le?.message}]`),{appId:me,measurementId:Ue};throw Le}try{const Le=yield Ai(I);return Z.deleteThrottleMetadata(me),Le}catch(Le){const je=Le;if(!Ju(je)){if(Z.deleteThrottleMetadata(me),Ue)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:me,measurementId:Ue};throw Le}const It=503===Number(null===(K=je?.customData)||void 0===K?void 0:K.httpStatus)?(0,re.$s)(S,Z.intervalMillis,30):(0,re.$s)(S,Z.intervalMillis),ze={throttleEndTimeMillis:Date.now()+It,backoffCount:S+1};return Z.setThrottleMetadata(me,ze),Ln.debug(`Calling attemptFetch again in ${It} millis`),Vs(I,ze,x,Z)}})).apply(this,arguments)}function ya(I,C){return new Promise((S,x)=>{const Z=Math.max(C-Date.now(),0),K=setTimeout(S,Z);I.addEventListener(()=>{clearTimeout(K),x(Cr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Ju(I){if(!(I instanceof re.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}class va{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Ea,gs;function hi(){return(hi=(0,N.Z)(function*(I,C,S,x,Z){if(Z&&Z.global)I("event",S,x);else{const K=yield C;I("event",S,Object.assign(Object.assign({},x),{send_to:K}))}})).apply(this,arguments)}function vo(I){gs=I}function wa(I){Ea=I}function Pl(){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,N.Z)(function*(){if(!(0,re.hl)())return Ln.warn(Cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return Ln.warn(Cr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Nl(){return(Nl=(0,N.Z)(function*(I,C,S,x,Z,K,me){var Ue;const Le=Qt(I);Le.then(bn=>{S[bn.measurementId]=bn.appId,I.options.measurementId&&bn.measurementId!==I.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bn=>Ln.error(bn)),C.push(Le);const je=Pl().then(bn=>{if(bn)return x.getId()}),[It,ze]=yield Promise.all([Le,je]);Fs(K)||Kh(K,It.measurementId),gs&&(Z("consent","default",gs),vo(void 0)),Z("js",new Date);const Lt=null!==(Ue=me?.config)&&void 0!==Ue?Ue:{};return Lt.origin="firebase",Lt.update=!0,null!=ze&&(Lt[lr]=ze),Z("config",It.measurementId,Lt),Ea&&(Z("set",Ea),wa(void 0)),It.measurementId})).apply(this,arguments)}class Id{constructor(C){this.app=C}_delete(){return delete kr[this.app.options.appId],Promise.resolve()}}let kr={},Ol=[];const Eo={};let ba,Jr,xr="dataLayer",wr=!1;function Fl(I,C,S){!function xl(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((x,Z)=>`(${Z+1}) ${x}`).join(" "),S=Cr.create("invalid-analytics-context",{errorInfo:C});Ln.warn(S.message)}}();const x=I.options.appId;if(!x)throw Cr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Cr.create("no-api-key");Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=kr[x])throw Cr.create("already-exists",{id:x});if(!wr){!function Ed(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(xr);const{wrappedGtag:K,gtagCore:me}=function Yu(I,C,S,x,Z){let K=function(...me){window[x].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(K=window[Z]),window[Z]=function Tl(I,C,S,x){function K(){return(K=(0,N.Z)(function*(me,Ue,Le){try{"event"===me?yield _a(I,C,S,Ue,Le):"config"===me?yield Si(I,C,S,x,Ue,Le):"consent"===me?I("consent","update",Le):I("set",Ue)}catch(je){Ln.error(je)}})).apply(this,arguments)}return function Z(me,Ue,Le){return K.apply(this,arguments)}}(K,I,C,S),{gtagCore:K,wrappedGtag:window[Z]}}(kr,Ol,Eo,xr,"gtag");Jr=K,ba=me,wr=!0}return kr[x]=function fi(I,C,S,x,Z,K,me){return Nl.apply(this,arguments)}(I,Ol,Eo,C,ba,xr,S),new Id(I)}function tc(){return ms.apply(this,arguments)}function ms(){return(ms=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Ft="@firebase/analytics";!function rc(){(0,se._registerComponent)(new oe.wA(wl,(C,{options:S})=>Fl(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,se._registerComponent)(new oe.wA("analytics-internal",function I(C){try{const S=C.getProvider(wl).getImmediate();return{logEvent:(x,Z,K)=>function bd(I,C,S,x){I=(0,re.m9)(I),function Us(I,C,S,x,Z){return hi.apply(this,arguments)}(Jr,kr[I.app.options.appId],C,S,x).catch(Z=>Ln.error(Z))}(S,x,Z,K)}}catch(S){throw Cr.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,se.registerVersion)(Ft,"0.9.4"),(0,se.registerVersion)(Ft,"0.9.4","esm2017")}();var Vl=k(4408),Td=k(7565);const sc=new class ic extends Td.v{}(class Hp extends Vl.o{constructor(C,S){super(C,S),this.scheduler=C,this.work=S}schedule(C,S=0){return S>0?super.schedule(C,S):(this.delay=S,this.state=C,this.scheduler.flush(this),this)}execute(C,S){return S>0||this.closed?super.execute(C,S):this._execute(C,S)}requestAsyncId(C,S,x=0){return null!=x&&x>0||null==x&&this.delay>0?super.requestAsyncId(C,S,x):(C.flush(this),0)}});var Sd=k(4986),Bl=k(576),Kt=k(4482),Sa=k(5403),Co=k(4671),br=k(5363),Pi=k(9468);const oc=new p.GfV("7.5.0"),wo="__angularfire_symbol__analyticsIsSupportedValue",Hs="__angularfire_symbol__analyticsIsSupported",Aa="__angularfire_symbol__remoteConfigIsSupportedValue",Ad="__angularfire_symbol__remoteConfigIsSupported",bo="__angularfire_symbol__messagingIsSupportedValue",Md="__angularfire_symbol__messagingIsSupported";function Ni(I,C,S){if(C){if(1===C.length)return C[0];const K=C.filter(me=>me.app===S);if(1===K.length)return K[0]}return S.container.getProvider(I).getImmediate({optional:!0})}globalThis[Hs]||(globalThis[Hs]=tc().then(I=>globalThis[wo]=I).catch(()=>globalThis[wo]=!1)),globalThis[Md]||(globalThis[Md]=Cl().then(I=>globalThis[bo]=I).catch(()=>globalThis[bo]=!1)),globalThis[Ad]||(globalThis[Ad]=oo().then(I=>globalThis[Aa]=I).catch(()=>globalThis[Aa]=!1));const So=(I,C)=>{const S=C?[C]:(0,X.C6)(),x=[];return S.forEach(Z=>{Z.container.getProvider(I).instances.forEach(me=>{x.includes(me)||x.push(me)})}),x};function ei(){}class ys{constructor(C,S=sc){this.zone=C,this.delegate=S}now(){return this.delegate.now()}schedule(C,S,x){const Z=this.zone;return this.delegate.schedule(function(me){Z.runGuarded(()=>{C.apply(this,[me])})},S,x)}}class Ao{constructor(C){this.zone=C,this.task=null}call(C,S){const x=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ei,{},ei,ei)),S.pipe(function Yh(I,C,S){const x=(0,Bl.m)(I)||C||S?{next:I,error:C,complete:S}:I;return x?(0,Kt.e)((Z,K)=>{var me;null===(me=x.subscribe)||void 0===me||me.call(x);let Ue=!0;Z.subscribe((0,Sa.x)(K,Le=>{var je;null===(je=x.next)||void 0===je||je.call(x,Le),K.next(Le)},()=>{var Le;Ue=!1,null===(Le=x.complete)||void 0===Le||Le.call(x),K.complete()},Le=>{var je;Ue=!1,null===(je=x.error)||void 0===je||je.call(x,Le),K.error(Le)},()=>{var Le,je;Ue&&(null===(Le=x.unsubscribe)||void 0===Le||Le.call(x)),null===(je=x.finalize)||void 0===je||je.call(x)}))}):Co.y}({next:x,complete:x,error:x})).subscribe(C).add(x)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fr=(()=>{class I{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new ys(Zone.current)),this.insideAngular=S.run(()=>new ys(Zone.current,Sd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(S){return new(S||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function un(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Hl(I){return I.pipe((0,br.Q)(un().outsideAngular))}function js(I){return un(),function Mo(I){return function(S){return(S=S.lift(new Ao(I.ngZone))).pipe((0,Pi.R)(I.outsideAngular),(0,br.Q)(I.insideAngular))}}(un())(I)}},2090:(et,we,k)=>{k.d(we,{$s:()=>lt,BH:()=>De,DV:()=>qn,Dv:()=>dn,GJ:()=>Ii,L:()=>_e,LL:()=>On,Pz:()=>fe,Sg:()=>Ne,UG:()=>ue,UI:()=>zt,US:()=>oe,Wj:()=>Ts,Wl:()=>li,Yr:()=>qe,ZB:()=>Y,ZR:()=>St,aH:()=>Ee,b$:()=>ee,cI:()=>Ut,dS:()=>Gr,eu:()=>_t,g5:()=>N,gK:()=>Bn,gQ:()=>wi,h$:()=>le,hl:()=>$t,hu:()=>X,jU:()=>$,lb:()=>Ot,m9:()=>jn,ne:()=>dt,p$:()=>H,pd:()=>Un,r3:()=>_r,ru:()=>q,tV:()=>j,uI:()=>U,ug:()=>At,vZ:()=>ir,w1:()=>Te,w9:()=>Xi,xO:()=>Ar,xb:()=>Di,z$:()=>Se,zI:()=>Et,zd:()=>en});const X=function(L,F){if(!L)throw N(F)},N=function(L){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+L)},se=function(L){const F=[];let W=0;for(let ce=0;ce<L.length;ce++){let ne=L.charCodeAt(ce);ne<128?F[W++]=ne:ne<2048?(F[W++]=ne>>6|192,F[W++]=63&ne|128):55296==(64512&ne)&&ce+1<L.length&&56320==(64512&L.charCodeAt(ce+1))?(ne=65536+((1023&ne)<<10)+(1023&L.charCodeAt(++ce)),F[W++]=ne>>18|240,F[W++]=ne>>12&63|128,F[W++]=ne>>6&63|128,F[W++]=63&ne|128):(F[W++]=ne>>12|224,F[W++]=ne>>6&63|128,F[W++]=63&ne|128)}return F},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,F){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let ne=0;ne<L.length;ne+=3){const Ze=L[ne],rt=ne+1<L.length,Pt=rt?L[ne+1]:0,ot=ne+2<L.length,tn=ot?L[ne+2]:0;let Mr=(15&Pt)<<2|tn>>6,Dn=63&tn;ot||(Dn=64,rt||(Mr=64)),ce.push(W[Ze>>2],W[(3&Ze)<<4|Pt>>4],W[Mr],W[Dn])}return ce.join("")},encodeString(L,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(L):this.encodeByteArray(se(L),F)},decodeString(L,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(L):function(L){const F=[];let W=0,ce=0;for(;W<L.length;){const ne=L[W++];if(ne<128)F[ce++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Ze=L[W++];F[ce++]=String.fromCharCode((31&ne)<<6|63&Ze)}else if(ne>239&&ne<365){const ot=((7&ne)<<18|(63&L[W++])<<12|(63&L[W++])<<6|63&L[W++])-65536;F[ce++]=String.fromCharCode(55296+(ot>>10)),F[ce++]=String.fromCharCode(56320+(1023&ot))}else{const Ze=L[W++],rt=L[W++];F[ce++]=String.fromCharCode((15&ne)<<12|(63&Ze)<<6|63&rt)}}return F.join("")}(this.decodeStringToByteArray(L,F))},decodeStringToByteArray(L,F){this.init_();const W=F?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let ne=0;ne<L.length;){const Ze=W[L.charAt(ne++)],Pt=ne<L.length?W[L.charAt(ne)]:0;++ne;const tn=ne<L.length?W[L.charAt(ne)]:64;++ne;const Dt=ne<L.length?W[L.charAt(ne)]:64;if(++ne,null==Ze||null==Pt||null==tn||null==Dt)throw new ge;ce.push(Ze<<2|Pt>>4),64!==tn&&(ce.push(Pt<<4&240|tn>>2),64!==Dt&&ce.push(tn<<6&192|Dt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const le=function(L){const F=se(L);return oe.encodeByteArray(F,!0)},_e=function(L){return le(L).replace(/\./g,"")},j=function(L){try{return oe.decodeString(L,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function H(L){return Y(void 0,L)}function Y(L,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return F}for(const W in F)!F.hasOwnProperty(W)||!He(W)||(L[W]=Y(L[W],F[W]));return L}function He(L){return"__proto__"!==L}const ye=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const L=process.env.__FIREBASE_DEFAULTS__;return L?JSON.parse(L):void 0})()||(()=>{if(typeof document>"u")return;let L;try{L=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=L&&j(L[1]);return F&&JSON.parse(F)})()}catch(L){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${L}`)}},Ee=()=>{var L;return null===(L=ye())||void 0===L?void 0:L.config},fe=L=>{var F;return null===(F=ye())||void 0===F?void 0:F[`_${L}`]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,W)=>{this.resolve=F,this.reject=W})}wrapCallback(F){return(W,ce)=>{W?this.reject(W):this.resolve(ce),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(W):F(W,ce))}}}function Ne(L,F){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=F||"demo-project",ne=L.iat||0,Ze=L.sub||L.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:ne,exp:ne+3600,auth_time:ne,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},L);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(rt)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function U(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function ue(){var L;const F=null===(L=ye())||void 0===L?void 0:L.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $(){return"object"==typeof self&&self.self===self}function q(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){const L=Se();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function qe(){return!1}function $t(){try{return"object"==typeof indexedDB}catch{return!1}}function _t(){return new Promise((L,F)=>{try{let W=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(ce);ne.onsuccess=()=>{ne.result.close(),W||self.indexedDB.deleteDatabase(ce),L(!0)},ne.onupgradeneeded=()=>{W=!1},ne.onerror=()=>{var Ze;F((null===(Ze=ne.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(W){F(W)}})}function Et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class St extends Error{constructor(F,W,ce){super(W),this.code=F,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,On.prototype.create)}}class On{constructor(F,W,ce){this.service=F,this.serviceName=W,this.errors=ce}create(F,...W){const ce=W[0]||{},ne=`${this.service}/${F}`,Ze=this.errors[F],rt=Ze?function zn(L,F){return L.replace(nt,(W,ce)=>{const ne=F[ce];return null!=ne?String(ne):`<${ce}?>`})}(Ze,ce):"Error";return new St(ne,`${this.serviceName}: ${rt} (${ne}).`,ce)}}const nt=/\{\$([^}]+)}/g;function Ut(L){return JSON.parse(L)}function li(L){return JSON.stringify(L)}const An=function(L){let F={},W={},ce={},ne="";try{const Ze=L.split(".");F=Ut(j(Ze[0])||""),W=Ut(j(Ze[1])||""),ne=Ze[2],ce=W.d||{},delete W.d}catch{}return{header:F,claims:W,data:ce,signature:ne}},Xi=function(L){const W=An(L).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},Ii=function(L){const F=An(L).claims;return"object"==typeof F&&!0===F.admin};function _r(L,F){return Object.prototype.hasOwnProperty.call(L,F)}function qn(L,F){if(Object.prototype.hasOwnProperty.call(L,F))return L[F]}function Di(L){for(const F in L)if(Object.prototype.hasOwnProperty.call(L,F))return!1;return!0}function zt(L,F,W){const ce={};for(const ne in L)Object.prototype.hasOwnProperty.call(L,ne)&&(ce[ne]=F.call(W,L[ne],ne,L));return ce}function ir(L,F){if(L===F)return!0;const W=Object.keys(L),ce=Object.keys(F);for(const ne of W){if(!ce.includes(ne))return!1;const Ze=L[ne],rt=F[ne];if(Ke(Ze)&&Ke(rt)){if(!ir(Ze,rt))return!1}else if(Ze!==rt)return!1}for(const ne of ce)if(!W.includes(ne))return!1;return!0}function Ke(L){return null!==L&&"object"==typeof L}function Ar(L){const F=[];for(const[W,ce]of Object.entries(L))Array.isArray(ce)?ce.forEach(ne=>{F.push(encodeURIComponent(W)+"="+encodeURIComponent(ne))}):F.push(encodeURIComponent(W)+"="+encodeURIComponent(ce));return F.length?"&"+F.join("&"):""}function en(L){const F={};return L.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[ne,Ze]=ce.split("=");F[decodeURIComponent(ne)]=decodeURIComponent(Ze)}}),F}function Un(L){const F=L.indexOf("?");if(!F)return"";const W=L.indexOf("#",F);return L.substring(F,W>0?W:void 0)}class wi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let F=1;F<this.blockSize;++F)this.pad_[F]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(F,W){W||(W=0);const ce=this.W_;if("string"==typeof F)for(let Dt=0;Dt<16;Dt++)ce[Dt]=F.charCodeAt(W)<<24|F.charCodeAt(W+1)<<16|F.charCodeAt(W+2)<<8|F.charCodeAt(W+3),W+=4;else for(let Dt=0;Dt<16;Dt++)ce[Dt]=F[W]<<24|F[W+1]<<16|F[W+2]<<8|F[W+3],W+=4;for(let Dt=16;Dt<80;Dt++){const Mr=ce[Dt-3]^ce[Dt-8]^ce[Dt-14]^ce[Dt-16];ce[Dt]=4294967295&(Mr<<1|Mr>>>31)}let tn,vn,ne=this.chain_[0],Ze=this.chain_[1],rt=this.chain_[2],Pt=this.chain_[3],ot=this.chain_[4];for(let Dt=0;Dt<80;Dt++){Dt<40?Dt<20?(tn=Pt^Ze&(rt^Pt),vn=1518500249):(tn=Ze^rt^Pt,vn=1859775393):Dt<60?(tn=Ze&rt|Pt&(Ze|rt),vn=2400959708):(tn=Ze^rt^Pt,vn=3395469782);const Mr=(ne<<5|ne>>>27)+tn+ot+vn+ce[Dt]&4294967295;ot=Pt,Pt=rt,rt=4294967295&(Ze<<30|Ze>>>2),Ze=ne,ne=Mr}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+Ze&4294967295,this.chain_[2]=this.chain_[2]+rt&4294967295,this.chain_[3]=this.chain_[3]+Pt&4294967295,this.chain_[4]=this.chain_[4]+ot&4294967295}update(F,W){if(null==F)return;void 0===W&&(W=F.length);const ce=W-this.blockSize;let ne=0;const Ze=this.buf_;let rt=this.inbuf_;for(;ne<W;){if(0===rt)for(;ne<=ce;)this.compress_(F,ne),ne+=this.blockSize;if("string"==typeof F){for(;ne<W;)if(Ze[rt]=F.charCodeAt(ne),++rt,++ne,rt===this.blockSize){this.compress_(Ze),rt=0;break}}else for(;ne<W;)if(Ze[rt]=F[ne],++rt,++ne,rt===this.blockSize){this.compress_(Ze),rt=0;break}}this.inbuf_=rt,this.total_+=W}digest(){const F=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&W,W/=256;this.compress_(this.buf_);let ce=0;for(let ne=0;ne<5;ne++)for(let Ze=24;Ze>=0;Ze-=8)F[ce]=this.chain_[ne]>>Ze&255,++ce;return F}}function dt(L,F){const W=new Je(L,F);return W.subscribe.bind(W)}class Je{constructor(F,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{F(this)}).catch(ce=>{this.error(ce)})}next(F){this.forEachObserver(W=>{W.next(F)})}error(F){this.forEachObserver(W=>{W.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,W,ce){let ne;if(void 0===F&&void 0===W&&void 0===ce)throw new Error("Missing Observer.");ne=function es(L,F){if("object"!=typeof L||null===L)return!1;for(const W of F)if(W in L&&"function"==typeof L[W])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:W,complete:ce},void 0===ne.next&&(ne.next=Zt),void 0===ne.error&&(ne.error=Zt),void 0===ne.complete&&(ne.complete=Zt);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),Ze}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,F)}sendOne(F,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{W(this.observers[F])}catch(ce){typeof console<"u"&&console.error&&console.error(ce)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zt(){}const dn=function(L,F,W,ce){let ne;if(ce<F?ne="at least "+F:ce>W&&(ne=0===W?"none":"no more than "+W),ne)throw new Error(L+" failed: Was called with "+ce+(1===ce?" argument.":" arguments.")+" Expects "+ne+".")};function Bn(L,F){return`${L} failed: ${F} argument `}function Ts(L,F,W,ce){if((!ce||W)&&"function"!=typeof W)throw new Error(Bn(L,F)+"must be a valid function.")}function Ot(L,F,W,ce){if((!ce||W)&&("object"!=typeof W||null===W))throw new Error(Bn(L,F)+"must be a valid context object.")}const Gr=function(L){const F=[];let W=0;for(let ce=0;ce<L.length;ce++){let ne=L.charCodeAt(ce);if(ne>=55296&&ne<=56319){const Ze=ne-55296;ce++,X(ce<L.length,"Surrogate pair missing trail surrogate."),ne=65536+(Ze<<10)+(L.charCodeAt(ce)-56320)}ne<128?F[W++]=ne:ne<2048?(F[W++]=ne>>6|192,F[W++]=63&ne|128):ne<65536?(F[W++]=ne>>12|224,F[W++]=ne>>6&63|128,F[W++]=63&ne|128):(F[W++]=ne>>18|240,F[W++]=ne>>12&63|128,F[W++]=ne>>6&63|128,F[W++]=63&ne|128)}return F},At=function(L){let F=0;for(let W=0;W<L.length;W++){const ce=L.charCodeAt(W);ce<128?F++:ce<2048?F+=2:ce>=55296&&ce<=56319?(F+=4,W++):F+=3}return F};function lt(L,F=1e3,W=2){const ce=F*Math.pow(W,L),ne=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+ne)}function jn(L){return L&&L._delegate?L._delegate:L}},8974:(et,we,k)=>{var p=k(4650);let X=null;function N(){return X}class re{}const oe=new p.OlP("DocumentToken");class sr{constructor(e,t,o,l){this.$implicit=e,this.ngForOf=t,this.index=o,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ui=(()=>{class n{constructor(t,o,l){this._viewContainer=t,this._template=o,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const o=this._viewContainer;t.forEachOperation((l,f,_)=>{if(null==l.previousIndex)o.createEmbeddedView(this._template,new sr(l.item,this._ngForOf,-1,-1),null===_?void 0:_);else if(null==_)o.remove(null===f?void 0:f);else if(null!==f){const D=o.get(f);o.move(D,_),fn(D,l)}});for(let l=0,f=o.length;l<f;l++){const D=o.get(l).context;D.index=l,D.count=f,D.ngForOf=this._ngForOf}t.forEachIdentityChange(l=>{fn(o.get(l.currentIndex),l)})}static ngTemplateContextGuard(t,o){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function fn(n,e){n.context.$implicit=e.item}let Yt=(()=>{class n{constructor(t,o){this._viewContainer=t,this._context=new Ss,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ns("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ns("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,o){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ss{constructor(){this.$implicit=null,this.ngIf=null}}function ns(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let is=(()=>{class n{constructor(t,o,l){this._ngEl=t,this._differs=o,this._renderer=l,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,o){const[l,f]=t.split("."),_=-1===l.indexOf("-")?void 0:p.JOm.DashCase;null!=o?this._renderer.setStyle(this._ngEl.nativeElement,l,f?`${o}${f}`:o,_):this._renderer.removeStyle(this._ngEl.nativeElement,l,_)}_applyChanges(t){t.forEachRemovedItem(o=>this._setStyle(o.key,null)),t.forEachAddedItem(o=>this._setStyle(o.key,o.currentValue)),t.forEachChangedItem(o=>this._setStyle(o.key,o.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.aQg),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class xt{createSubscription(e,t){return e.subscribe({next:t,error:o=>{throw o}})}dispose(e){e.unsubscribe()}}class Wh{createSubscription(e,t){return e.then(t,o=>{throw o})}dispose(e){}}const vr=new Wh,Ou=new xt;let ss=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,o=>this._updateLatestValue(t,o))}_selectStrategy(t){if((0,p.QGY)(t))return vr;if((0,p.F4k)(t))return Ou;throw function pn(n,e){return new p.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,o){t===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO,16))},n.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Nr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();class Ed extends re{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Si extends Ed{static makeCurrent(){!function se(n){X||(X=n)}(new Si)}onAndCancel(e,t,o){return e.addEventListener(t,o,!1),()=>{e.removeEventListener(t,o,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _a(){return Dr=Dr||document.querySelector("base"),Dr?Dr.getAttribute("href"):null}();return null==t?null:function Tl(n){Or=Or||document.createElement("a"),Or.setAttribute("href",n);const e=Or.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Dr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function $n(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const o=t.indexOf("="),[l,f]=-1==o?[t,""]:[t.slice(0,o),t.slice(o+1)];if(l.trim()===e)return decodeURIComponent(f)}return null}(document.cookie,e)}}let Or,Dr=null;const Yu=new p.OlP("TRANSITION_ID"),_o=[{provide:p.ip1,useFactory:function Fs(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const o=N(),l=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let f=0;f<l.length;f++)o.remove(l[f])})}},deps:[Yu,oe,p.zs3],multi:!0}];let Sl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const yo=new p.OlP("EventManagerPlugins");let Qr=(()=>{class n{constructor(t,o){this._zone=o,this._eventNameToPlugin=new Map,t.forEach(l=>l.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,o,l){return this._findPluginFor(o).addEventListener(t,o,l)}addGlobalEventListener(t,o,l){return this._findPluginFor(o).addGlobalEventListener(t,o,l)}getZone(){return this._zone}_findPluginFor(t){const o=this._eventNameToPlugin.get(t);if(o)return o;const l=this._plugins;for(let f=0;f<l.length;f++){const _=l[f];if(_.supports(t))return this._eventNameToPlugin.set(t,_),_}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Al{constructor(e){this._doc=e}addGlobalEventListener(e,t,o){const l=N().getGlobalEventTarget(this._doc,e);if(!l)throw new Error(`Unsupported event target ${l} for event ${t}`);return this.addEventListener(l,t,o)}}let Qu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const o=new Set;t.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),o.add(l))}),this.onStylesAdded(o)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ai=(()=>{class n extends Qu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,o,l){t.forEach(f=>{const _=this._doc.createElement("style");_.textContent=f,l.push(o.appendChild(_))})}addHost(t){const o=[];this._addStylesToHost(this._stylesSet,t,o),this._hostNodes.set(t,o)}removeHost(t){const o=this._hostNodes.get(t);o&&o.forEach(Ml),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((o,l)=>{this._addStylesToHost(t,l,o)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ml))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ml(n){N().remove(n)}const Qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ls=/%COMP%/g;function Us(n,e){return e.flat(100).map(t=>t.replace(Ls,n))}function hi(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ri=(()=>{class n{constructor(t,o,l){this.eventManager=t,this.sharedStylesHost=o,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new ps(t)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;switch(o.encapsulation){case p.ifc.Emulated:{let l=this.rendererByCompId.get(o.id);return l||(l=new Rl(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,l)),l.applyToHost(t),l}case 1:case p.ifc.ShadowDom:return new Bs(this.eventManager,this.sharedStylesHost,t,o);default:if(!this.rendererByCompId.has(o.id)){const l=Us(o.id,o.styles);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Qr),p.LFG(Ai),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class ps{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Qt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Xn(e)?e.content:e).appendChild(t)}insertBefore(e,t,o){e&&(Xn(e)?e.content:e).insertBefore(t,o)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return t||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,o,l){if(l){t=l+":"+t;const f=Qt[l];f?e.setAttributeNS(f,t,o):e.setAttribute(t,o)}else e.setAttribute(t,o)}removeAttribute(e,t,o){if(o){const l=Qt[o];l?e.removeAttributeNS(l,t):e.removeAttribute(`${o}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,o,l){l&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,o,l&p.JOm.Important?"important":""):e.style[t]=o}removeStyle(e,t,o){o&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,o){e[t]=o}setValue(e,t){e.nodeValue=t}listen(e,t,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,hi(o)):this.eventManager.addEventListener(e,t,hi(o))}}function Xn(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Rl extends ps{constructor(e,t,o,l){super(e),this.component=o;const f=Us(l+"-"+o.id,o.styles);t.addStyles(f),this.contentAttr=function va(n){return"_ngcontent-%COMP%".replace(Ls,n)}(l+"-"+o.id),this.hostAttr=function Ea(n){return"_nghost-%COMP%".replace(Ls,n)}(l+"-"+o.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const o=super.createElement(e,t);return super.setAttribute(o,this.contentAttr,""),o}}class Bs extends ps{constructor(e,t,o,l){super(e),this.sharedStylesHost=t,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=Us(l.id,l.styles);for(let _=0;_<f.length;_++){const D=document.createElement("style");D.textContent=f[_],this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,o){return super.insertBefore(this.nodeOrShadowRoot(e),t,o)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gs=(()=>{class n extends Al{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,l){return t.addEventListener(o,l,!1),()=>this.removeEventListener(t,o,l)}removeEventListener(t,o,l){return t.removeEventListener(o,l)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const vo=["alt","control","meta","shift"],wa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xu=(()=>{class n extends Al{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,o,l){const f=n.parseEventName(o),_=n.eventCallback(f.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,f.domEventName,_))}static parseEventName(t){const o=t.toLowerCase().split("."),l=o.shift();if(0===o.length||"keydown"!==l&&"keyup"!==l)return null;const f=n._normalizeKey(o.pop());let _="",D=o.indexOf("code");if(D>-1&&(o.splice(D,1),_="code."),vo.forEach(R=>{const V=o.indexOf(R);V>-1&&(o.splice(V,1),_+=R+".")}),_+=f,0!=o.length||0===f.length)return null;const T={};return T.domEventName=l,T.fullKey=_,T}static matchEventFullKeyCode(t,o){let l=wa[t.key]||t.key,f="";return o.indexOf("code.")>-1&&(l=t.code,f="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),vo.forEach(_=>{_!==l&&(0,Pl[_])(t)&&(f+=_+".")}),f+=l,f===o)}static eventCallback(t,o,l){return f=>{n.matchEventFullKeyCode(f,t)&&l.runGuarded(()=>o(f))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Jr=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Eo(){Si.makeCurrent()},multi:!0},{provide:oe,useFactory:function kl(){return(0,p.RDi)(document),document},deps:[]}]),wr=new p.OlP(""),Dd=[{provide:p.rWj,useClass:class Cr{addToWindow(e){p.dqk.getAngularTestability=(o,l=!0)=>{const f=e.findTestabilityInTree(o,l);if(null==f)throw new Error("Could not find testability for element.");return f},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(o=>{const l=p.dqk.getAllAngularTestabilities();let f=l.length,_=!1;const D=function(T){_=_||T,f--,0==f&&o(_)};l.forEach(function(T){T.whenStable(D)})})}findTestabilityInTree(e,t,o){return null==t?null:e.getTestability(t)??(o?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],xl=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function xr(){return new p.qLn},deps:[]},{provide:yo,useClass:gs,multi:!0,deps:[oe,p.R0b,p.Lbi]},{provide:yo,useClass:Xu,multi:!0,deps:[oe]},{provide:Ri,useClass:Ri,deps:[Qr,Ai,p.AFp]},{provide:p.FYo,useExisting:Ri},{provide:Qu,useExisting:Ai},{provide:Ai,useClass:Ai,deps:[oe]},{provide:Qr,useClass:Qr,deps:[yo,p.R0b]},{provide:class ds{},useClass:Sl,deps:[]},[]];let Fl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Yu,useExisting:p.AFp},_o]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wr,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...xl,...Dd],imports:[Nr,p.hGG]}),n})();typeof window<"u"&&window;var To=k(7579),_s=k(7669),Xr=k(8996);function Ni(...n){const e=(0,_s.yG)(n);return(0,Xr.D)(n,e)}var So=k(8306),ei=k(831),ys=k(5363),Ao=k(8421),Fr=k(4482),un=k(5403);function er(n,e){return(0,Fr.e)((t,o)=>{let l=null,f=0,_=!1;const D=()=>_&&!l&&o.complete();t.subscribe((0,un.x)(o,T=>{l?.unsubscribe();let R=0;const V=f++;(0,Ao.Xf)(n(T,V)).subscribe(l=(0,un.x)(o,B=>o.next(e?e(T,B,V,R++):B),()=>{l=null,D()}))},()=>{_=!0,D()}))})}var Jt=k(4004),Hl=k(6063);class Ma extends To.x{constructor(e=1/0,t=1/0,o=Hl.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:o,_infiniteTimeWindow:l,_timestampProvider:f,_windowTime:_}=this;t||(o.push(e),!l&&o.push(f.now()+_)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:l}=this,f=l.slice();for(let _=0;_<f.length&&!e.closed;_+=o?1:2)e.next(f[_]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:l}=this,f=(l?1:2)*e;if(e<1/0&&f<o.length&&o.splice(0,o.length-f),!l){const _=t.now();let D=0;for(let T=1;T<o.length&&o[T]<=_;T+=2)D=T;D&&o.splice(0,D+1)}}}var js=k(3099);function Mo(n,e,t){let o,l=!1;return n&&"object"==typeof n?({bufferSize:o=1/0,windowTime:e=1/0,refCount:l=!1,scheduler:t}=n):o=n??1/0,(0,js.B)({connector:()=>new Ma(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}const Ra=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function I(n,e){return(0,Fr.e)((t,o)=>{let l=0;t.subscribe((0,un.x)(o,f=>n.call(e,f,l++)&&o.next(f)))})}var C=k(515);function S(n){return n<=0?()=>C.E:(0,Fr.e)((e,t)=>{let o=0;e.subscribe((0,un.x)(t,l=>{++o<=n&&(t.next(l),n<=o&&t.complete())}))})}function x(n){return(0,Fr.e)((e,t)=>{let o=!1;e.subscribe((0,un.x)(t,l=>{o=!0,t.next(l)},()=>{o||t.next(n),t.complete()}))})}function Z(n=K){return(0,Fr.e)((e,t)=>{let o=!1;e.subscribe((0,un.x)(t,l=>{o=!0,t.next(l)},()=>o?t.complete():t.error(n())))})}function K(){return new Ra}var me=k(4671),Le=k(576);function je(n,e){return(0,Le.m)(e)?er(()=>n,e):er(()=>n)}var It=k(9468),ze=k(7184),Lt=k(2011);k(259);var xi=k(5861),Fi=k(9681),gi=k(4859),P=k(2090),Pa=k(1877);const lc=new Map,Pd={activated:!1,tokenObservers:[]},Xh={initialized:!1,enabled:!1};function Wt(n){return lc.get(n)||Object.assign({},Pd)}function uc(){return Xh}class Od{constructor(e,t,o,l,f){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=o,this.lowerBound=l,this.upperBound=f,this.pending=null,this.nextErrorWaitInterval=l,l>f)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,xi.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function zp(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(o){t.retryPolicy(o)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Bt=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function dc(n){if(!Wt(n).activated)throw Bt.create("use-before-activation",{appName:n.name})}function No(n,e){return hc.apply(this,arguments)}function hc(){return(hc=(0,xi.Z)(function*({url:n,body:e},t){const o={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const B=yield l.getHeartbeatsHeader();B&&(o["X-Firebase-Client"]=B)}const f={method:"POST",body:JSON.stringify(e),headers:o};let _,D;try{_=yield fetch(n,f)}catch(B){throw Bt.create("fetch-network-error",{originalErrorMessage:B?.message})}if(200!==_.status)throw Bt.create("fetch-status-error",{httpStatus:_.status});try{D=yield _.json()}catch(B){throw Bt.create("fetch-parse-error",{originalErrorMessage:B?.message})}const T=D.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw Bt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const R=1e3*Number(T[1]),V=Date.now();return{token:D.token,expireTimeMillis:V+R,issuedAtTimeMillis:V}})).apply(this,arguments)}function rf(n,e){const{projectId:t,appId:o,apiKey:l}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${o}:exchangeDebugToken?key=${l}`,body:{debug_token:e}}}const Wl="firebase-app-check-store";let Na=null;function sf(){return Na||(Na=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=o=>{n(o.target.result)},t.onerror=o=>{var l;e(Bt.create("storage-open",{originalErrorMessage:null===(l=o.target.error)||void 0===l?void 0:l.message}))},t.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Wl,{keyPath:"compositeKey"})}}catch(t){e(Bt.create("storage-open",{originalErrorMessage:t?.message}))}}),Na)}function Ld(){return(Ld=(0,xi.Z)(function*(n,e){const o=(yield sf()).transaction(Wl,"readwrite"),f=o.objectStore(Wl).put({compositeKey:n,value:e});return new Promise((_,D)=>{f.onsuccess=T=>{_()},o.onerror=T=>{var R;D(Bt.create("storage-set",{originalErrorMessage:null===(R=T.target.error)||void 0===R?void 0:R.message}))}})})).apply(this,arguments)}const Li=new Pa.Yd("@firebase/app-check");function pc(n,e){return(0,P.hl)()?function Fd(n,e){return function af(n,e){return Ld.apply(this,arguments)}(function Vd(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Li.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function lf(){return uc().enabled}function gc(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,xi.Z)(function*(){const n=uc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Kp={error:"UNKNOWN_ERROR"};function Yl(n){return P.US.encodeString(JSON.stringify(n),!1)}function ka(n){return mc.apply(this,arguments)}function mc(){return(mc=(0,xi.Z)(function*(n,e=!1){const t=n.app;dc(t);const o=Wt(t);let f,l=o.token;if(l&&!ti(l)&&(o.token=void 0,l=void 0),!l){const T=yield o.cachedTokenPromise;T&&(ti(T)?l=T:yield pc(t,void 0))}if(!e&&l&&ti(l))return{token:l.token};let D,_=!1;if(lf()){o.exchangeTokenPromise||(o.exchangeTokenPromise=No(rf(t,yield gc()),n.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),_=!0);const T=yield o.exchangeTokenPromise;return yield pc(t,T),o.token=T,{token:T.token}}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),_=!0),l=yield Wt(t).exchangeTokenPromise}catch(T){"appCheck/throttled"===T.code?Li.warn(T.message):Li.error(T),f=T}return l?f?D=ti(l)?{token:l.token,internalError:f}:ko(f):(D={token:l.token},o.token=l,yield pc(t,l)):D=ko(f),_&&Hd(t,D),D})).apply(this,arguments)}function _c(n,e){const t=Wt(n),o=t.tokenObservers.filter(l=>l.next!==e);0===o.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=o}function uf(n){const{app:e}=n,t=Wt(e);let o=t.tokenRefresher;o||(o=function cf(n){const{app:e}=n;return new Od((0,xi.Z)(function*(){let o;if(o=Wt(e).token?yield ka(n,!0):yield ka(n),o.error)throw o.error;if(o.internalError)throw o.internalError}),()=>!0,()=>{const t=Wt(e);if(t.token){let o=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return o=Math.min(o,t.token.expireTimeMillis-3e5),Math.max(0,o-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=o),!o.isRunning()&&t.isTokenAutoRefreshEnabled&&o.start()}function Hd(n,e){const t=Wt(n).tokenObservers;for(const o of t)try{"EXTERNAL"===o.type&&null!=e.error?o.error(e.error):o.next(e)}catch{}}function ti(n){return n.expireTimeMillis-Date.now()>0}function ko(n){return{token:Yl(Kp),error:n}}class df{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wt(this.app);for(const t of e)_c(this.app,t.next);return Promise.resolve()}}const cr="app-check-internal";!function _f(){(0,Fi._registerComponent)(new gi.wA("app-check",n=>function hf(n,e){return new df(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cr).initialize()})),(0,Fi._registerComponent)(new gi.wA(cr,n=>function D_(n){return{getToken:e=>ka(n,e),addTokenListener:e=>function Ql(n,e,t,o){const{app:l}=n,f=Wt(l);if(f.tokenObservers=[...f.tokenObservers,{next:t,error:o,type:e}],f.token&&ti(f.token)){const D=f.token;Promise.resolve().then(()=>{t({token:D.token}),uf(n)}).catch(()=>{})}f.cachedTokenPromise.then(()=>uf(n))}(n,"INTERNAL",e),removeTokenListener:e=>_c(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fi.registerVersion)("@firebase/app-check","0.6.4")}();class ni{constructor(){return(0,ze.vb)("app-check")}}typeof window<"u"&&window;var z=k(9260);const Oe=new p.OlP("angularfire2.auth.use-emulator"),$e=new p.OlP("angularfire2.auth.settings"),ut=new p.OlP("angularfire2.auth.tenant-id"),Ye=new p.OlP("angularfire2.auth.langugage-code"),Tn=new p.OlP("angularfire2.auth.use-device-language"),ri=new p.OlP("angularfire.auth.persistence"),iu=(n,e,t,o,l,f,_,D)=>(0,Lt.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const T=e.runOutsideAngular(()=>n.auth());if(t&&T.useEmulator(...t),o&&(T.tenantId=o),T.languageCode=l,f&&T.useDeviceLanguage(),_)for(const[R,V]of Object.entries(_))T.settings[R]=V;return D&&T.setPersistence(D),T},[t,o,l,f,_,D]);let Va=(()=>{class n{constructor(t,o,l,f,_,D,T,R,V,B,J,pe){const Ae=new To.x,Xe=Ni(void 0).pipe((0,ys.Q)(_.outsideAngular),er(()=>f.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4217)))),(0,Jt.U)(()=>(0,Lt.on)(t,f,o)),(0,Jt.U)(at=>iu(at,f,D,R,V,B,T,J)),Mo({bufferSize:1,refCount:!1}));if(function Bu(n){return"server"===n}(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ni(null);else{Xe.pipe(function Ue(n,e){const t=arguments.length>=2;return o=>o.pipe(n?I((l,f)=>n(l,f,o)):me.y,S(1),t?x(e):Z(()=>new Ra))}()).subscribe();const Vt=Xe.pipe(er(bt=>bt.getRedirectResult().then(mr=>mr,()=>null)),ze.iC,Mo({bufferSize:1,refCount:!1})),Ht=Xe.pipe(er(bt=>new So.y(mr=>({unsubscribe:f.runOutsideAngular(()=>bt.onAuthStateChanged(Ji=>mr.next(Ji),Ji=>mr.error(Ji),()=>mr.complete()))})))),jt=Xe.pipe(er(bt=>new So.y(mr=>({unsubscribe:f.runOutsideAngular(()=>bt.onIdTokenChanged(Ji=>mr.next(Ji),Ji=>mr.error(Ji),()=>mr.complete()))}))));this.authState=Vt.pipe(je(Ht),(0,It.R)(_.outsideAngular),(0,ys.Q)(_.insideAngular)),this.user=Vt.pipe(je(jt),(0,It.R)(_.outsideAngular),(0,ys.Q)(_.insideAngular)),this.idToken=this.user.pipe(er(bt=>bt?(0,Xr.D)(bt.getIdToken()):Ni(null))),this.idTokenResult=this.user.pipe(er(bt=>bt?(0,Xr.D)(bt.getIdTokenResult()):Ni(null))),this.credential=(0,ei.T)(Vt,Ae,this.authState.pipe(I(bt=>!bt))).pipe((0,Jt.U)(bt=>bt?.user?bt:null),(0,It.R)(_.outsideAngular),(0,ys.Q)(_.insideAngular))}return(0,Lt.pX)(this,Xe,f,{spy:{apply:(at,Vt,Ht)=>{(at.startsWith("signIn")||at.startsWith("createUser"))&&Ht.then(jt=>Ae.next(jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Lt.Dh),p.LFG(Lt.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ze.HU),p.LFG(Oe,8),p.LFG($e,8),p.LFG(ut,8),p.LFG(Ye,8),p.LFG(Tn,8),p.LFG(ri,8),p.LFG(ni,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Vi{constructor(e,t,o,l){this.file=e,this.desc=t,this.title=o,this.userID=l}}var su=k(4986);function Zd(n,e,t,o,l){return(f,_)=>{let D=t,T=e,R=0;f.subscribe((0,un.x)(_,V=>{const B=R++;T=D?n(T,V,B):(D=!0,V),o&&_.next(T)},l&&(()=>{D&&_.next(T),_.complete()})))}}function bc(n,e){return(0,Fr.e)(Zd(n,e,arguments.length>=2,!0))}function Qp(n,e){return n===e}var T_=k(5032);k(4217);var iI=k(3942);const Jp="@firebase/database";let Xp="";function A_(n){Xp=n}class sI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class M_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Kd=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sI(e)}}catch{}return new M_},au=Kd("localStorage"),Yd=Kd("sessionStorage"),Tc=new Pa.Yd("@firebase/database"),Nn=function(){let n=1;return function(){return n++}}(),R_=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const o=t.digest();return P.US.encodeByteArray(o)},Qd=function(...n){let e="";for(let t=0;t<n.length;t++){const o=n[t];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?e+=Qd.apply(null,o):e+="object"==typeof o?(0,P.Wl)(o):o,e+=" "}return e};let Vo=null,eg=!0;const P_=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Tc.logLevel=Pa.in.VERBOSE,Vo=Tc.log.bind(Tc),e&&Yd.set("logging_enabled",!0)):"function"==typeof n?Vo=n:(Vo=null,Yd.remove("logging_enabled"))},tr=function(...n){if(!0===eg&&(eg=!1,null===Vo&&!0===Yd.get("logging_enabled")&&P_(!0)),Vo){const e=Qd.apply(null,n);Vo(e)}},Jd=function(n){return function(...e){tr(n,...e)}},tg=function(...n){const e="FIREBASE INTERNAL ERROR: "+Qd(...n);Tc.error(e)},Gs=function(...n){const e=`FIREBASE FATAL ERROR: ${Qd(...n)}`;throw Tc.error(e),new Error(e)},Ur=function(...n){const e="FIREBASE WARNING: "+Qd(...n);Tc.warn(e)},Ba=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Uo="[MIN_NAME]",Ws="[MAX_NAME]",Ha=function(n,e){if(n===e)return 0;if(n===Uo||e===Ws)return-1;if(e===Uo||n===Ws)return 1;{const t=x_(n),o=x_(e);return null!==t?null!==o?t-o==0?n.length-e.length:t-o:-1:null!==o?1:n<e?-1:1}},gw=function(n,e){return n===e?0:n<e?-1:1},Xd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Wl)(e))},Df=function(n){if("object"!=typeof n||null===n)return(0,P.Wl)(n);const e=[];for(const o in n)e.push(o);e.sort();let t="{";for(let o=0;o<e.length;o++)0!==o&&(t+=","),t+=(0,P.Wl)(e[o]),t+=":",t+=Df(n[e[o]]);return t+="}",t},ng=function(n,e){const t=n.length;if(t<=e)return[n];const o=[];for(let l=0;l<t;l+=e)o.push(n.substring(l,l+e>t?t:l+e));return o};function Vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const oI=function(n){(0,P.hu)(!Ba(n),"Invalid JSON number");const o=1023;let l,f,_,D,T;0===n?(f=0,_=0,l=1/n==-1/0?1:0):(l=n<0,(n=Math.abs(n))>=Math.pow(2,1-o)?(D=Math.min(Math.floor(Math.log(n)/Math.LN2),o),f=D+o,_=Math.round(n*Math.pow(2,52-D)-Math.pow(2,52))):(f=0,_=Math.round(n/Math.pow(2,-1074))));const R=[];for(T=52;T;T-=1)R.push(_%2?1:0),_=Math.floor(_/2);for(T=11;T;T-=1)R.push(f%2?1:0),f=Math.floor(f/2);R.push(l?1:0),R.reverse();const V=R.join("");let B="";for(T=0;T<64;T+=8){let J=parseInt(V.substr(T,8),2).toString(16);1===J.length&&(J="0"+J),B+=J}return B.toLowerCase()},O_=new RegExp("^-?(0*)\\d{1,10}$"),x_=function(n){if(O_.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ja=function(n){try{n()}catch(e){setTimeout(()=>{throw Ur("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},eh=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class sg{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(o=>this.appCheck=o)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,o):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){Ur(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wf{constructor(e,t,o){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(tr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,o):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ur(e)}}let zs=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const uu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Tf="websocket",B_="long_polling";class Sf{constructor(e,t,o,l,f=!1,_="",D=!1,T=!1){this.secure=t,this.namespace=o,this.webSocketOnly=l,this.nodeAdmin=f,this.persistenceKey=_,this.includeNamespaceInQueryParams=D,this.isUsingEmulator=T,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=au.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&au.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function lg(n,e,t){let o;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===Tf)o=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==B_)throw new Error("Unknown connection type: "+e);o=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function lI(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const l=[];return Vn(t,(f,_)=>{l.push(f+"="+_)}),o+l.join("&")}class mw{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const ug={},Sc={};function cg(n){const e=n.toString();return ug[e]||(ug[e]=new mw),ug[e]}class nh{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<o.length;++l)o[l]&&ja(()=>{this.onMessage_(o[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $a{constructor(e,t,o,l,f,_,D){this.connId=e,this.repoInfo=t,this.applicationId=o,this.appCheckToken=l,this.authToken=f,this.transportSessionId=_,this.lastSessionId=D,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jd(e),this.stats_=cg(t),this.urlFn=T=>(this.appCheckToken&&(T.ac=this.appCheckToken),lg(t,B_,T))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mg((...f)=>{const[_,D,T,R,V]=f;if(this.incrementIncomingBytes_(f),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===_)this.id=D,this.password=T;else{if("close"!==_)throw new Error("Unrecognized command received: "+_);D?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(D,()=>{this.onClosed_()})):this.onClosed_()}},(...f)=>{const[_,D]=f;this.incrementIncomingBytes_(f),this.myPacketOrderer.handleResponse(_,D)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&uu.test(location.hostname)&&(o.r="f");const l=this.urlFn(o);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$a.forceAllow_=!0}static forceDisallow(){$a.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!$a.forceAllow_&&($a.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const o=(0,P.h$)(t),l=ng(o,1840);for(let f=0;f<l.length;f++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[f]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=e,o.pw=t,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class mg{constructor(e,t,o,l){if(this.onDisconnect=o,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Nn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=mg.createIFrame_();let f="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(f='<script>document.domain="'+document.domain+'";<\/script>');const _="<html><body>"+f+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(_),this.myIFrame.doc.close()}catch(D){tr("frame writing exception"),D.stack&&tr(D.stack),tr(D)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||tr("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),o="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const _=this.pendingSegs.shift();o=o+"&seg"+l+"="+_.seg+"&ts"+l+"="+_.ts+"&d"+l+"="+_.d,l++}return t+=o,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,o){this.pendingSegs.push({seg:e,ts:t,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const o=()=>{this.outstandingRequests.delete(t),this.newRequest_()},l=setTimeout(o,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(l),o()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const l=o.readyState;(!l||"loaded"===l||"complete"===l)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),t())},o.onerror=()=>{tr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}let Af=null;typeof MozWebSocket<"u"?Af=MozWebSocket:typeof WebSocket<"u"&&(Af=WebSocket);let Rc=(()=>{class n{constructor(t,o,l,f,_,D,T){this.connId=t,this.applicationId=l,this.appCheckToken=f,this.authToken=_,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jd(this.connId),this.stats_=cg(o),this.connURL=n.connectionURL_(o,D,T,f,l),this.nodeAdmin=o.nodeAdmin}static connectionURL_(t,o,l,f,_){const D={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&uu.test(location.hostname)&&(D.r="f"),o&&(D.s=o),l&&(D.ls=l),f&&(D.ac=f),_&&(D.p=_),lg(t,Tf,D)}open(t,o){this.onDisconnect=o,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,au.set("previous_websocket_failure",!0);try{let l;if((0,P.Yr)()){l={headers:{"User-Agent":`Firebase/5/${Xp}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const _=process.env,D=0===this.connURL.indexOf("wss://")?_.HTTPS_PROXY||_.https_proxy:_.HTTP_PROXY||_.http_proxy;D&&(l.proxy={origin:D})}this.mySock=new Af(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const f=l.message||l.data;return f&&this.log_(f),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const f=l.message||l.data;f&&this.log_(f),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const l=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);l&&l.length>1&&parseFloat(l[1])<4.4&&(t=!0)}return!t&&null!==Af&&!n.forceDisallow_}static previouslyFailed(){return au.isInMemoryStorage||!0===au.get("previous_websocket_failure")}markConnectionHealthy(){au.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const l=(0,P.cI)(o);this.onMessage(l)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const o=Number(t);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const o=t.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const l=this.extractFrameCount_(o);null!==l&&this.appendFrame_(l)}}send(t){this.resetKeepAlive();const o=(0,P.Wl)(t);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const l=ng(o,16384);l.length>1&&this.sendString_(String(l.length));for(let f=0;f<l.length;f++)this.sendString_(l[f])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),gI=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$a,Rc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const o=Rc&&Rc.isAvailable();let l=o&&!Rc.previouslyFailed();if(t.webSocketOnly&&(o||Ur("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[Rc];else{const f=this.transports_=[];for(const _ of n.ALL_TRANSPORTS)_&&_.isAvailable()&&f.push(_);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class X_{constructor(e,t,o,l,f,_,D,T,R,V){this.id=e,this.repoInfo_=t,this.applicationId_=o,this.appCheckToken_=l,this.authToken_=f,this.onMessage_=_,this.onReady_=D,this.onDisconnect_=T,this.onKill_=R,this.lastSessionId=V,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jd("c:"+this.id+":"),this.transportManager_=new gI(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,o)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=eh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xd("t",e),o=Xd("d",e);if("c"===t)this.onSecondaryControl_(o);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xd("t",e),o=Xd("d",e);"c"===t?this.onControl_(o):"d"===t&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xd("t",e);if("d"in e){const o=e.d;if("h"===t){const l=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(o):"r"===t?this.onReset_(o):"e"===t?tg("Server Error: "+o):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tg("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,o=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==o&&Ur("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,o),eh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(au.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ey{put(e,t,o,l){}merge(e,t,o,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,o){}onDisconnectMerge(e,t,o){}onDisconnectCancel(e,t){}reportStats(e){}}class yg{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let l=0;l<o.length;l++)o[l].callback.apply(o[l].context,t)}}on(e,t,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:o});const l=this.getInitialEvent(e);l&&t.apply(o,l)}off(e,t,o){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let f=0;f<l.length;f++)if(l[f].callback===t&&(!o||o===l[f].context))return void l.splice(f,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Rf extends yg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Rf}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Be{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let o=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[o]=this.pieces_[l],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function kt(){return new Be("")}function wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ho(n){return n.pieces_.length-n.pieceNum_}function Xt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Be(n.pieces_,e)}function vg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ih(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Eg(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Be(e,0)}function _n(n,e){const t=[];for(let o=n.pieceNum_;o<n.pieces_.length;o++)t.push(n.pieces_[o]);if(e instanceof Be)for(let o=e.pieceNum_;o<e.pieces_.length;o++)t.push(e.pieces_[o]);else{const o=e.split("/");for(let l=0;l<o.length;l++)o[l].length>0&&t.push(o[l])}return new Be(t,0)}function Tt(n){return n.pieceNum_>=n.pieces_.length}function ii(n,e){const t=wt(n),o=wt(e);if(null===t)return e;if(t===o)return ii(Xt(n),Xt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function iy(n,e){const t=ih(n,0),o=ih(e,0);for(let l=0;l<t.length&&l<o.length;l++){const f=Ha(t[l],o[l]);if(0!==f)return f}return t.length===o.length?0:t.length<o.length?-1:1}function Pf(n,e){if(Ho(n)!==Ho(e))return!1;for(let t=n.pieceNum_,o=e.pieceNum_;t<=n.pieces_.length;t++,o++)if(n.pieces_[t]!==e.pieces_[o])return!1;return!0}function nr(n,e){let t=n.pieceNum_,o=e.pieceNum_;if(Ho(n)>Ho(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[o])return!1;++t,++o}return!0}class yI{constructor(e,t){this.errorPrefix_=t,this.parts_=ih(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,P.ug)(this.parts_[o]);sy(this)}}function sy(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pc(n))}function Pc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class oy extends yg{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new oy}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Nf=1e3;let sh,Ga=(()=>{class n extends ey{constructor(t,o,l,f,_,D,T,R){if(super(),this.repoInfo_=t,this.applicationId_=o,this.onDataUpdate_=l,this.onConnectStatus_=f,this.onServerInfoUpdate_=_,this.authTokenProvider_=D,this.appCheckTokenProvider_=T,this.authOverride_=R,this.id=n.nextPersistentConnectionId_++,this.log_=Jd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,R&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oy.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Rf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,o,l){const f=++this.requestNumber_,_={r:f,a:t,b:o};this.log_((0,P.Wl)(_)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(_),l&&(this.requestCBHash_[f]=l)}get(t){this.initConnection_();const o=new P.BH,f={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:D=>{const T=D.d;"ok"===D.s?o.resolve(T):o.reject(T)}};return this.outstandingGets_.push(f),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),o.promise}listen(t,o,l,f){this.initConnection_();const _=t._queryIdentifier,D=t._path.toString();this.log_("Listen called for "+D+" "+_),this.listens.has(D)||this.listens.set(D,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(D).has(_),"listen() called twice for same path/queryId.");const T={onComplete:f,hashFn:o,query:t,tag:l};this.listens.get(D).set(_,T),this.connected_&&this.sendListen_(T)}sendGet_(t){const o=this.outstandingGets_[t];this.sendRequest("g",o.request,l=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(l)})}sendListen_(t){const o=t.query,l=o._path.toString(),f=o._queryIdentifier;this.log_("Listen on "+l+" for "+f);const _={p:l};t.tag&&(_.q=o._queryObject,_.t=t.tag),_.h=t.hashFn(),this.sendRequest("q",_,T=>{const R=T.d,V=T.s;n.warnOnListenWarnings_(R,o),(this.listens.get(l)&&this.listens.get(l).get(f))===t&&(this.log_("listen response",T),"ok"!==V&&this.removeListen_(l,f),t.onComplete&&t.onComplete(V,R))})}static warnOnListenWarnings_(t,o){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const l=(0,P.DV)(t,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const f='".indexOn": "'+o._queryParams.getIndex().toString()+'"',_=o._path.toString();Ur(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${f} at ${_} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,o=(0,P.w9)(t)?"auth":"gauth",l={cred:t};null===this.authOverride_?l.noauth=!0:"object"==typeof this.authOverride_&&(l.authvar=this.authOverride_),this.sendRequest(o,l,f=>{const _=f.s,D=f.d||"error";this.authToken_===t&&("ok"===_?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(_,D))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const o=t.s,l=t.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,l)})}unlisten(t,o){const l=t._path.toString(),f=t._queryIdentifier;this.log_("Unlisten called for "+l+" "+f),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,f)&&this.connected_&&this.sendUnlisten_(l,f,t._queryObject,o)}sendUnlisten_(t,o,l,f){this.log_("Unlisten on "+t+" for "+o);const _={p:t};f&&(_.q=l,_.t=f),this.sendRequest("n",_)}onDisconnectPut(t,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,o,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:o,onComplete:l})}onDisconnectMerge(t,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,o,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:o,onComplete:l})}onDisconnectCancel(t,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(t,o,l,f){const _={p:o,d:l};this.log_("onDisconnect "+t,_),this.sendRequest(t,_,D=>{f&&setTimeout(()=>{f(D.s,D.d)},Math.floor(0))})}put(t,o,l,f){this.putInternal("p",t,o,l,f)}merge(t,o,l,f){this.putInternal("m",t,o,l,f)}putInternal(t,o,l,f,_){this.initConnection_();const D={p:o,d:l};void 0!==_&&(D.h=_),this.outstandingPuts_.push({action:t,request:D,onComplete:f}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(t){const o=this.outstandingPuts_[t].action,l=this.outstandingPuts_[t].request,f=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(o,l,_=>{this.log_(o+" response",_),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),f&&f(_.s,_.d)})}reportStats(t){if(this.connected_){const o={c:t};this.log_("reportStats",o),this.sendRequest("s",o,l=>{"ok"!==l.s&&this.log_("reportStats","Error sending stats: "+l.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Wl)(t));const o=t.r,l=this.requestCBHash_[o];l&&(delete this.requestCBHash_[o],l(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,o){this.log_("handleServerMessage",t,o),"d"===t?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===t?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===t?this.onListenRevoked_(o.p,o.q):"ac"===t?this.onAuthRevoked_(o.s,o.d):"apc"===t?this.onAppCheckRevoked_(o.s,o.d):"sd"===t?this.onSecurityDebugPacket_(o):tg("Unrecognized action received from server: "+(0,P.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-t);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,xi.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const o=t.onDataMessage_.bind(t),l=t.onReady_.bind(t),f=t.onRealtimeDisconnect_.bind(t),_=t.id+":"+n.nextConnectionId_++,D=t.lastSessionId;let T=!1,R=null;const V=function(){R?R.close():(T=!0,f())};t.realtime_={close:V,sendRequest:function(pe){(0,P.hu)(R,"sendRequest call when we're not connected not allowed."),R.sendRequest(pe)}};const J=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[pe,Ae]=yield Promise.all([t.authTokenProvider_.getToken(J),t.appCheckTokenProvider_.getToken(J)]);T?tr("getToken() completed but was canceled"):(tr("getToken() completed. Creating connection."),t.authToken_=pe&&pe.accessToken,t.appCheckToken_=Ae&&Ae.token,R=new X_(_,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,o,l,f,Xe=>{Ur(Xe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},D))}catch(pe){t.log_("Failed to get token: "+pe),T||(t.repoInfo_.nodeAdmin&&Ur(pe),V())}}})()}interrupt(t){tr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){tr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Nf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const o=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const o=this.outstandingPuts_[t];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,o){let l;l=o?o.map(_=>Df(_)).join("$"):"default";const f=this.removeListen_(t,l);f&&f.onComplete&&f.onComplete("permission_denied")}removeListen_(t,o){const l=new Be(t).toString();let f;if(this.listens.has(l)){const _=this.listens.get(l);f=_.get(o),_.delete(o),0===_.size&&this.listens.delete(l)}else f=void 0;return f}onAuthRevoked_(t,o){tr("Auth token revoked: "+t+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,o){tr("App check token revoked: "+t+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const o of t.values())this.sendListen_(o);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let o="js";(0,P.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+o+"."+Xp.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Rf.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ct{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ct(e,t)}}class Of{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const o=new Ct(Uo,e),l=new Ct(Uo,t);return 0!==this.compare(o,l)}minPost(){return Ct.MIN}}class ly extends Of{static get __EMPTY_NODE(){return sh}static set __EMPTY_NODE(e){sh=e}compare(e,t){return Ha(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ct.MIN}maxPost(){return new Ct(Ws,sh)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ct(e,sh)}toString(){return".key"}}const Zs=new ly;class kf{constructor(e,t,o,l,f=null){this.isReverse_=l,this.resultGenerator_=f,this.nodeStack_=[];let _=1;for(;!e.isEmpty();)if(_=t?o(e.key,t):1,l&&(_*=-1),_<0)e=this.isReverse_?e.left:e.right;else{if(0===_){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Ff,Es=(()=>{class n{constructor(t,o,l,f,_){this.key=t,this.value=o,this.color=l??n.RED,this.left=f??Br.EMPTY_NODE,this.right=_??Br.EMPTY_NODE}copy(t,o,l,f,_){return new n(t??this.key,o??this.value,l??this.color,f??this.left,_??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,o,l){let f=this;const _=l(t,f.key);return f=_<0?f.copy(null,null,null,f.left.insert(t,o,l),null):0===_?f.copy(null,o,null,null,null):f.copy(null,null,null,null,f.right.insert(t,o,l)),f.fixUp_()}removeMin_(){if(this.left.isEmpty())return Br.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,o){let l,f;if(l=this,o(t,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(t,o),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),0===o(t,l.key)){if(l.right.isEmpty())return Br.EMPTY_NODE;f=l.right.min_(),l=l.copy(f.key,f.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(t,o))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,o)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Br{constructor(e,t=Br.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Br(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Es.BLACK,null,null))}remove(e){return new Br(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Es.BLACK,null,null))}get(e){let t,o=this.root_;for(;!o.isEmpty();){if(t=this.comparator_(e,o.key),0===t)return o.value;t<0?o=o.left:t>0&&(o=o.right)}return null}getPredecessorKey(e){let t,o=this.root_,l=null;for(;!o.isEmpty();){if(t=this.comparator_(e,o.key),0===t){if(o.left.isEmpty())return l?l.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}t<0?o=o.left:t>0&&(l=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kf(this.root_,null,this.comparator_,!0,e)}}function DI(n,e){return Ha(n.name,e.name)}function xf(n,e){return Ha(n,e)}Br.EMPTY_NODE=new class II{copy(e,t,o,l,f){return this}insert(e,t,o){return new Es(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const CI=function(n){return"number"==typeof n?"number:"+oI(n):"string:"+n},Lf=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===Ff||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===Ff||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let uy,cu,cy,oh=(()=>{class n{constructor(t,o=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=o,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Lf(this.priorityNode_)}static set __childrenNodeConstructor(t){uy=t}static get __childrenNodeConstructor(){return uy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Tt(t)?this:".priority"===wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,o){return null}updateImmediateChild(t,o){return".priority"===t?this.updatePriority(o):o.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,o).updatePriority(this.priorityNode_)}updateChild(t,o){const l=wt(t);return null===l?o:o.isEmpty()&&".priority"!==l?this:((0,P.hu)(".priority"!==l||1===Ho(t),".priority must be the last token in a path"),this.updateImmediateChild(l,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xt(t),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,o){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+CI(this.priorityNode_.val())+":");const o=typeof this.value_;t+=o+":",t+="number"===o?oI(this.value_):this.value_,this.lazyHash_=R_(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const o=typeof t.value_,l=typeof this.value_,f=n.VALUE_TYPE_ORDER.indexOf(o),_=n.VALUE_TYPE_ORDER.indexOf(l);return(0,P.hu)(f>=0,"Unknown leaf type: "+o),(0,P.hu)(_>=0,"Unknown leaf type: "+l),f===_?"object"===l?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:_-f}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const o=t;return this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const sn=new class bI extends Of{compare(e,t){const o=e.node.getPriority(),l=t.node.getPriority(),f=o.compareTo(l);return 0===f?Ha(e.name,t.name):f}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ct.MIN}maxPost(){return new Ct(Ws,new oh("[PRIORITY-POST]",cy))}makePost(e,t){const o=cu(e);return new Ct(t,new oh("[PRIORITY-POST]",o))}toString(){return".priority"}},Vf=Math.log(2);class Oc{constructor(e){this.count=parseInt(Math.log(e+1)/Vf,10),this.current_=this.count-1;const l=(f=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kc=function(n,e,t,o){n.sort(e);const l=function(T,R){const V=R-T;let B,J;if(0===V)return null;if(1===V)return B=n[T],J=t?t(B):B,new Es(J,B.node,Es.BLACK,null,null);{const pe=parseInt(V/2,10)+T,Ae=l(T,pe),Xe=l(pe+1,R);return B=n[pe],J=t?t(B):B,new Es(J,B.node,Es.BLACK,Ae,Xe)}},D=function(T){let R=null,V=null,B=n.length;const J=function(Ae,Xe){const at=B-Ae,Vt=B;B-=Ae;const Ht=l(at+1,Vt),jt=n[at],bt=t?t(jt):jt;pe(new Es(bt,jt.node,Xe,null,Ht))},pe=function(Ae){R?(R.left=Ae,R=Ae):(V=Ae,R=Ae)};for(let Ae=0;Ae<T.count;++Ae){const Xe=T.nextBitIsOne(),at=Math.pow(2,T.count-(Ae+1));Xe?J(at,Es.BLACK):(J(at,Es.BLACK),J(at,Es.RED))}return V}(new Oc(n.length));return new Br(o||e,D)};let du;const Wa={};class Bi{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(Wa&&sn,"ChildrenNode.ts has not been loaded"),du=du||new Bi({".priority":Wa},{".priority":sn}),du}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Br?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Zs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let l=!1;const f=t.getIterator(Ct.Wrap);let D,_=f.getNext();for(;_;)l=l||e.isDefinedOn(_.node),o.push(_),_=f.getNext();D=l?kc(o,e.getCompare()):Wa;const T=e.toString(),R=Object.assign({},this.indexSet_);R[T]=e;const V=Object.assign({},this.indexes_);return V[T]=D,new Bi(V,R)}addToIndexes(e,t){const o=(0,P.UI)(this.indexes_,(l,f)=>{const _=(0,P.DV)(this.indexSet_,f);if((0,P.hu)(_,"Missing index implementation for "+f),l===Wa){if(_.isDefinedOn(e.node)){const D=[],T=t.getIterator(Ct.Wrap);let R=T.getNext();for(;R;)R.name!==e.name&&D.push(R),R=T.getNext();return D.push(e),kc(D,_.getCompare())}return Wa}{const D=t.get(e.name);let T=l;return D&&(T=T.remove(new Ct(e.name,D))),T.insert(e,e.node)}});return new Bi(o,this.indexSet_)}removeFromIndexes(e,t){const o=(0,P.UI)(this.indexes_,l=>{if(l===Wa)return l;{const f=t.get(e.name);return f?l.remove(new Ct(e.name,f)):l}});return new Bi(o,this.indexSet_)}}let xc,vt=(()=>{class n{constructor(t,o,l){this.children_=t,this.priorityNode_=o,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&Lf(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xc||(xc=new n(new Br(xf),null,Bi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xc}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const o=this.children_.get(t);return null===o?xc:o}}getChild(t){const o=wt(t);return null===o?this:this.getImmediateChild(o).getChild(Xt(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,o){if((0,P.hu)(o,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(o);{const l=new Ct(t,o);let f,_;o.isEmpty()?(f=this.children_.remove(t),_=this.indexMap_.removeFromIndexes(l,this.children_)):(f=this.children_.insert(t,o),_=this.indexMap_.addToIndexes(l,this.children_));const D=f.isEmpty()?xc:this.priorityNode_;return new n(f,D,_)}}updateChild(t,o){const l=wt(t);if(null===l)return o;{(0,P.hu)(".priority"!==wt(t)||1===Ho(t),".priority must be the last token in a path");const f=this.getImmediateChild(l).updateChild(Xt(t),o);return this.updateImmediateChild(l,f)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const o={};let l=0,f=0,_=!0;if(this.forEachChild(sn,(D,T)=>{o[D]=T.val(t),l++,_&&n.INTEGER_REGEXP_.test(D)?f=Math.max(f,Number(D)):_=!1}),!t&&_&&f<2*l){const D=[];for(const T in o)D[T]=o[T];return D}return t&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+CI(this.getPriority().val())+":"),this.forEachChild(sn,(o,l)=>{const f=l.hash();""!==f&&(t+=":"+o+":"+f)}),this.lazyHash_=""===t?"":R_(t)}return this.lazyHash_}getPredecessorChildName(t,o,l){const f=this.resolveIndex_(l);if(f){const _=f.getPredecessorKey(new Ct(t,o));return _?_.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const o=this.resolveIndex_(t);if(o){const l=o.minKey();return l&&l.name}return this.children_.minKey()}getFirstChild(t){const o=this.getFirstChildName(t);return o?new Ct(o,this.children_.get(o)):null}getLastChildName(t){const o=this.resolveIndex_(t);if(o){const l=o.maxKey();return l&&l.name}return this.children_.maxKey()}getLastChild(t){const o=this.getLastChildName(t);return o?new Ct(o,this.children_.get(o)):null}forEachChild(t,o){const l=this.resolveIndex_(t);return l?l.inorderTraversal(f=>o(f.name,f.node)):this.children_.inorderTraversal(o)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,o){const l=this.resolveIndex_(o);if(l)return l.getIteratorFrom(t,f=>f);{const f=this.children_.getIteratorFrom(t.name,Ct.Wrap);let _=f.peek();for(;null!=_&&o.compare(_,t)<0;)f.getNext(),_=f.peek();return f}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,o){const l=this.resolveIndex_(o);if(l)return l.getReverseIteratorFrom(t,f=>f);{const f=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap);let _=f.peek();for(;null!=_&&o.compare(_,t)>0;)f.getNext(),_=f.peek();return f}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===hu?-1:0}withIndex(t){if(t===Zs||this.indexMap_.hasIndex(t))return this;{const o=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,o)}}isIndexed(t){return t===Zs||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const o=t;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const l=this.getIterator(sn),f=o.getIterator(sn);let _=l.getNext(),D=f.getNext();for(;_&&D;){if(_.name!==D.name||!_.node.equals(D.node))return!1;_=l.getNext(),D=f.getNext()}return null===_&&null===D}return!1}return!1}}resolveIndex_(t){return t===Zs?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const hu=new class bg extends vt{constructor(){super(new Br(xf),vt.EMPTY_NODE,Bi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return vt.EMPTY_NODE}isEmpty(){return!1}};function cn(n,e=null){if(null===n)return vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new oh(n,cn(e));if(n instanceof Array){let t=vt.EMPTY_NODE;return Vn(n,(o,l)=>{if((0,P.r3)(n,o)&&"."!==o.substring(0,1)){const f=cn(l);(f.isLeafNode()||!f.isEmpty())&&(t=t.updateImmediateChild(o,f))}}),t.updatePriority(cn(e))}{const t=[];let o=!1;if(Vn(n,(_,D)=>{if("."!==_.substring(0,1)){const T=cn(D);T.isEmpty()||(o=o||!T.getPriority().isEmpty(),t.push(new Ct(_,T)))}}),0===t.length)return vt.EMPTY_NODE;const f=kc(t,DI,_=>_.name,xf);if(o){const _=kc(t,sn.getCompare());return new vt(f,cn(e),new Bi({".priority":_},{".priority":sn}))}return new vt(f,cn(e),Bi.Default)}}Object.defineProperties(Ct,{MIN:{value:new Ct(Uo,vt.EMPTY_NODE)},MAX:{value:new Ct(Ws,hu)}}),ly.__EMPTY_NODE=vt.EMPTY_NODE,oh.__childrenNodeConstructor=vt,function wg(n){Ff=n}(hu),function dy(n){cy=n}(hu),function wI(n){cu=n}(cn);class Tg extends Of{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Tt(e)&&".priority"!==wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const o=this.extractChild(e.node),l=this.extractChild(t.node),f=o.compareTo(l);return 0===f?Ha(e.name,t.name):f}makePost(e,t){const o=cn(e),l=vt.EMPTY_NODE.updateChild(this.indexPath_,o);return new Ct(t,l)}maxPost(){const e=vt.EMPTY_NODE.updateChild(this.indexPath_,hu);return new Ct(Ws,e)}toString(){return ih(this.indexPath_,0).join("/")}}const Uf=new class TI extends Of{compare(e,t){const o=e.node.compareTo(t.node);return 0===o?Ha(e.name,t.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ct.MIN}maxPost(){return Ct.MAX}makePost(e,t){const o=cn(e);return new Ct(t,o)}toString(){return".value"}};function fy(n){return{type:"value",snapshotNode:n}}function fu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Fc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ah(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Hr{constructor(e){this.index_=e}updateChild(e,t,o,l,f,_){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const D=e.getImmediateChild(t);return D.getChild(l).equals(o.getChild(l))&&D.isEmpty()===o.isEmpty()||(null!=_&&(o.isEmpty()?e.hasChild(t)?_.trackChildChange(Fc(t,D)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):D.isEmpty()?_.trackChildChange(fu(t,o)):_.trackChildChange(ah(t,o,D))),e.isLeafNode()&&o.isEmpty())?e:e.updateImmediateChild(t,o).withIndex(this.index_)}updateFullNode(e,t,o){return null!=o&&(e.isLeafNode()||e.forEachChild(sn,(l,f)=>{t.hasChild(l)||o.trackChildChange(Fc(l,f))}),t.isLeafNode()||t.forEachChild(sn,(l,f)=>{if(e.hasChild(l)){const _=e.getImmediateChild(l);_.equals(f)||o.trackChildChange(ah(l,f,_))}else o.trackChildChange(fu(l,f))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Lc{constructor(e){this.indexedFilter_=new Hr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Lc.getStartPost_(e),this.endPost_=Lc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,o=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&o}updateChild(e,t,o,l,f,_){return this.matches(new Ct(t,o))||(o=vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,o,l,f,_)}updateFullNode(e,t,o){t.isLeafNode()&&(t=vt.EMPTY_NODE);let l=t.withIndex(this.index_);l=l.updatePriority(vt.EMPTY_NODE);const f=this;return t.forEachChild(sn,(_,D)=>{f.matches(new Ct(_,D))||(l=l.updateImmediateChild(_,vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,o)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class AI{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=t=>{const o=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new Lc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,o,l,f,_){return this.rangedFilter_.matches(new Ct(t,o))||(o=vt.EMPTY_NODE),e.getImmediateChild(t).equals(o)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,o,l,f,_):this.fullLimitUpdateChild_(e,t,o,f,_)}updateFullNode(e,t,o){let l;if(t.isLeafNode()||t.isEmpty())l=vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let f;l=vt.EMPTY_NODE.withIndex(this.index_),f=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let _=0;for(;f.hasNext()&&_<this.limit_;){const D=f.getNext();if(this.withinDirectionalStart(D)){if(!this.withinDirectionalEnd(D))break;l=l.updateImmediateChild(D.name,D.node),_++}}}else{let f;l=t.withIndex(this.index_),l=l.updatePriority(vt.EMPTY_NODE),f=this.reverse_?l.getReverseIterator(this.index_):l.getIterator(this.index_);let _=0;for(;f.hasNext();){const D=f.getNext();_<this.limit_&&this.withinDirectionalStart(D)&&this.withinDirectionalEnd(D)?_++:l=l.updateImmediateChild(D.name,vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,o)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,o,l,f){let _;if(this.reverse_){const B=this.index_.getCompare();_=(J,pe)=>B(pe,J)}else _=this.index_.getCompare();const D=e;(0,P.hu)(D.numChildren()===this.limit_,"");const T=new Ct(t,o),R=this.reverse_?D.getFirstChild(this.index_):D.getLastChild(this.index_),V=this.rangedFilter_.matches(T);if(D.hasChild(t)){const B=D.getImmediateChild(t);let J=l.getChildAfterChild(this.index_,R,this.reverse_);for(;null!=J&&(J.name===t||D.hasChild(J.name));)J=l.getChildAfterChild(this.index_,J,this.reverse_);const pe=null==J?1:_(J,T);if(V&&!o.isEmpty()&&pe>=0)return f?.trackChildChange(ah(t,o,B)),D.updateImmediateChild(t,o);{f?.trackChildChange(Fc(t,B));const Xe=D.updateImmediateChild(t,vt.EMPTY_NODE);return null!=J&&this.rangedFilter_.matches(J)?(f?.trackChildChange(fu(J.name,J.node)),Xe.updateImmediateChild(J.name,J.node)):Xe}}return o.isEmpty()?e:V&&_(R,T)>=0?(null!=f&&(f.trackChildChange(Fc(R.name,R.node)),f.trackChildChange(fu(t,o))),D.updateImmediateChild(t,o).updateImmediateChild(R.name,vt.EMPTY_NODE)):e}}class Sg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Uo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ws}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sn}copy(){const e=new Sg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Mg(n,e,t){const o=n.copy();return o.startSet_=!0,void 0===e&&(e=null),o.indexStartValue_=e,null!=t?(o.startNameSet_=!0,o.indexStartName_=t):(o.startNameSet_=!1,o.indexStartName_=""),o}function Bf(n,e,t){const o=n.copy();return o.endSet_=!0,void 0===e&&(e=null),o.indexEndValue_=e,void 0!==t?(o.endNameSet_=!0,o.indexEndName_=t):(o.endNameSet_=!1,o.indexEndName_=""),o}function Hf(n,e){const t=n.copy();return t.index_=e,t}function jf(n){const e={};if(n.isDefault())return e;let t;if(n.index_===sn?t="$priority":n.index_===Uf?t="$value":n.index_===Zs?t="$key":((0,P.hu)(n.index_ instanceof Tg,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Wl)(t),n.startSet_){const o=n.startAfterSet_?"startAfter":"startAt";e[o]=(0,P.Wl)(n.indexStartValue_),n.startNameSet_&&(e[o]+=","+(0,P.Wl)(n.indexStartName_))}if(n.endSet_){const o=n.endBeforeSet_?"endBefore":"endAt";e[o]=(0,P.Wl)(n.indexEndValue_),n.endNameSet_&&(e[o]+=","+(0,P.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function gy(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==sn&&(e.i=n.index_.toString()),e}class $f extends ey{constructor(e,t,o,l){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.log_=Jd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,o,l){const f=e._path.toString();this.log_("Listen called for "+f+" "+e._queryIdentifier);const _=$f.getListenId_(e,o),D={};this.listens_[_]=D;const T=jf(e._queryParams);this.restRequest_(f+".json",T,(R,V)=>{let B=V;if(404===R&&(B=null,R=null),null===R&&this.onDataUpdate_(f,B,!1,o),(0,P.DV)(this.listens_,_)===D){let J;J=R?401===R?"permission_denied":"rest_error:"+R:"ok",l(J,null)}})}unlisten(e,t){const o=$f.getListenId_(e,t);delete this.listens_[o]}get(e){const t=jf(e._queryParams),o=e._path.toString(),l=new P.BH;return this.restRequest_(o+".json",t,(f,_)=>{let D=_;404===f&&(D=null,f=null),null===f?(this.onDataUpdate_(o,D,!1,null),l.resolve(D)):l.reject(new Error(D))}),l.promise}refreshAuthToken(e){}restRequest_(e,t={},o){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,f])=>{l&&l.accessToken&&(t.auth=l.accessToken),f&&f.token&&(t.ac=f.token);const _=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+_);const D=new XMLHttpRequest;D.onreadystatechange=()=>{if(o&&4===D.readyState){this.log_("REST Response for "+_+" received. status:",D.status,"response:",D.responseText);let T=null;if(D.status>=200&&D.status<300){try{T=(0,P.cI)(D.responseText)}catch{Ur("Failed to parse JSON response for "+_+": "+D.responseText)}o(null,T)}else 401!==D.status&&404!==D.status&&Ur("Got unsuccessful REST response for "+_+" Status: "+D.status),o(D.status);o=null}},D.open("GET",_,!0),D.send()})}}class NI{constructor(){this.rootNode_=vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Gf(){return{value:null,children:new Map}}function Vc(n,e,t){if(Tt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const o=wt(e);n.children.has(o)||n.children.set(o,Gf()),Vc(n.children.get(o),e=Xt(e),t)}}function Hi(n,e){if(Tt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(sn,(o,l)=>{Vc(n,new Be(o),l)}),Hi(n,e)}}if(n.children.size>0){const t=wt(e);return e=Xt(e),n.children.has(t)&&Hi(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function lh(n,e,t){null!==n.value?t(e,n.value):function OI(n,e){n.children.forEach((t,o)=>{e(o,t)})}(n,(o,l)=>{lh(l,new Be(e.toString()+"/"+o),t)})}class kI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Vn(this.last_,(o,l)=>{t[o]=t[o]-l}),this.last_=e,t}}class LI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kI(e);const o=1e4+2e4*Math.random();eh(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),t={};let o=!1;Vn(e,(l,f)=>{f>0&&(0,P.r3)(this.statsToReport_,l)&&(t[l]=f,o=!0)}),o&&this.server_.reportStats(t),eh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var si=(()=>{return(n=si||(si={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",si;var n})();function Uc(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Bc{constructor(e,t,o){this.path=e,this.affectedTree=t,this.revert=o,this.type=si.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Tt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Be(e));return new Bc(kt(),t,this.revert)}}return(0,P.hu)(wt(this.path)===e,"operationForChild called for unrelated child."),new Bc(Xt(this.path),this.affectedTree,this.revert)}}class za{constructor(e,t){this.source=e,this.path=t,this.type=si.LISTEN_COMPLETE}operationForChild(e){return Tt(this.path)?new za(this.source,kt()):new za(this.source,Xt(this.path))}}class Hc{constructor(e,t,o){this.source=e,this.path=t,this.snap=o,this.type=si.OVERWRITE}operationForChild(e){return Tt(this.path)?new Hc(this.source,kt(),this.snap.getImmediateChild(e)):new Hc(this.source,Xt(this.path),this.snap)}}class Za{constructor(e,t,o){this.source=e,this.path=t,this.children=o,this.type=si.MERGE}operationForChild(e){if(Tt(this.path)){const t=this.children.subtree(new Be(e));return t.isEmpty()?null:t.value?new Hc(this.source,kt(),t.value):new Za(this.source,kt(),t)}return(0,P.hu)(wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Za(this.source,Xt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class pu{constructor(e,t,o){this.node_=e,this.fullyInitialized_=t,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tt(e))return this.isFullyInitialized()&&!this.filtered_;const t=wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class my{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jc(n,e,t,o,l,f){const _=o.filter(D=>D.type===t);_.sort((D,T)=>function Og(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const o=new Ct(e.childName,e.snapshotNode),l=new Ct(t.childName,t.snapshotNode);return n.index_.compare(o,l)}(n,D,T)),_.forEach(D=>{const T=function yy(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,D,f);l.forEach(R=>{R.respondsTo(D.type)&&e.push(R.createEvent(T,n.query_))})})}function ji(n,e){return{eventCache:n,serverCache:e}}function qa(n,e,t,o){return ji(new pu(e,t,o),n.serverCache)}function uh(n,e,t,o){return ji(n.eventCache,new pu(e,t,o))}function Ka(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function gu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Wf;class on{constructor(e,t=(()=>(Wf||(Wf=new Br(gw)),Wf))()){this.value=e,this.children=t}static fromObject(e){let t=new on(null);return Vn(e,(o,l)=>{t=t.set(new Be(o),l)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:kt(),value:this.value};if(Tt(e))return null;{const o=wt(e),l=this.children.get(o);if(null!==l){const f=l.findRootMostMatchingPathAndValue(Xt(e),t);return null!=f?{path:_n(new Be(o),f.path),value:f.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tt(e))return this;{const t=wt(e),o=this.children.get(t);return null!==o?o.subtree(Xt(e)):new on(null)}}set(e,t){if(Tt(e))return new on(t,this.children);{const o=wt(e),f=(this.children.get(o)||new on(null)).set(Xt(e),t),_=this.children.insert(o,f);return new on(this.value,_)}}remove(e){if(Tt(e))return this.children.isEmpty()?new on(null):new on(null,this.children);{const t=wt(e),o=this.children.get(t);if(o){const l=o.remove(Xt(e));let f;return f=l.isEmpty()?this.children.remove(t):this.children.insert(t,l),null===this.value&&f.isEmpty()?new on(null):new on(this.value,f)}return this}}get(e){if(Tt(e))return this.value;{const t=wt(e),o=this.children.get(t);return o?o.get(Xt(e)):null}}setTree(e,t){if(Tt(e))return t;{const o=wt(e),f=(this.children.get(o)||new on(null)).setTree(Xt(e),t);let _;return _=f.isEmpty()?this.children.remove(o):this.children.insert(o,f),new on(this.value,_)}}fold(e){return this.fold_(kt(),e)}fold_(e,t){const o={};return this.children.inorderTraversal((l,f)=>{o[l]=f.fold_(_n(e,l),t)}),t(e,this.value,o)}findOnPath(e,t){return this.findOnPath_(e,kt(),t)}findOnPath_(e,t,o){const l=!!this.value&&o(t,this.value);if(l)return l;if(Tt(e))return null;{const f=wt(e),_=this.children.get(f);return _?_.findOnPath_(Xt(e),_n(t,f),o):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,kt(),t)}foreachOnPath_(e,t,o){if(Tt(e))return this;{this.value&&o(t,this.value);const l=wt(e),f=this.children.get(l);return f?f.foreachOnPath_(Xt(e),_n(t,l),o):new on(null)}}foreach(e){this.foreach_(kt(),e)}foreach_(e,t){this.children.inorderTraversal((o,l)=>{l.foreach_(_n(e,o),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,o)=>{o.value&&e(t,o.value)})}}class Is{constructor(e){this.writeTree_=e}static empty(){return new Is(new on(null))}}function jo(n,e,t){if(Tt(e))return new Is(new on(t));{const o=n.writeTree_.findRootMostValueAndPath(e);if(null!=o){const l=o.path;let f=o.value;const _=ii(l,e);return f=f.updateChild(_,t),new Is(n.writeTree_.set(l,f))}{const l=new on(t),f=n.writeTree_.setTree(e,l);return new Is(f)}}}function kg(n,e,t){let o=n;return Vn(t,(l,f)=>{o=jo(o,_n(e,l),f)}),o}function VI(n,e){if(Tt(e))return Is.empty();{const t=n.writeTree_.setTree(e,new on(null));return new Is(t)}}function xg(n,e){return null!=mu(n,e)}function mu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ii(t.path,e)):null}function Ey(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(sn,(o,l)=>{e.push(new Ct(o,l))}):n.writeTree_.children.inorderTraversal((o,l)=>{null!=l.value&&e.push(new Ct(o,l.value))}),e}function Ya(n,e){if(Tt(e))return n;{const t=mu(n,e);return new Is(null!=t?new on(t):n.writeTree_.subtree(e))}}function Fg(n){return n.writeTree_.isEmpty()}function $c(n,e){return Iy(kt(),n.writeTree_,e)}function Iy(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let o=null;return e.children.inorderTraversal((l,f)=>{".priority"===l?((0,P.hu)(null!==f.value,"Priority writes must always be leaf nodes"),o=f.value):t=Iy(_n(n,l),f,t)}),!t.getChild(n).isEmpty()&&null!==o&&(t=t.updateChild(_n(n,".priority"),o)),t}}function ch(n,e){return Sy(e,n)}function HI(n,e){if(n.snap)return nr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&nr(_n(n.path,t),e))return!0;return!1}function $I(n){return n.visible}function Dy(n,e,t){let o=Is.empty();for(let l=0;l<n.length;++l){const f=n[l];if(e(f)){const _=f.path;let D;if(f.snap)nr(t,_)?(D=ii(t,_),o=jo(o,D,f.snap)):nr(_,t)&&(D=ii(_,t),o=jo(o,kt(),f.snap.getChild(D)));else{if(!f.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(nr(t,_))D=ii(t,_),o=kg(o,D,f.children);else if(nr(_,t))if(D=ii(_,t),Tt(D))o=kg(o,kt(),f.children);else{const T=(0,P.DV)(f.children,wt(D));if(T){const R=T.getChild(Xt(D));o=jo(o,kt(),R)}}}}}return o}function Cy(n,e,t,o,l){if(o||l){const f=Ya(n.visibleWrites,e);return!l&&Fg(f)?t:l||null!=t||xg(f,kt())?$c(Dy(n.allWrites,function(R){return(R.visible||l)&&(!o||!~o.indexOf(R.writeId))&&(nr(R.path,e)||nr(e,R.path))},e),t||vt.EMPTY_NODE):null}{const f=mu(n.visibleWrites,e);if(null!=f)return f;{const _=Ya(n.visibleWrites,e);return Fg(_)?t:null!=t||xg(_,kt())?$c(_,t||vt.EMPTY_NODE):null}}}function _u(n,e,t,o){return Cy(n.writeTree,n.treePath,e,t,o)}function $o(n,e){return function GI(n,e,t){let o=vt.EMPTY_NODE;const l=mu(n.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(sn,(f,_)=>{o=o.updateImmediateChild(f,_)}),o;if(t){const f=Ya(n.visibleWrites,e);return t.forEachChild(sn,(_,D)=>{const T=$c(Ya(f,new Be(_)),D);o=o.updateImmediateChild(_,T)}),Ey(f).forEach(_=>{o=o.updateImmediateChild(_.name,_.node)}),o}return Ey(Ya(n.visibleWrites,e)).forEach(_=>{o=o.updateImmediateChild(_.name,_.node)}),o}(n.writeTree,n.treePath,e)}function zI(n,e,t,o){return function wy(n,e,t,o,l){(0,P.hu)(o||l,"Either existingEventSnap or existingServerSnap must exist");const f=_n(e,t);if(xg(n.visibleWrites,f))return null;{const _=Ya(n.visibleWrites,f);return Fg(_)?l.getChild(t):$c(_,l.getChild(t))}}(n.writeTree,n.treePath,e,t,o)}function Qa(n,e){return function WI(n,e){return mu(n.visibleWrites,e)}(n.writeTree,_n(n.treePath,e))}function Ug(n,e,t){return function by(n,e,t,o){const l=_n(e,t),f=mu(n.visibleWrites,l);return null!=f?f:o.isCompleteForChild(t)?$c(Ya(n.visibleWrites,l),o.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function zf(n,e){return Sy(_n(n.treePath,e),n.writeTree)}function Sy(n,e){return{treePath:n,writeTree:e}}class qs{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,o=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const l=this.changeMap.get(o);if(l){const f=l.type;if("child_added"===t&&"child_removed"===f)this.changeMap.set(o,ah(o,e.snapshotNode,l.snapshotNode));else if("child_removed"===t&&"child_added"===f)this.changeMap.delete(o);else if("child_removed"===t&&"child_changed"===f)this.changeMap.set(o,Fc(o,l.oldSnap));else if("child_changed"===t&&"child_added"===f)this.changeMap.set(o,fu(o,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==f)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+l);this.changeMap.set(o,ah(o,e.snapshotNode,l.oldSnap))}}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}const dr=new class dh{getCompleteChild(e){return null}getChildAfterChild(e,t,o){return null}};class Go{constructor(e,t,o=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=o}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const o=null!=this.optCompleteServerCache_?new pu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ug(this.writes_,e,o)}}getChildAfterChild(e,t,o){const l=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gu(this.viewCache_),f=function ZI(n,e,t,o,l,f){return function Ew(n,e,t,o,l,f,_){let D;const T=Ya(n.visibleWrites,e),R=mu(T,kt());if(null!=R)D=R;else{if(null==t)return[];D=$c(T,t)}if(D=D.withIndex(_),D.isEmpty()||D.isLeafNode())return[];{const V=[],B=_.getCompare(),J=f?D.getReverseIteratorFrom(o,_):D.getIteratorFrom(o,_);let pe=J.getNext();for(;pe&&V.length<l;)0!==B(pe,o)&&V.push(pe),pe=J.getNext();return V}}(n.writeTree,n.treePath,e,t,o,l,f)}(this.writes_,l,t,1,o,e);return 0===f.length?null:f[0]}}function yu(n,e,t,o,l,f){const _=e.eventCache;if(null!=Qa(o,t))return e;{let D,T;if(Tt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const R=gu(e),B=$o(o,R instanceof vt?R:vt.EMPTY_NODE);D=n.filter.updateFullNode(e.eventCache.getNode(),B,f)}else{const R=_u(o,gu(e));D=n.filter.updateFullNode(e.eventCache.getNode(),R,f)}else{const R=wt(t);if(".priority"===R){(0,P.hu)(1===Ho(t),"Can't have a priority with additional path components");const V=_.getNode();T=e.serverCache.getNode();const B=zI(o,t,V,T);D=null!=B?n.filter.updatePriority(V,B):_.getNode()}else{const V=Xt(t);let B;if(_.isCompleteForChild(R)){T=e.serverCache.getNode();const J=zI(o,t,_.getNode(),T);B=null!=J?_.getNode().getImmediateChild(R).updateChild(V,J):_.getNode().getImmediateChild(R)}else B=Ug(o,R,e.serverCache);D=null!=B?n.filter.updateChild(_.getNode(),R,B,V,l,f):_.getNode()}}return qa(e,D,_.isFullyInitialized()||Tt(t),n.filter.filtersNodes())}}function Wo(n,e,t,o,l,f,_,D){const T=e.serverCache;let R;const V=_?n.filter:n.filter.getIndexedFilter();if(Tt(t))R=V.updateFullNode(T.getNode(),o,null);else if(V.filtersNodes()&&!T.isFiltered()){const pe=T.getNode().updateChild(t,o);R=V.updateFullNode(T.getNode(),pe,null)}else{const pe=wt(t);if(!T.isCompleteForPath(t)&&Ho(t)>1)return e;const Ae=Xt(t),at=T.getNode().getImmediateChild(pe).updateChild(Ae,o);R=".priority"===pe?V.updatePriority(T.getNode(),at):V.updateChild(T.getNode(),pe,at,Ae,dr,null)}const B=uh(e,R,T.isFullyInitialized()||Tt(t),V.filtersNodes());return yu(n,B,t,l,new Go(l,B,f),D)}function Ja(n,e,t,o,l,f,_){const D=e.eventCache;let T,R;const V=new Go(l,e,f);if(Tt(t))R=n.filter.updateFullNode(e.eventCache.getNode(),o,_),T=qa(e,R,!0,n.filter.filtersNodes());else{const B=wt(t);if(".priority"===B)R=n.filter.updatePriority(e.eventCache.getNode(),o),T=qa(e,R,D.isFullyInitialized(),D.isFiltered());else{const J=Xt(t),pe=D.getNode().getImmediateChild(B);let Ae;if(Tt(J))Ae=o;else{const Xe=V.getCompleteChild(B);Ae=null!=Xe?".priority"===vg(J)&&Xe.getChild(Eg(J)).isEmpty()?Xe:Xe.updateChild(J,o):vt.EMPTY_NODE}T=pe.equals(Ae)?e:qa(e,n.filter.updateChild(D.getNode(),B,Ae,J,V,_),D.isFullyInitialized(),n.filter.filtersNodes())}}return T}function vu(n,e){return n.eventCache.isCompleteForChild(e)}function Eu(n,e,t){return t.foreach((o,l)=>{e=e.updateChild(o,l)}),e}function Xa(n,e,t,o,l,f,_,D){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let R,T=e;R=Tt(t)?o:new on(null).setTree(t,o);const V=e.serverCache.getNode();return R.children.inorderTraversal((B,J)=>{if(V.hasChild(B)){const Ae=Eu(0,e.serverCache.getNode().getImmediateChild(B),J);T=Wo(n,T,new Be(B),Ae,l,f,_,D)}}),R.children.inorderTraversal((B,J)=>{const pe=!e.serverCache.isCompleteForChild(B)&&null===J.value;if(!V.hasChild(B)&&!pe){const Xe=Eu(0,e.serverCache.getNode().getImmediateChild(B),J);T=Wo(n,T,new Be(B),Xe,l,f,_,D)}}),T}class Ry{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const o=this.query_._queryParams,l=new Hr(o.getIndex()),f=function Ag(n){return n.loadsAllData()?new Hr(n.getIndex()):n.hasLimit()?new AI(n):new Lc(n)}(o);this.processor_=function Zf(n){return{filter:n}}(f);const _=t.serverCache,D=t.eventCache,T=l.updateFullNode(vt.EMPTY_NODE,_.getNode(),null),R=f.updateFullNode(vt.EMPTY_NODE,D.getNode(),null),V=new pu(T,_.isFullyInitialized(),l.filtersNodes()),B=new pu(R,D.isFullyInitialized(),f.filtersNodes());this.viewCache_=ji(B,V),this.eventGenerator_=new my(this.query_)}get query(){return this.query_}}function Oy(n,e){const t=gu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Tt(e)&&!t.getImmediateChild(wt(e)).isEmpty())?t.getChild(e):null}function Hg(n){return 0===n.eventRegistrations_.length}function jg(n,e,t){const o=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const l=n.query._path;n.eventRegistrations_.forEach(f=>{const _=f.createCancelEvent(t,l);_&&o.push(_)})}if(e){let l=[];for(let f=0;f<n.eventRegistrations_.length;++f){const _=n.eventRegistrations_[f];if(_.matches(e)){if(e.hasAnyCallback()){l=l.concat(n.eventRegistrations_.slice(f+1));break}}else l.push(_)}n.eventRegistrations_=l}else n.eventRegistrations_=[];return o}function xy(n,e,t,o){e.type===si.MERGE&&null!==e.source.queryId&&((0,P.hu)(gu(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(Ka(n.viewCache_),"Missing event cache, even though we have a server cache"));const l=n.viewCache_,f=function Bg(n,e,t,o,l){const f=new qs;let _,D;if(t.type===si.OVERWRITE){const R=t;R.source.fromUser?_=Ja(n,e,R.path,R.snap,o,l,f):((0,P.hu)(R.source.fromServer,"Unknown source."),D=R.source.tagged||e.serverCache.isFiltered()&&!Tt(R.path),_=Wo(n,e,R.path,R.snap,o,l,D,f))}else if(t.type===si.MERGE){const R=t;R.source.fromUser?_=function Wc(n,e,t,o,l,f,_){let D=e;return o.foreach((T,R)=>{const V=_n(t,T);vu(e,wt(V))&&(D=Ja(n,D,V,R,l,f,_))}),o.foreach((T,R)=>{const V=_n(t,T);vu(e,wt(V))||(D=Ja(n,D,V,R,l,f,_))}),D}(n,e,R.path,R.children,o,l,f):((0,P.hu)(R.source.fromServer,"Unknown source."),D=R.source.tagged||e.serverCache.isFiltered(),_=Xa(n,e,R.path,R.children,o,l,D,f))}else if(t.type===si.ACK_USER_WRITE){const R=t;_=R.revert?function My(n,e,t,o,l,f){let _;if(null!=Qa(o,t))return e;{const D=new Go(o,e,l),T=e.eventCache.getNode();let R;if(Tt(t)||".priority"===wt(t)){let V;if(e.serverCache.isFullyInitialized())V=_u(o,gu(e));else{const B=e.serverCache.getNode();(0,P.hu)(B instanceof vt,"serverChildren would be complete if leaf node"),V=$o(o,B)}R=n.filter.updateFullNode(T,V,f)}else{const V=wt(t);let B=Ug(o,V,e.serverCache);null==B&&e.serverCache.isCompleteForChild(V)&&(B=T.getImmediateChild(V)),R=null!=B?n.filter.updateChild(T,V,B,Xt(t),D,f):e.eventCache.getNode().hasChild(V)?n.filter.updateChild(T,V,vt.EMPTY_NODE,Xt(t),D,f):T,R.isEmpty()&&e.serverCache.isFullyInitialized()&&(_=_u(o,gu(e)),_.isLeafNode()&&(R=n.filter.updateFullNode(R,_,f)))}return _=e.serverCache.isFullyInitialized()||null!=Qa(o,kt()),qa(e,R,_,n.filter.filtersNodes())}}(n,e,R.path,o,l,f):function zc(n,e,t,o,l,f,_){if(null!=Qa(l,t))return e;const D=e.serverCache.isFiltered(),T=e.serverCache;if(null!=o.value){if(Tt(t)&&T.isFullyInitialized()||T.isCompleteForPath(t))return Wo(n,e,t,T.getNode().getChild(t),l,f,D,_);if(Tt(t)){let R=new on(null);return T.getNode().forEachChild(Zs,(V,B)=>{R=R.set(new Be(V),B)}),Xa(n,e,t,R,l,f,D,_)}return e}{let R=new on(null);return o.foreach((V,B)=>{const J=_n(t,V);T.isCompleteForPath(J)&&(R=R.set(V,T.getNode().getChild(J)))}),Xa(n,e,t,R,l,f,D,_)}}(n,e,R.path,R.affectedTree,o,l,f)}else{if(t.type!==si.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);_=function Ay(n,e,t,o,l){const f=e.serverCache;return yu(n,uh(e,f.getNode(),f.isFullyInitialized()||Tt(t),f.isFiltered()),t,o,dr,l)}(n,e,t.path,o,f)}const T=f.getChanges();return function Gc(n,e,t){const o=e.eventCache;if(o.isFullyInitialized()){const l=o.getNode().isLeafNode()||o.getNode().isEmpty(),f=Ka(n);(t.length>0||!n.eventCache.isFullyInitialized()||l&&!o.getNode().equals(f)||!o.getNode().getPriority().equals(f.getPriority()))&&t.push(fy(Ka(e)))}}(e,_,T),{viewCache:_,changes:T}}(n.processor_,l,e,t,o);return function $i(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,f.viewCache),(0,P.hu)(f.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=f.viewCache,$g(n,f.changes,f.viewCache.eventCache.getNode(),null)}function $g(n,e,t,o){return function _y(n,e,t,o){const l=[],f=[];return e.forEach(_=>{"child_changed"===_.type&&n.index_.indexedValueChanged(_.oldSnap,_.snapshotNode)&&f.push(function SI(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(_.childName,_.snapshotNode))}),jc(n,l,"child_removed",e,o,t),jc(n,l,"child_added",e,o,t),jc(n,l,"child_moved",f,o,t),jc(n,l,"child_changed",e,o,t),jc(n,l,"value",e,o,t),l}(n.eventGenerator_,e,t,o?[o]:n.eventRegistrations_)}let qf,ph;class Gg{constructor(){this.views=new Map}}function Zc(n,e,t,o){const l=e.source.queryId;if(null!==l){const f=n.views.get(l);return(0,P.hu)(null!=f,"SyncTree gave us an op for an invalid query."),xy(f,e,t,o)}{let f=[];for(const _ of n.views.values())f=f.concat(xy(_,e,t,o));return f}}function hh(n,e,t,o,l){const _=n.views.get(e._queryIdentifier);if(!_){let D=_u(t,l?o:null),T=!1;D?T=!0:o instanceof vt?(D=$o(t,o),T=!1):(D=vt.EMPTY_NODE,T=!1);const R=ji(new pu(D,T,!1),new pu(o,l,!1));return new Ry(e,R)}return _}function Kf(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ks(n,e){let t=null;for(const o of n.views.values())t=t||Oy(o,e);return t}function qg(n,e){return e._queryParams.loadsAllData()?fh(n):n.views.get(e._queryIdentifier)}function Kg(n,e){return null!=qg(n,e)}function Ys(n){return null!=fh(n)}function fh(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let QI=1;class Qg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new on(null),this.pendingWriteTree_=function Ty(){return{visibleWrites:Is.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Yf(n,e,t,o,l){return function Lg(n,e,t,o,l){(0,P.hu)(o>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===l&&(l=!0),n.allWrites.push({path:e,snap:t,writeId:o,visible:l}),l&&(n.visibleWrites=jo(n.visibleWrites,e,t)),n.lastWriteId=o}(n.pendingWriteTree_,e,t,o,l),l?Iu(n,new Hc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function zo(n,e,t=!1){const o=function Vg(n,e){for(let t=0;t<n.allWrites.length;t++){const o=n.allWrites[t];if(o.writeId===e)return o}return null}(n.pendingWriteTree_,e);if(function BI(n,e){const t=n.allWrites.findIndex(D=>D.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const o=n.allWrites[t];n.allWrites.splice(t,1);let l=o.visible,f=!1,_=n.allWrites.length-1;for(;l&&_>=0;){const D=n.allWrites[_];D.visible&&(_>=t&&HI(D,o.path)?l=!1:nr(o.path,D.path)&&(f=!0)),_--}return!!l&&(f?(function jI(n){n.visibleWrites=Dy(n.allWrites,$I,kt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(o.snap?n.visibleWrites=VI(n.visibleWrites,o.path):Vn(o.children,T=>{n.visibleWrites=VI(n.visibleWrites,_n(o.path,T))}),!0))}(n.pendingWriteTree_,e)){let f=new on(null);return null!=o.snap?f=f.set(kt(),!0):Vn(o.children,_=>{f=f.set(new Be(_),!0)}),Iu(n,new Bc(o.path,f,t))}return[]}function gh(n,e,t){return Iu(n,new Hc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function qc(n,e,t,o,l=!1){const f=e._path,_=n.syncPointTree_.get(f);let D=[];if(_&&("default"===e._queryIdentifier||Kg(_,e))){const T=function YI(n,e,t,o){const l=e._queryIdentifier,f=[];let _=[];const D=Ys(n);if("default"===l)for(const[T,R]of n.views.entries())_=_.concat(jg(R,t,o)),Hg(R)&&(n.views.delete(T),R.query._queryParams.loadsAllData()||f.push(R.query));else{const T=n.views.get(l);T&&(_=_.concat(jg(T,t,o)),Hg(T)&&(n.views.delete(l),T.query._queryParams.loadsAllData()||f.push(T.query)))}return D&&!Ys(n)&&f.push(new(function zg(){return(0,P.hu)(qf,"Reference.ts has not been loaded"),qf}())(e._repo,e._path)),{removed:f,events:_}}(_,e,t,o);(function KI(n){return 0===n.views.size})(_)&&(n.syncPointTree_=n.syncPointTree_.remove(f));const R=T.removed;if(D=T.events,!l){const V=-1!==R.findIndex(J=>J._queryParams.loadsAllData()),B=n.syncPointTree_.findOnPath(f,(J,pe)=>Ys(pe));if(V&&!B){const J=n.syncPointTree_.subtree(f);if(!J.isEmpty()){const pe=function rm(n){return n.fold((e,t,o)=>{if(t&&Ys(t))return[fh(t)];{let l=[];return t&&(l=Kf(t)),Vn(o,(f,_)=>{l=l.concat(_)}),l}})}(J);for(let Ae=0;Ae<pe.length;++Ae){const Xe=pe[Ae],at=Xe.query,Vt=_h(n,Xe);n.listenProvider_.startListening(vh(at),Gi(n,at),Vt.hashFn,Vt.onComplete)}}}!B&&R.length>0&&!o&&(V?n.listenProvider_.stopListening(vh(e),null):R.forEach(J=>{const pe=n.queryToTagMap.get(Jf(J));n.listenProvider_.stopListening(vh(J),pe)}))}!function im(n,e){for(let t=0;t<e.length;++t){const o=e[t];if(!o._queryParams.loadsAllData()){const l=Jf(o),f=n.queryToTagMap.get(l);n.queryToTagMap.delete(l),n.tagToQueryMap.delete(f)}}}(n,R)}return D}function Xg(n,e,t,o){const l=nm(n,o);if(null!=l){const f=yh(l),_=f.path,D=f.queryId,T=ii(_,e);return Zo(n,_,new Hc(Uc(D),T,t))}return[]}function Qf(n,e,t,o=!1){const l=e._path;let f=null,_=!1;n.syncPointTree_.foreachOnPath(l,(J,pe)=>{const Ae=ii(J,l);f=f||Ks(pe,Ae),_=_||Ys(pe)});let T,D=n.syncPointTree_.get(l);D?(_=_||Ys(D),f=f||Ks(D,kt())):(D=new Gg,n.syncPointTree_=n.syncPointTree_.set(l,D)),null!=f?T=!0:(T=!1,f=vt.EMPTY_NODE,n.syncPointTree_.subtree(l).foreachChild((pe,Ae)=>{const Xe=Ks(Ae,kt());Xe&&(f=f.updateImmediateChild(pe,Xe))}));const R=Kg(D,e);if(!R&&!e._queryParams.loadsAllData()){const J=Jf(e);(0,P.hu)(!n.queryToTagMap.has(J),"View does not exist, but we have a tag");const pe=function Iw(){return QI++}();n.queryToTagMap.set(J,pe),n.tagToQueryMap.set(pe,J)}let B=function Zg(n,e,t,o,l,f){const _=hh(n,e,o,l,f);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,_),function ky(n,e){n.eventRegistrations_.push(e)}(_,t),function qI(n,e){const t=n.viewCache_.eventCache,o=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(sn,(f,_)=>{o.push(fu(f,_))}),t.isFullyInitialized()&&o.push(fy(t.getNode())),$g(n,o,t.getNode(),e)}(_,t)}(D,e,t,ch(n.pendingWriteTree_,l),f,T);if(!R&&!_&&!o){const J=qg(D,e);B=B.concat(function Dw(n,e,t){const o=e._path,l=Gi(n,e),f=_h(n,t),_=n.listenProvider_.startListening(vh(e),l,f.hashFn,f.onComplete),D=n.syncPointTree_.subtree(o);if(l)(0,P.hu)(!Ys(D.value),"If we're adding a query, it shouldn't be shadowed");else{const T=D.fold((R,V,B)=>{if(!Tt(R)&&V&&Ys(V))return[fh(V).query];{let J=[];return V&&(J=J.concat(Kf(V).map(pe=>pe.query))),Vn(B,(pe,Ae)=>{J=J.concat(Ae)}),J}});for(let R=0;R<T.length;++R){const V=T[R];n.listenProvider_.stopListening(vh(V),Gi(n,V))}}return _}(n,e,J))}return B}function mh(n,e,t){const l=n.pendingWriteTree_,f=n.syncPointTree_.findOnPath(e,(_,D)=>{const R=Ks(D,ii(_,e));if(R)return R});return Cy(l,e,f,t,!0)}function Iu(n,e){return em(e,n.syncPointTree_,null,ch(n.pendingWriteTree_,kt()))}function em(n,e,t,o){if(Tt(n.path))return tm(n,e,t,o);{const l=e.get(kt());null==t&&null!=l&&(t=Ks(l,kt()));let f=[];const _=wt(n.path),D=n.operationForChild(_),T=e.children.get(_);if(T&&D){const R=t?t.getImmediateChild(_):null,V=zf(o,_);f=f.concat(em(D,T,R,V))}return l&&(f=f.concat(Zc(l,n,o,t))),f}}function tm(n,e,t,o){const l=e.get(kt());null==t&&null!=l&&(t=Ks(l,kt()));let f=[];return e.children.inorderTraversal((_,D)=>{const T=t?t.getImmediateChild(_):null,R=zf(o,_),V=n.operationForChild(_);V&&(f=f.concat(tm(V,D,T,R)))}),l&&(f=f.concat(Zc(l,n,o,t))),f}function _h(n,e){const t=e.query,o=Gi(n,t);return{hashFn:()=>(function Py(n){return n.viewCache_.serverCache.getNode()}(e)||vt.EMPTY_NODE).hash(),onComplete:l=>{if("ok"===l)return o?function Jg(n,e,t){const o=nm(n,t);if(o){const l=yh(o),f=l.path,_=l.queryId,D=ii(f,e);return Zo(n,f,new za(Uc(_),D))}return[]}(n,t._path,o):function XI(n,e){return Iu(n,new za({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const f=function ig(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const o=new Error(n+" at "+e._path.toString()+": "+t);return o.code=n.toUpperCase(),o}(l,t);return qc(n,t,null,f)}}}}function Gi(n,e){const t=Jf(e);return n.queryToTagMap.get(t)}function Jf(n){return n._path.toString()+"$"+n._queryIdentifier}function nm(n,e){return n.tagToQueryMap.get(e)}function yh(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Be(n.substr(0,e))}}function Zo(n,e,t){const o=n.syncPointTree_.get(e);return(0,P.hu)(o,"Missing sync point for query tag that we're tracking"),Zc(o,t,ch(n.pendingWriteTree_,e),null)}function vh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Fy(){return(0,P.hu)(ph,"Reference.ts has not been loaded"),ph}())(n._repo,n._path):n}class sm{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new sm(t)}node(){return this.node_}}class om{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_n(this.path_,e);return new om(this.syncTree_,t)}node(){return mh(this.syncTree_,this.path_)}}const Hy=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Wn(n[".sv"],e,t):"object"==typeof n[".sv"]?jy(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Wn=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},jy=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const o=n.increment;"number"!=typeof o&&(0,P.hu)(!1,"Unexpected increment value: "+o);const l=e.node();if((0,P.hu)(null!==l&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return o;const _=l.getValue();return"number"!=typeof _?o:_+o},$y=function(n,e,t,o){return Xf(e,new om(t,n),o)},am=function(n,e,t){return Xf(n,new sm(e),t)};function Xf(n,e,t){const o=n.getPriority().val(),l=Hy(o,e.getImmediateChild(".priority"),t);let f;if(n.isLeafNode()){const _=n,D=Hy(_.getValue(),e,t);return D!==_.getValue()||l!==_.getPriority().val()?new oh(D,cn(l)):n}{const _=n;return f=_,l!==_.getPriority().val()&&(f=f.updatePriority(new oh(l))),_.forEachChild(sn,(D,T)=>{const R=Xf(T,e.getImmediateChild(D),t);R!==T&&(f=f.updateImmediateChild(D,R))}),f}}class lm{constructor(e="",t=null,o={children:{},childCount:0}){this.name=e,this.parent=t,this.node=o}}function Eh(n,e){let t=e instanceof Be?e:new Be(e),o=n,l=wt(t);for(;null!==l;){const f=(0,P.DV)(o.node.children,l)||{children:{},childCount:0};o=new lm(l,o,f),t=Xt(t),l=wt(t)}return o}function el(n){return n.node.value}function tl(n,e){n.node.value=e,tp(n)}function Gy(n){return n.node.childCount>0}function Ih(n,e){Vn(n.node.children,(t,o)=>{e(new lm(t,n,o))})}function Wy(n,e,t,o){t&&!o&&e(n),Ih(n,l=>{Wy(l,e,!0,o)}),t&&o&&e(n)}function ep(n){return new Be(null===n.parent?n.name:ep(n.parent)+"/"+n.name)}function tp(n){null!==n.parent&&function um(n,e,t){const o=function eD(n){return void 0===el(n)&&!Gy(n)}(t),l=(0,P.r3)(n.node.children,e);o&&l?(delete n.node.children[e],n.node.childCount--,tp(n)):!o&&!l&&(n.node.children[e]=t.node,n.node.childCount++,tp(n))}(n.parent,n.name,n)}const Qs=/[\[\].#$\/\u0000-\u001F\u007F]/,tD=/[\[\].#$\u0000-\u001F\u007F]/,cm=10485760,mi=function(n){return"string"==typeof n&&0!==n.length&&!Qs.test(n)},Wi=function(n){return"string"==typeof n&&0!==n.length&&!tD.test(n)},Kc=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Ba(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Cs=function(n,e,t,o){o&&void 0===e||Dh((0,P.gK)(n,"value"),e,t)},Dh=function(n,e,t){const o=t instanceof Be?new yI(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pc(o));if("function"==typeof e)throw new Error(n+"contains a function "+Pc(o)+" with contents = "+e.toString());if(Ba(e))throw new Error(n+"contains "+e.toString()+" "+Pc(o));if("string"==typeof e&&e.length>cm/3&&(0,P.ug)(e)>cm)throw new Error(n+"contains a string greater than "+cm+" utf8 bytes "+Pc(o)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let l=!1,f=!1;if(Vn(e,(_,D)=>{if(".value"===_)l=!0;else if(".priority"!==_&&".sv"!==_&&(f=!0,!mi(_)))throw new Error(n+" contains an invalid key ("+_+") "+Pc(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ig(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),sy(n)})(o,_),Dh(n,D,o),function Dg(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(o)}),l&&f)throw new Error(n+' contains ".value" child '+Pc(o)+" in addition to actual children.")}},Zy=function(n,e,t,o){if(o&&void 0===e)return;const l=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const f=[];Vn(e,(_,D)=>{const T=new Be(_);if(Dh(l,D,_n(t,T)),".priority"===vg(T)&&!Kc(D))throw new Error(l+"contains an invalid value for '"+T.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");f.push(T)}),function(n,e){let t,o;for(t=0;t<e.length;t++){o=e[t];const f=ih(o);for(let _=0;_<f.length;_++)if((".priority"!==f[_]||_!==f.length-1)&&!mi(f[_]))throw new Error(n+"contains an invalid key ("+f[_]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(iy);let l=null;for(t=0;t<e.length;t++){if(o=e[t],null!==l&&nr(l,o))throw new Error(n+"contains a path "+l.toString()+" that is ancestor of another path "+o.toString());l=o}}(l,f)},dm=function(n,e,t){if(!t||void 0!==e){if(Ba(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Kc(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Du=function(n,e,t,o){if(!(o&&void 0===t||mi(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qo=function(n,e,t,o){if(!(o&&void 0===t||Wi(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_i=function(n,e){if(".info"===wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},qy=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!mi(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Wi(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ky{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ch(n,e){let t=null;for(let o=0;o<e.length;o++){const l=e[o],f=l.getPath();null!==t&&!Pf(f,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:f}),t.events.push(l)}t&&n.eventLists_.push(t)}function wh(n,e,t){Ch(n,t),hm(n,o=>Pf(o,e))}function yi(n,e,t){Ch(n,t),hm(n,o=>nr(o,e)||nr(e,o))}function hm(n,e){n.recursionDepth_++;let t=!0;for(let o=0;o<n.eventLists_.length;o++){const l=n.eventLists_[o];l&&(e(l.path)?(Yy(n.eventLists_[o]),n.eventLists_[o]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Yy(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const o=t.getEventRunner();Vo&&tr("event: "+t.toString()),ja(o)}}}const np="repo_interrupt";class fm{constructor(e,t,o,l){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=o,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ky,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gf(),this.transactionQueueTree_=new lm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pm(n){const t=n.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Yc(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:pm(n)})}function gm(n,e,t,o,l){n.dataUpdateCount++;const f=new Be(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let _=[];if(l)if(o){const T=(0,P.UI)(t,R=>cn(R));_=function Vy(n,e,t,o){const l=nm(n,o);if(l){const f=yh(l),_=f.path,D=f.queryId,T=ii(_,e),R=on.fromObject(t);return Zo(n,_,new Za(Uc(D),T,R))}return[]}(n.serverSyncTree_,f,T,l)}else{const T=cn(t);_=Xg(n.serverSyncTree_,f,T,l)}else if(o){const T=(0,P.UI)(t,R=>cn(R));_=function JI(n,e,t){const o=on.fromObject(t);return Iu(n,new Za({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,f,T)}else{const T=cn(t);_=gh(n.serverSyncTree_,f,T)}let D=f;_.length>0&&(D=Cu(n,f)),yi(n.eventQueue_,D,_)}function mm(n,e){ip(n,"connected",e),!1===e&&function oD(n){Qc(n,"onDisconnectEvents");const e=Yc(n),t=Gf();lh(n.onDisconnect_,kt(),(l,f)=>{const _=$y(l,f,n.serverSyncTree_,e);Vc(t,l,_)});let o=[];lh(t,kt(),(l,f)=>{o=o.concat(gh(n.serverSyncTree_,l,f));const _=ap(n,l);Cu(n,_)}),n.onDisconnect_=Gf(),yi(n.eventQueue_,kt(),o)}(n)}function ip(n,e,t){const o=new Be("/.info/"+e),l=cn(t);n.infoData_.updateSnapshot(o,l);const f=gh(n.infoSyncTree_,o,l);yi(n.eventQueue_,o,f)}function sp(n){return n.nextWriteId_++}function _m(n,e,t,o,l){Qc(n,"set",{path:e.toString(),value:t,priority:o});const f=Yc(n),_=cn(t,o),D=mh(n.serverSyncTree_,e),T=am(_,D,f),R=sp(n),V=Yf(n.serverSyncTree_,e,T,R,!0);Ch(n.eventQueue_,V),n.server_.put(e.toString(),_.val(!0),(J,pe)=>{const Ae="ok"===J;Ae||Ur("set at "+e+" failed: "+J);const Xe=zo(n.serverSyncTree_,R,!Ae);yi(n.eventQueue_,e,Xe),nl(0,l,J,pe)});const B=ap(n,e);Cu(n,B),yi(n.eventQueue_,B,[])}function aD(n,e,t){n.server_.onDisconnectCancel(e.toString(),(o,l)=>{"ok"===o&&Hi(n.onDisconnect_,e),nl(0,t,o,l)})}function Xy(n,e,t,o){const l=cn(t);n.server_.onDisconnectPut(e.toString(),l.val(!0),(f,_)=>{"ok"===f&&Vc(n.onDisconnect_,e,l),nl(0,o,f,_)})}function ym(n,e,t){let o;o=".info"===wt(e._path)?qc(n.infoSyncTree_,e,t):qc(n.serverSyncTree_,e,t),wh(n.eventQueue_,e._path,o)}function ev(n){n.persistentConnection_&&n.persistentConnection_.interrupt(np)}function Qc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),tr(t,...e)}function nl(n,e,t,o){e&&ja(()=>{if("ok"===t)e(null);else{const l=(t||"error").toUpperCase();let f=l;o&&(f+=": "+o);const _=new Error(f);_.code=l,e(_)}})}function vm(n,e,t){return mh(n.serverSyncTree_,e,t)||vt.EMPTY_NODE}function op(n,e=n.transactionQueueTree_){if(e||bh(n,e),el(e)){const t=Im(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(l=>0===l.status)&&function tv(n,e,t){const o=t.map(R=>R.currentWriteId),l=vm(n,e,o);let f=l;const _=l.hash();for(let R=0;R<t.length;R++){const V=t[R];(0,P.hu)(0===V.status,"tryToSendTransactionQueue_: items in queue should all be run."),V.status=1,V.retryCount++;const B=ii(e,V.path);f=f.updateChild(B,V.currentOutputSnapshotRaw)}const D=f.val(!0),T=e;n.server_.put(T.toString(),D,R=>{Qc(n,"transaction put response",{path:T.toString(),status:R});let V=[];if("ok"===R){const B=[];for(let J=0;J<t.length;J++)t[J].status=2,V=V.concat(zo(n.serverSyncTree_,t[J].currentWriteId)),t[J].onComplete&&B.push(()=>t[J].onComplete(null,!0,t[J].currentOutputSnapshotResolved)),t[J].unwatcher();bh(n,Eh(n.transactionQueueTree_,e)),op(n,n.transactionQueueTree_),yi(n.eventQueue_,e,V);for(let J=0;J<B.length;J++)ja(B[J])}else{if("datastale"===R)for(let B=0;B<t.length;B++)t[B].status=3===t[B].status?4:0;else{Ur("transaction at "+T.toString()+" failed: "+R);for(let B=0;B<t.length;B++)t[B].status=4,t[B].abortReason=R}Cu(n,e)}},_)}(n,ep(e),t)}else Gy(e)&&Ih(e,t=>{op(n,t)})}function Cu(n,e){const t=Em(n,e),o=ep(t);return function nv(n,e,t){if(0===e.length)return;const o=[];let l=[];const _=e.filter(D=>0===D.status).map(D=>D.currentWriteId);for(let D=0;D<e.length;D++){const T=e[D],R=ii(t,T.path);let B,V=!1;if((0,P.hu)(null!==R,"rerunTransactionsUnderNode_: relativePath should not be null."),4===T.status)V=!0,B=T.abortReason,l=l.concat(zo(n.serverSyncTree_,T.currentWriteId,!0));else if(0===T.status)if(T.retryCount>=25)V=!0,B="maxretry",l=l.concat(zo(n.serverSyncTree_,T.currentWriteId,!0));else{const J=vm(n,T.path,_);T.currentInputSnapshot=J;const pe=e[D].update(J.val());if(void 0!==pe){Dh("transaction failed: Data returned ",pe,T.path);let Ae=cn(pe);"object"==typeof pe&&null!=pe&&(0,P.r3)(pe,".priority")||(Ae=Ae.updatePriority(J.getPriority()));const at=T.currentWriteId,Vt=Yc(n),Ht=am(Ae,J,Vt);T.currentOutputSnapshotRaw=Ae,T.currentOutputSnapshotResolved=Ht,T.currentWriteId=sp(n),_.splice(_.indexOf(at),1),l=l.concat(Yf(n.serverSyncTree_,T.path,Ht,T.currentWriteId,T.applyLocally)),l=l.concat(zo(n.serverSyncTree_,at,!0))}else V=!0,B="nodata",l=l.concat(zo(n.serverSyncTree_,T.currentWriteId,!0))}yi(n.eventQueue_,t,l),l=[],V&&(e[D].status=2,setTimeout(e[D].unwatcher,Math.floor(0)),e[D].onComplete&&o.push("nodata"===B?()=>e[D].onComplete(null,!1,e[D].currentInputSnapshot):()=>e[D].onComplete(new Error(B),!1,null)))}bh(n,n.transactionQueueTree_);for(let D=0;D<o.length;D++)ja(o[D]);op(n,n.transactionQueueTree_)}(n,Im(n,t),o),o}function Em(n,e){let t,o=n.transactionQueueTree_;for(t=wt(e);null!==t&&void 0===el(o);)o=Eh(o,t),t=wt(e=Xt(e));return o}function Im(n,e){const t=[];return Dm(n,e,t),t.sort((o,l)=>o.order-l.order),t}function Dm(n,e,t){const o=el(e);if(o)for(let l=0;l<o.length;l++)t.push(o[l]);Ih(e,l=>{Dm(n,l,t)})}function bh(n,e){const t=el(e);if(t){let o=0;for(let l=0;l<t.length;l++)2!==t[l].status&&(t[o]=t[l],o++);t.length=o,tl(e,t.length>0?t:void 0)}Ih(e,o=>{bh(n,o)})}function ap(n,e){const t=ep(Em(n,e)),o=Eh(n.transactionQueueTree_,e);return function zy(n,e,t){let o=t?n:n.parent;for(;null!==o;){if(e(o))return!0;o=o.parent}}(o,l=>{lp(n,l)}),lp(n,o),Wy(o,l=>{lp(n,l)}),t}function lp(n,e){const t=el(e);if(t){const o=[];let l=[],f=-1;for(let _=0;_<t.length;_++)3===t[_].status||(1===t[_].status?((0,P.hu)(f===_-1,"All SENT items should be at beginning of queue."),f=_,t[_].status=3,t[_].abortReason="set"):((0,P.hu)(0===t[_].status,"Unexpected transaction status in abort"),t[_].unwatcher(),l=l.concat(zo(n.serverSyncTree_,t[_].currentWriteId,!0)),t[_].onComplete&&o.push(t[_].onComplete.bind(null,new Error("set"),!1,null))));-1===f?tl(e,void 0):t.length=f+1,yi(n.eventQueue_,ep(e),l);for(let _=0;_<o.length;_++)ja(o[_])}}const Ko=function(n,e){const t=fD(n),o=t.namespace;return"firebase.com"===t.domain&&Gs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==t.domain&&Gs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ur("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Sf(t.host,t.secure,o,"ws"===t.scheme||"wss"===t.scheme,e,"",o!==t.subdomain),path:new Be(t.pathString)}},fD=function(n){let e="",t="",o="",l="",f="",_=!0,D="https",T=443;if("string"==typeof n){let R=n.indexOf("//");R>=0&&(D=n.substring(0,R-1),n=n.substring(R+2));let V=n.indexOf("/");-1===V&&(V=n.length);let B=n.indexOf("?");-1===B&&(B=n.length),e=n.substring(0,Math.min(V,B)),V<B&&(l=function rv(n){let e="";const t=n.split("/");for(let o=0;o<t.length;o++)if(t[o].length>0){let l=t[o];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}(n.substring(V,B)));const J=function iv(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const o=t.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Ur(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,B)));R=e.indexOf(":"),R>=0?(_="https"===D||"wss"===D,T=parseInt(e.substring(R+1),10)):R=e.length;const pe=e.slice(0,R);if("localhost"===pe.toLowerCase())t="localhost";else if(pe.split(".").length<=2)t=pe;else{const Ae=e.indexOf(".");o=e.substring(0,Ae).toLowerCase(),t=e.substring(Ae+1),f=o}"ns"in J&&(f=J.ns)}return{host:e,port:T,domain:t,subdomain:o,secure:_,scheme:D,pathString:l,namespace:f}},sv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Jc=function(){let n=0;const e=[];return function(t){const o=t===n;let l;n=t;const f=new Array(8);for(l=7;l>=0;l--)f[l]=sv.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let _=f.join("");if(o){for(l=11;l>=0&&63===e[l];l--)e[l]=0;e[l]++}else for(l=0;l<12;l++)e[l]=Math.floor(64*Math.random());for(l=0;l<12;l++)_+=sv.charAt(e[l]);return(0,P.hu)(20===_.length,"nextPushId: Length should be 20."),_}}();class pD{constructor(e,t,o,l){this.eventType=e,this.eventRegistration=t,this.snapshot=o,this.prevName=l}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Wl)(this.snapshot.exportVal())}}class up{constructor(e,t,o){this.eventRegistration=e,this.error=t,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ov{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Cm{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return aD(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_i("OnDisconnect.remove",this._path);const e=new P.BH;return Xy(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_i("OnDisconnect.set",this._path),Cs("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return Xy(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_i("OnDisconnect.setWithPriority",this._path),Cs("OnDisconnect.setWithPriority",e,this._path,!1),dm("OnDisconnect.setWithPriority",t,!1);const o=new P.BH;return function lD(n,e,t,o,l){const f=cn(t,o);n.server_.onDisconnectPut(e.toString(),f.val(!0),(_,D)=>{"ok"===_&&Vc(n.onDisconnect_,e,f),nl(0,l,_,D)})}(this._repo,this._path,e,t,o.wrapCallback(()=>{})),o.promise}update(e){_i("OnDisconnect.update",this._path),Zy("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function uD(n,e,t,o){if((0,P.xb)(t))return tr("onDisconnect().update() called with empty data.  Don't do anything."),void nl(0,o,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(l,f)=>{"ok"===l&&Vn(t,(_,D)=>{const T=cn(D);Vc(n.onDisconnect_,_n(e,_),T)}),nl(0,o,l,f)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class jr{constructor(e,t,o,l){this._repo=e,this._path=t,this._queryParams=o,this._orderByCalled=l}get key(){return Tt(this._path)?null:vg(this._path)}get ref(){return new zi(this._repo,this._path)}get _queryIdentifier(){const e=gy(this._queryParams),t=Df(e);return"{}"===t?"default":t}get _queryObject(){return gy(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof jr))return!1;const t=this._repo===e._repo,o=Pf(this._path,e._path);return t&&o&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ry(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function wm(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Qe(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Zs){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",l="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Uo)throw new Error(o);if("string"!=typeof e)throw new Error(l)}if(n.hasEnd()){if(n.getIndexEndName()!==Ws)throw new Error(o);if("string"!=typeof t)throw new Error(l)}}else if(n.getIndex()===sn){if(null!=e&&!Kc(e)||null!=t&&!Kc(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof Tg||n.getIndex()===Uf,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cp(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class zi extends jr{constructor(e,t){super(e,t,new Sg,!1)}get parent(){const e=Eg(this._path);return null===e?null:new zi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class wu{constructor(e,t,o){this._node=e,this.ref=t,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Be(e),o=Js(this.ref,e);return new wu(this._node.getChild(t),o,sn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,l)=>e(new wu(l,Js(this.ref,o),sn)))}hasChild(e){const t=new Be(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function bu(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?Js(n._root,e):n._root}function av(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=Ko(e,n._repo.repoInfo_.nodeAdmin);qy("refFromURL",t);const o=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&o.host!==n._repo.repoInfo_.host&&Gs("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+n._repo.repoInfo_.host+")"),bu(n,t.path.toString())}function Js(n,e){return null===wt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qo("child","path",t,!1)):qo("child","path",e,!1),new zi(n._repo,_n(n._path,e));var t}function dp(n,e){n=(0,P.m9)(n),_i("set",n._path),Cs("set",e,n._path,!1);const t=new P.BH;return _m(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function uv(n,e){Zy("update",e,n._path,!1);const t=new P.BH;return function sD(n,e,t,o){Qc(n,"update",{path:e.toString(),value:t});let l=!0;const f=Yc(n),_={};if(Vn(t,(D,T)=>{l=!1,_[D]=$y(_n(e,D),cn(T),n.serverSyncTree_,f)}),l)tr("update() called with empty data.  Don't do anything."),nl(0,o,"ok",void 0);else{const D=sp(n),T=function Ly(n,e,t,o){!function UI(n,e,t,o){(0,P.hu)(o>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:o,visible:!0}),n.visibleWrites=kg(n.visibleWrites,e,t),n.lastWriteId=o}(n.pendingWriteTree_,e,t,o);const l=on.fromObject(t);return Iu(n,new Za({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,l))}(n.serverSyncTree_,e,_,D);Ch(n.eventQueue_,T),n.server_.merge(e.toString(),t,(R,V)=>{const B="ok"===R;B||Ur("update at "+e+" failed: "+R);const J=zo(n.serverSyncTree_,D,!B),pe=J.length>0?Cu(n,e):e;yi(n.eventQueue_,pe,J),nl(0,o,R,V)}),Vn(t,R=>{const V=ap(n,_n(e,R));Cu(n,V)}),yi(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function cv(n){n=(0,P.m9)(n);const e=new ov(()=>{}),t=new Xc(e);return function iD(n,e,t){const o=function Uy(n,e){const t=e._path;let o=null;n.syncPointTree_.foreachOnPath(t,(R,V)=>{const B=ii(R,t);o=o||Ks(V,B)});let l=n.syncPointTree_.get(t);l?o=o||Ks(l,kt()):(l=new Gg,n.syncPointTree_=n.syncPointTree_.set(t,l));const f=null!=o,_=f?new pu(o,!0,!1):null;return function Ny(n){return Ka(n.viewCache_)}(hh(l,e,ch(n.pendingWriteTree_,e._path),f?_.getNode():vt.EMPTY_NODE,f))}(n.serverSyncTree_,e);return null!=o?Promise.resolve(o):n.server_.get(e).then(l=>{const f=cn(l).withIndex(e._queryParams.getIndex());let _;if(Qf(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())_=gh(n.serverSyncTree_,e._path,f);else{const D=Gi(n.serverSyncTree_,e);_=Xg(n.serverSyncTree_,e._path,f,D)}return yi(n.eventQueue_,e._path,_),qc(n.serverSyncTree_,e,t,null,!0),f},l=>(Qc(n,"get for query "+(0,P.Wl)(e)+" failed: "+l),Promise.reject(new Error(l))))}(n._repo,n,t).then(o=>new wu(o,new zi(n._repo,n._path),n._queryParams.getIndex()))}class Xc{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const o=t._queryParams.getIndex();return new pD("value",this,new wu(e.snapshotNode,new zi(t._repo,t._path),o))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new up(this,e,t):null}matches(e){return e instanceof Xc&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Th{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new up(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const o=Js(new zi(t._repo,t._path),e.childName),l=t._queryParams.getIndex();return new pD(e.type,this,new wu(e.snapshotNode,o,l),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Th&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Sh(n,e,t,o,l){let f;if("object"==typeof o&&(f=void 0,l=o),"function"==typeof o&&(f=o),l&&l.onlyOnce){const T=t,R=(V,B)=>{ym(n._repo,n,D),T(V,B)};R.userCallback=t.userCallback,R.context=t.context,t=R}const _=new ov(t,f||void 0),D="value"===e?new Xc(_):new Th(e,_);return function cD(n,e,t){let o;o=".info"===wt(e._path)?Qf(n.infoSyncTree_,e,t):Qf(n.serverSyncTree_,e,t),wh(n.eventQueue_,e._path,o)}(n._repo,n,D),()=>ym(n._repo,n,D)}function Tm(n,e,t,o){return Sh(n,"value",e,t,o)}function dv(n,e,t,o){return Sh(n,"child_added",e,t,o)}function ed(n,e,t,o){return Sh(n,"child_changed",e,t,o)}function hv(n,e,t,o){return Sh(n,"child_moved",e,t,o)}function fv(n,e,t,o){return Sh(n,"child_removed",e,t,o)}function pv(n,e,t){let o=null;const l=t?new ov(t):null;"value"===e?o=new Xc(l):e&&(o=new Th(e,l)),ym(n._repo,n,o)}class oi{}class Sm extends oi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cs("endAt",this._value,e._path,!0);const t=Bf(e._queryParams,this._value,this._key);if(cp(t),Qe(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jr(e._repo,e._path,t,e._orderByCalled)}}class mv extends oi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cs("endBefore",this._value,e._path,!1);const t=function PI(n,e,t){let o;return o=Bf(n,e,n.index_===Zs||t?t:Uo),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(cp(t),Qe(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jr(e._repo,e._path,t,e._orderByCalled)}}class td extends oi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cs("startAt",this._value,e._path,!0);const t=Mg(e._queryParams,this._value,this._key);if(cp(t),Qe(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jr(e._repo,e._path,t,e._orderByCalled)}}class _D extends oi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Cs("startAfter",this._value,e._path,!1);const t=function RI(n,e,t){let o;return o=Mg(n,e,n.index_===Zs||t?t:Ws),o.startAfterSet_=!0,o}(e._queryParams,this._value,this._key);if(cp(t),Qe(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jr(e._repo,e._path,t,e._orderByCalled)}}class vD extends oi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jr(e._repo,e._path,function py(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class yv extends oi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jr(e._repo,e._path,function MI(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class ED extends oi{constructor(e){super(),this._path=e}_apply(e){wm(e,"orderByChild");const t=new Be(this._path);if(Tt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new Tg(t),l=Hf(e._queryParams,o);return Qe(l),new jr(e._repo,e._path,l,!0)}}class ID extends oi{_apply(e){wm(e,"orderByKey");const t=Hf(e._queryParams,Zs);return Qe(t),new jr(e._repo,e._path,t,!0)}}class ww extends oi{_apply(e){wm(e,"orderByPriority");const t=Hf(e._queryParams,sn);return Qe(t),new jr(e._repo,e._path,t,!0)}}class Tw extends oi{_apply(e){wm(e,"orderByValue");const t=Hf(e._queryParams,Uf);return Qe(t),new jr(e._repo,e._path,t,!0)}}class Aw extends oi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Cs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Sm(this._value,this._key)._apply(new td(this._value,this._key)._apply(e))}}function Zi(n,...e){let t=(0,P.m9)(n);for(const o of e)t=o._apply(t);return t}(function Wg(n){(0,P.hu)(!qf,"__referenceConstructor has already been defined"),qf=n})(zi),function Yg(n){(0,P.hu)(!ph,"__referenceConstructor has already been defined"),ph=n}(zi);const Am={};function nd(n,e,t,o,l){let f=o||n.options.databaseURL;void 0===f&&(n.options.projectId||Gs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tr("Using default host for project ",n.options.projectId),f=`${n.options.projectId}-default-rtdb.firebaseio.com`);let T,R,_=Ko(f,l),D=_.repoInfo;typeof process<"u"&&process.env&&(R=process.env.FIREBASE_DATABASE_EMULATOR_HOST),R?(T=!0,f=`http://${R}?ns=${D.namespace}`,_=Ko(f,l),D=_.repoInfo):T=!_.repoInfo.secure;const V=l&&T?new zs(zs.OWNER):new wf(n.name,n.options,e);qy("Invalid Firebase Database URL",_),Tt(_.path)||Gs("Database URL must point to the root of a Firebase Database (not including a child path).");const B=function wD(n,e,t,o){let l=Am[e.name];l||(l={},Am[e.name]=l);let f=l[n.toURLString()];return f&&Gs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),f=new fm(n,false,t,o),l[n.toURLString()]=f,f}(D,n,V,new sg(n.name,t));return new TD(B,n)}class TD{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Qy(n,e,t){if(n.stats_=cg(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new $f(n.repoInfo_,(o,l,f,_)=>{gm(n,o,l,f,_)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mm(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Wl)(t)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}n.persistentConnection_=new Ga(n.repoInfo_,e,(o,l,f,_)=>{gm(n,o,l,f,_)},o=>{mm(n,o)},o=>{!function Jy(n,e){Vn(e,(t,o)=>{ip(n,t,o)})}(n,o)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(o=>{n.server_.refreshAuthToken(o)}),n.appCheckProvider_.addTokenChangeListener(o=>{n.server_.refreshAppCheckToken(o.token)}),n.statsReporter_=function Ac(n,e){const t=n.toString();return Sc[t]||(Sc[t]=e()),Sc[t]}(n.repoInfo_,()=>new LI(n.stats_,n.server_)),n.infoData_=new NI,n.infoSyncTree_=new Qg({startListening:(o,l,f,_)=>{let D=[];const T=n.infoData_.getNode(o._path);return T.isEmpty()||(D=gh(n.infoSyncTree_,o._path,T),setTimeout(()=>{_("ok")},0)),D},stopListening:()=>{}}),ip(n,"connected",!1),n.serverSyncTree_=new Qg({startListening:(o,l,f,_)=>(n.server_.listen(o,f,l,(D,T)=>{const R=_(D,T);yi(n.eventQueue_,o._path,R)}),[]),stopListening:(o,l)=>{n.server_.unlisten(o,l)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zi(this._repo,kt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function CD(n,e){const t=Am[e];(!t||t[n.key]!==n)&&Gs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ev(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Gs("Cannot call "+e+" on a deleted database.")}}function Cv(){gI.IS_TRANSPORT_INITIALIZED&&Ur("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wv(){Cv(),$a.forceDisallow()}function SD(){Cv(),Rc.forceDisallow(),$a.forceAllow()}function MD(n,e){P_(n,e)}const RD={".sv":"timestamp"};class Mm{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ga.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ga.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Tv(n){A_(Fi.SDK_VERSION),(0,Fi._registerComponent)(new gi.wA("database",(e,{instanceIdentifier:t})=>nd(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(Jp,"0.14.4",n),(0,Fi.registerVersion)(Jp,"0.14.4","esm2017")}();const LD=new Pa.Yd("@firebase/database-compat"),fp=function(n){LD.warn("FIREBASE WARNING: "+n)};class UD{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),o=>e(o)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),o=>e(o)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const o=this._delegate.set(e);return t&&o.then(()=>t(null),l=>t(l)),o}setWithPriority(e,t,o){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const l=this._delegate.setWithPriority(e,t);return o&&l.then(()=>o(null),f=>o(f)),l}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const l={};for(let f=0;f<e.length;++f)l[""+f]=e[f];e=l,fp("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const o=this._delegate.update(e);return t&&o.then(()=>t(null),l=>t(l)),o}}class BD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class rl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),qo("DataSnapshot.child","path",e,!1),new rl(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),qo("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new rl(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new vi(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class hr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,o,l){var f;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const _=hr.getCancelAndContextArgs_("Query.on",o,l),D=(R,V)=>{t.call(_.context,new rl(this.database,R),V)};D.userCallback=t,D.context=_.context;const T=null===(f=_.cancel)||void 0===f?void 0:f.bind(_.context);switch(e){case"value":return Tm(this._delegate,D,T),t;case"child_added":return dv(this._delegate,D,T),t;case"child_removed":return fv(this._delegate,D,T),t;case"child_changed":return ed(this._delegate,D,T),t;case"child_moved":return hv(this._delegate,D,T),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,o){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",o,!0),t){const l=()=>{};l.userCallback=t,l.context=o,pv(this._delegate,e,l)}else pv(this._delegate,e)}get(){return cv(this._delegate).then(e=>new rl(this.database,e))}once(e,t,o,l){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const f=hr.getCancelAndContextArgs_("Query.once",o,l),_=new P.BH,D=(R,V)=>{const B=new rl(this.database,R);t&&t.call(f.context,B,V),_.resolve(B)};D.userCallback=t,D.context=f.context;const T=R=>{f.cancel&&f.cancel.call(f.context,R),_.reject(R)};switch(e){case"value":Tm(this._delegate,D,T,{onlyOnce:!0});break;case"child_added":dv(this._delegate,D,T,{onlyOnce:!0});break;case"child_removed":fv(this._delegate,D,T,{onlyOnce:!0});break;case"child_changed":ed(this._delegate,D,T,{onlyOnce:!0});break;case"child_moved":hv(this._delegate,D,T,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return _.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new hr(this.database,Zi(this._delegate,function _v(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vD(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new hr(this.database,Zi(this._delegate,function vv(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yv(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new hr(this.database,Zi(this._delegate,function Ev(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qo("orderByChild","path",n,!1),new ED(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new hr(this.database,Zi(this._delegate,function DD(){return new ID}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new hr(this.database,Zi(this._delegate,function bw(){return new ww}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new hr(this.database,Zi(this._delegate,function Sw(){return new Tw}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new hr(this.database,Zi(this._delegate,function Ah(n=null,e){return Du("startAt","key",e,!0),new td(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new hr(this.database,Zi(this._delegate,function yD(n,e){return Du("startAfter","key",e,!0),new _D(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new hr(this.database,Zi(this._delegate,function gv(n,e){return Du("endAt","key",e,!0),new Sm(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new hr(this.database,Zi(this._delegate,function mD(n,e){return Du("endBefore","key",e,!0),new mv(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new hr(this.database,Zi(this._delegate,function Mw(n,e){return Du("equalTo","key",e,!0),new Aw(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof hr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,o){const l={cancel:void 0,context:void 0};if(t&&o)l.cancel=t,(0,P.Wj)(e,"cancel",l.cancel,!0),l.context=o,(0,P.lb)(e,"context",l.context,!0);else if(t)if("object"==typeof t&&null!==t)l.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");l.cancel=t}return l}get ref(){return new vi(this.database,new zi(this._delegate._repo,this._delegate._path))}}class vi extends hr{constructor(e,t){super(e,new jr(t._repo,t._path,new Sg,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new vi(this.database,Js(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new vi(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new vi(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const o=dp(this._delegate,e);return t&&o.then(()=>t(null),l=>t(l)),o}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const l={};for(let f=0;f<e.length;++f)l[""+f]=e[f];e=l,fp("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_i("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const o=uv(this._delegate,e);return t&&o.then(()=>t(null),l=>t(l)),o}setWithPriority(e,t,o){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",o,!0);const l=function gD(n,e,t){if(_i("setWithPriority",n._path),Cs("setWithPriority",e,n._path,!1),dm("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const o=new P.BH;return _m(n._repo,n._path,e,t,o.wrapCallback(()=>{})),o.promise}(this._delegate,e,t);return o&&l.then(()=>o(null),f=>o(f)),l}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function Cw(n){return _i("remove",n._path),dp(n,null)}(this._delegate);return e&&t.then(()=>e(null),o=>e(o)),t}transaction(e,t,o){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,o){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const l=function ND(n,e,t){var o;if(n=(0,P.m9)(n),_i("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const l=null===(o=t?.applyLocally)||void 0===o||o,f=new P.BH,D=Tm(n,()=>{});return function hD(n,e,t,o,l,f){Qc(n,"transaction on "+e);const _={path:e,update:t,onComplete:o,status:null,order:Nn(),applyLocally:f,retryCount:0,unwatcher:l,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},D=vm(n,e,void 0);_.currentInputSnapshot=D;const T=_.update(D.val());if(void 0===T)_.unwatcher(),_.currentOutputSnapshotRaw=null,_.currentOutputSnapshotResolved=null,_.onComplete&&_.onComplete(null,!1,_.currentInputSnapshot);else{Dh("transaction failed: Data returned ",T,_.path),_.status=0;const R=Eh(n.transactionQueueTree_,e),V=el(R)||[];let B;V.push(_),tl(R,V),"object"==typeof T&&null!==T&&(0,P.r3)(T,".priority")?(B=(0,P.DV)(T,".priority"),(0,P.hu)(Kc(B),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):B=(mh(n.serverSyncTree_,e)||vt.EMPTY_NODE).getPriority().val();const J=Yc(n),pe=cn(T,B),Ae=am(pe,D,J);_.currentOutputSnapshotRaw=pe,_.currentOutputSnapshotResolved=Ae,_.currentWriteId=sp(n);const Xe=Yf(n.serverSyncTree_,e,Ae,_.currentWriteId,_.applyLocally);yi(n.eventQueue_,e,Xe),op(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(T,R,V)=>{let B=null;T?f.reject(T):(B=new wu(V,new zi(n._repo,n._path),sn),f.resolve(new Mm(R,B)))},D,l),f.promise}(this._delegate,e,{applyLocally:o}).then(f=>new BD(f.committed,new rl(this.database,f.snapshot)));return t&&l.then(f=>t(null,f.committed,f.snapshot),f=>t(f,!1,null)),l}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const o=function lv(n,e){n=(0,P.m9)(n),_i("setPriority",n._path),dm("setPriority",e,!1);const t=new P.BH;return _m(n._repo,_n(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&o.then(()=>t(null),l=>t(l)),o}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const o=function Sn(n,e){n=(0,P.m9)(n),_i("push",n._path),Cs("push",e,n._path,!0);const t=pm(n._repo),o=Jc(t),l=Js(n,o),f=Js(n,o);let _;return _=null!=e?dp(f,e).then(()=>f):Promise.resolve(f),l.then=_.then.bind(_),l.catch=_.then.bind(_,void 0),l}(this._delegate,e),l=o.then(_=>new vi(this.database,_));t&&l.then(()=>t(null),_=>t(_));const f=new vi(this.database,o);return f.then=l.then.bind(l),f.catch=l.catch.bind(l,void 0),f}onDisconnect(){return _i("Reference.onDisconnect",this._delegate._path),new UD(new Cm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Mh{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wv,forceLongPolling:SD}}useEmulator(e,t,o={}){!function rd(n,e,t,o={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Gs("Cannot call useEmulator() after instance has already been initialized.");const l=n._repoInternal;let f;if(l.repoInfo_.nodeAdmin)o.mockUserToken&&Gs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new zs(zs.OWNER);else if(o.mockUserToken){const _="string"==typeof o.mockUserToken?o.mockUserToken:(0,P.Sg)(o.mockUserToken,n.app.options.projectId);f=new zs(_)}!function Dv(n,e,t,o){n.repoInfo_=new Sf(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),o&&(n.authTokenProvider_=o)}(l,e,t,f)}(this._delegate,e,t,o)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof vi){const t=av(this._delegate,e.toString());return new vi(this,t)}{const t=bu(this._delegate,e);return new vi(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const o=av(this._delegate,e);return new vi(this,o)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function AD(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),ev(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function bv(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function dD(n){n.persistentConnection_&&n.persistentConnection_.resume(np)}(n._repo)}(this._delegate)}}Mh.ServerValue={TIMESTAMP:function Sv(){return RD}(),increment:n=>function PD(n){return{".sv":{increment:n}}}(n)};var jD=Object.freeze({__proto__:null,initStandalone:function HD({app:n,url:e,version:t,customAuthImpl:o,namespace:l,nodeAdmin:f=!1}){A_(t);const _=new gi.zt("auth-internal",new gi.H0("database-standalone"));return _.setComponent(new gi.wA("auth-internal",()=>o,"PRIVATE")),{instance:new Mh(nd(n,_,void 0,e,f),n),namespace:l}}});const Mv=Mh.ServerValue;function Rm(n){return null==n}function Pv(n){return"function"==typeof n.set}function Nv(n,e){return Pv(e)?e:n.ref(e)}function Ov(n,e){if(function $D(n){return"string"==typeof n}(n))return e.stringCase();if(Pv(n))return e.firebaseCase();if(function GD(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Tu(n,e,t="on",o=su.z){return new So.y(l=>{let f=null;return f=n[t](e,(_,D)=>{o.schedule(()=>{l.next({snapshot:_,prevKey:D})}),"once"===t&&o.schedule(()=>l.complete())},_=>{o.schedule(()=>l.error(_))}),"on"===t?{unsubscribe(){null!=f&&n.off(e,f)}}:{unsubscribe(){}}}).pipe((0,Jt.U)(l=>{const{snapshot:f,prevKey:_}=l;let D=null;return f.exists()&&(D=f.key),{type:e,payload:f,prevKey:_,key:D}}),(0,js.B)())}function Nm(n,e){const t=n.length;for(let o=0;o<t;o++)if(n[o].payload.key===e)return o;return-1}function WD(n,e){const{payload:t,prevKey:o,key:l}=e,f=Nm(n,l),_=function Om(n,e){if(Rm(e))return 0;{const t=Nm(n,e);return-1===t?n.length:t+1}}(n,o);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let D=null;e.payload.forEach(T=>{const R={payload:T,type:"value",prevKey:D,key:T.key};return D=T.key,n=[...n,R],!1})}return n;case"child_added":if(f>-1){const D=n[f-1];(D&&D.key||null)!==o&&(n=n.filter(T=>T.payload.key!==t.key)).splice(_,0,e)}else{if(null==o)return[e,...n];(n=n.slice()).splice(_,0,e)}return n;case"child_removed":return n.filter(D=>D.payload.key!==t.key);case"child_changed":return n.map(D=>D.payload.key===l?e:D);case"child_moved":if(f>-1){const D=n.splice(f,1)[0];return(n=n.slice()).splice(_,0,D),n}return n;default:return n}}function kv(n){return(Rm(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pp(n,e,t){return function Pm(n,e,t){return Tu(n,"value","once",t).pipe(er(o=>{const l=[Ni(o)];return e.forEach(f=>l.push(Tu(n,f,"on",t))),(0,ei.T)(...l).pipe(bc(WD,[]))}),function If(n,e=me.y){return n=n??Qp,(0,Fr.e)((t,o)=>{let l,f=!0;t.subscribe((0,un.x)(o,_=>{const D=e(_);(f||!n(l,D))&&(f=!1,l=D,o.next(_))}))})}())}(n,e=kv(e),t)}function xv(n,e,t){const o=(e=kv(e)).map(l=>Tu(n,l,"on",t));return(0,ei.T)(...o)}function Lv(n,e){return function(o,l){return Ov(o,{stringCase:()=>n.child(o)[e](l),firebaseCase:()=>o[e](l),snapshotCase:()=>o.ref[e](l)})}}function Pw(n){return function(t){return t?Ov(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function gp(n,e){return function(){return Tu(n,"value","on",e)}}!function Rv(n){n.INTERNAL.registerComponent(new gi.wA("database-compat",(e,{instanceIdentifier:t})=>{const o=e.getProvider("app-compat").getImmediate(),l=e.getProvider("database").getImmediate({identifier:t});return new Mh(l,o)},"PUBLIC").setServiceProps({Reference:vi,Query:hr,Database:Mh,DataSnapshot:rl,enableLogging:MD,INTERNAL:jD,ServerValue:Mv}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(iI.Z);const Uv=new p.OlP("angularfire2.realtimeDatabaseURL"),qD=new p.OlP("angularfire2.database.use-emulator");let Bv=(()=>{class n{constructor(t,o,l,f,_,D,T,R,V,B,J,pe,Ae,Xe,at){this.schedulers=D;const Vt=T,Ht=(0,Lt.on)(t,_,o);R&&iu(Ht,_,V,J,pe,Ae,B,Xe),this.database=(0,Lt.cc)(`${Ht.name}.database.${l}`,"AngularFireDatabase",Ht.name,()=>{const jt=_.runOutsideAngular(()=>Ht.database(l||void 0));return Vt&&jt.useEmulator(...Vt),jt},[Vt])}list(t,o){const l=this.schedulers.ngZone.runOutsideAngular(()=>Nv(this.database,t));let f=l;return o&&(f=o(l)),function Vv(n,e){const t=e.schedulers.outsideAngular,o=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Lv(o,"update"),set:Lv(o,"set"),push:l=>o.push(l),remove:Pw(o),snapshotChanges:l=>pp(n,l,t).pipe(ze.iC),stateChanges:l=>xv(n,l,t).pipe(ze.iC),auditTrail:l=>function Fv(n,e,t){return function zD(n,e,t){return function id(n,e){return Tu(n,"value","on",e).pipe((0,Jt.U)(t=>{let o;return t.payload.forEach(l=>(o=l.key,!1)),{data:t,lastKeyToLoad:o}}))}(n,t).pipe(function ou(...n){const e=(0,_s.jO)(n);return(0,Fr.e)((t,o)=>{const l=n.length,f=new Array(l);let _=n.map(()=>!1),D=!1;for(let T=0;T<l;T++)(0,Ao.Xf)(n[T]).subscribe((0,un.x)(o,R=>{f[T]=R,!D&&!_[T]&&(_[T]=!0,(D=_.every(me.y))&&(_=null))},T_.Z));t.subscribe((0,un.x)(o,T=>{if(D){const R=[T,...f];o.next(e?e(...R):R)}}))})}(e),(0,Jt.U)(([l,f])=>{const _=l.lastKeyToLoad,D=f.map(T=>T.key);return{actions:f,lastKeyToLoad:_,loadedKeys:D}}),function qd(n){return(0,Fr.e)((e,t)=>{let o=!1,l=0;e.subscribe((0,un.x)(t,f=>(o||(o=!n(f,l++)))&&t.next(f)))})}(l=>-1===l.loadedKeys.indexOf(l.lastKeyToLoad)),(0,Jt.U)(l=>l.actions))}(n,xv(n,e).pipe(bc((l,f)=>[...l,f],[])),t)}(n,l,t).pipe(ze.iC),valueChanges:(l,f)=>pp(n,l,t).pipe((0,Jt.U)(D=>D.map(T=>f&&f.idField?Object.assign(Object.assign({},T.payload.val()),{[f.idField]:T.key}):T.payload.val())),ze.iC)}}(f,this)}object(t){return function ZD(n,e){return{query:n,snapshotChanges:()=>gp(n,e.schedulers.outsideAngular)().pipe(ze.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>gp(n,e.schedulers.outsideAngular)().pipe(ze.iC,(0,Jt.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Nv(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Lt.Dh),p.LFG(Lt.xv,8),p.LFG(Uv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ze.HU),p.LFG(qD,8),p.LFG(Va,8),p.LFG(Oe,8),p.LFG($e,8),p.LFG(ut,8),p.LFG(Ye,8),p.LFG(Tn,8),p.LFG(ri,8),p.LFG(ni,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),km=(()=>{class n{constructor(){z.Z.registerVersion("angularfire",ze.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Bv]}),n})();const xm="firebasestorage.googleapis.com",Fm="storageBucket";class En extends P.ZR{constructor(e,t,o=0){super(mp(e),`Firebase Storage: ${t} (${mp(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,En.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var an=(()=>{return(n=an||(an={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",an;var n})();function mp(n){return"storage/"+n}function $v(){return new En(an.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Wv(){return new En(an.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zv(){return new En(an.CANCELED,"User canceled the upload/download.")}function qv(){return new En(an.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sd(n){return new En(an.INVALID_ARGUMENT,n)}function Kv(){return new En(an.APP_DELETED,"The Firebase app was deleted.")}function od(n){return new En(an.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ad(n,e){return new En(an.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ld(n){throw new En(an.INTERNAL_ERROR,"Internal error: "+n)}class fr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let o;try{o=fr.makeFromUrl(e,t)}catch{return new fr(e,"")}if(""===o.path)return o;throw function eC(n){return new En(an.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let o=null;const l="([A-Za-z0-9.\\-_]+)",D=new RegExp("^gs://"+l+"(/(.*))?$","i");function R(bt){bt.path_=decodeURIComponent(bt.path)}const B=t.replace(/[.]/g,"\\."),jt=[{regex:D,indices:{bucket:1,path:3},postModify:function f(bt){"/"===bt.path.charAt(bt.path.length-1)&&(bt.path_=bt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${B}/v[A-Za-z0-9_]+/b/${l}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:R},{regex:new RegExp(`^https?://${t===xm?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${l}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:R}];for(let bt=0;bt<jt.length;bt++){const mr=jt[bt],Ji=mr.regex.exec(e);if(Ji){let y_=Ji[mr.indices.path];y_||(y_=""),o=new fr(Ji[mr.indices.bucket],y_),mr.postModify(o);break}}if(null==o)throw function Zv(n){return new En(an.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return o}}class Yv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function _p(n){return"string"==typeof n||n instanceof String}function eE(n){return Lm()&&n instanceof Blob}function Lm(){return typeof Blob<"u"&&!(0,P.UG)()}function Vm(n,e,t,o){if(o<e)throw sd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(o>t)throw sd(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ei(n,e,t){let o=e;return null==t&&(o=`https://${e}`),`${t}://${o}/v0${n}`}function tE(n){const e=encodeURIComponent;let t="?";for(const o in n)n.hasOwnProperty(o)&&(t=t+(e(o)+"=")+e(n[o])+"&");return t=t.slice(0,-1),t}var Xs=(()=>{return(n=Xs||(Xs={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Xs;var n})();function ws(n,e){const t=n>=500&&n<600,l=-1!==[408,429].indexOf(n),f=-1!==e.indexOf(n);return t||l||f}class oC{constructor(e,t,o,l,f,_,D,T,R,V,B,J=!0){this.url_=e,this.method_=t,this.headers_=o,this.body_=l,this.successCodes_=f,this.additionalRetryCodes_=_,this.callback_=D,this.errorCallback_=T,this.timeout_=R,this.progressCallback_=V,this.connectionFactory_=B,this.retry=J,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((pe,Ae)=>{this.resolve_=pe,this.reject_=Ae,this.start_()})}start_(){const t=(o,l)=>{const f=this.resolve_,_=this.reject_,D=l.connection;if(l.wasSuccessCode)try{const T=this.callback_(D,D.getResponse());!function sC(n){return void 0!==n}(T)?f():f(T)}catch(T){_(T)}else if(null!==D){const T=$v();T.serverResponse=D.getErrorText(),_(this.errorCallback_?this.errorCallback_(D,T):T)}else _(l.canceled?this.appDelete_?Kv():zv():Wv())};this.canceled_?t(0,new ud(!1,null,!0)):this.backoffId_=function Qv(n,e,t){let o=1,l=null,f=null,_=!1,D=0;function T(){return 2===D}let R=!1;function V(...at){R||(R=!0,e.apply(null,at))}function B(at){l=setTimeout(()=>{l=null,n(pe,T())},at)}function J(){f&&clearTimeout(f)}function pe(at,...Vt){if(R)return void J();if(at)return J(),void V.call(null,at,...Vt);if(T()||_)return J(),void V.call(null,at,...Vt);let jt;o<64&&(o*=2),1===D?(D=2,jt=0):jt=1e3*(o+Math.random()),B(jt)}let Ae=!1;function Xe(at){Ae||(Ae=!0,J(),!R&&(null!==l?(at||(D=2),clearTimeout(l),B(0)):at||(D=1)))}return B(0),f=setTimeout(()=>{_=!0,Xe(!0)},t),Xe}((o,l)=>{if(l)return void o(!1,new ud(!1,null,!0));const f=this.connectionFactory_();this.pendingConnection_=f;const _=D=>{null!==this.progressCallback_&&this.progressCallback_(D.loaded,D.lengthComputable?D.total:-1)};null!==this.progressCallback_&&f.addUploadProgressListener(_),f.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&f.removeUploadProgressListener(_),this.pendingConnection_=null;const D=f.getErrorCode()===Xs.NO_ERROR,T=f.getStatus();if(!D||ws(T,this.additionalRetryCodes_)&&this.retry){const V=f.getErrorCode()===Xs.ABORT;return void o(!1,new ud(!1,null,V))}const R=-1!==this.successCodes_.indexOf(T);o(!0,new ud(R,f))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Jv(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ud{constructor(e,t,o){this.wasSuccessCode=e,this.connection=t,this.canceled=!!o}}function cC(...n){const e=function vp(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let o=0;o<n.length;o++)t.append(n[o]);return t.getBlob()}if(Lm())return new Blob(n);throw new En(an.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ph{constructor(e,t){this.data=e,this.contentType=t||null}}function Ep(n,e){switch(n){case ai.RAW:return new Ph(Ip(e));case ai.BASE64:case ai.BASE64URL:return new Ph(Bm(n,e));case ai.DATA_URL:return new Ph(function Hm(n){const e=new Dp(n);return e.base64?Bm(ai.BASE64,e.rest):function Um(n){let e;try{e=decodeURIComponent(n)}catch{throw ad(ai.DATA_URL,"Malformed data URL.")}return Ip(e)}(e.rest)}(e),function hC(n){return new Dp(n).contentType}(e))}throw $v()}function Ip(n){const e=[];for(let t=0;t<n.length;t++){let o=n.charCodeAt(t);o<=127?e.push(o):o<=2047?e.push(192|o>>6,128|63&o):55296==(64512&o)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(o=65536|(1023&o)<<10|1023&n.charCodeAt(++t),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)):e.push(239,191,189):56320==(64512&o)?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(e)}function Bm(n,e){switch(n){case ai.BASE64:{const l=-1!==e.indexOf("-"),f=-1!==e.indexOf("_");if(l||f)throw ad(n,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ai.BASE64URL:{const l=-1!==e.indexOf("+"),f=-1!==e.indexOf("/");if(l||f)throw ad(n,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function nE(n){if(typeof atob>"u")throw function iC(n){return new En(an.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(l){throw l.message.includes("polyfill")?l:ad(n,"Invalid character found")}const o=new Uint8Array(t.length);for(let l=0;l<t.length;l++)o[l]=t.charCodeAt(l);return o}class Dp{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ad(ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=t[1]||null;null!=o&&(this.base64=function fC(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}class eo{constructor(e,t){let o=0,l="";eE(e)?(this.data_=e,o=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(eE(this.data_)){const l=function dC(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===l?null:new eo(l)}{const o=new Uint8Array(this.data_.buffer,e,t-e);return new eo(o,!0)}}static getBlob(...e){if(Lm()){const t=e.map(o=>o instanceof eo?o.data_:o);return new eo(cC.apply(null,t))}{const t=e.map(_=>_p(_)?Ep(ai.RAW,_).data:_.data_);let o=0;t.forEach(_=>{o+=_.byteLength});const l=new Uint8Array(o);let f=0;return t.forEach(_=>{for(let D=0;D<_.length;D++)l[f++]=_[D]}),new eo(l,!0)}}uploadData(){return this.data_}}function jm(n){let e;try{e=JSON.parse(n)}catch{return null}return function Xv(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function iE(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function pC(n,e){return e}class $r{constructor(e,t,o,l){this.server=e,this.local=t||e,this.writable=!!o,this.xform=l||pC}}let Cp=null;function cd(){if(Cp)return Cp;const n=[];n.push(new $r("bucket")),n.push(new $r("generation")),n.push(new $r("metageneration")),n.push(new $r("name","fullPath",!0));const t=new $r("name");t.xform=function e(f,_){return function gC(n){return!_p(n)||n.length<2?n:iE(n)}(_)},n.push(t);const l=new $r("size");return l.xform=function o(f,_){return void 0!==_?Number(_):_},n.push(l),n.push(new $r("timeCreated")),n.push(new $r("updated")),n.push(new $r("md5Hash",null,!0)),n.push(new $r("cacheControl",null,!0)),n.push(new $r("contentDisposition",null,!0)),n.push(new $r("contentEncoding",null,!0)),n.push(new $r("contentLanguage",null,!0)),n.push(new $r("contentType",null,!0)),n.push(new $r("metadata","customMetadata",!0)),Cp=n,Cp}function Gm(n,e,t){const o=jm(e);return null===o?null:function mC(n,e,t){const o={type:"file"},l=t.length;for(let f=0;f<l;f++){const _=t[f];o[_.local]=_.xform(o,e[_.server])}return function sE(n,e){Object.defineProperty(n,"ref",{get:function t(){const f=new fr(n.bucket,n.fullPath);return e._makeStorageReference(f)}})}(o,n),o}(n,o,t)}function pr(n,e){const t={},o=e.length;for(let l=0;l<o;l++){const f=e[l];f.writable&&(t[f.server]=n[f.local])}return JSON.stringify(t)}const Su="prefixes";class Yo{constructor(e,t,o,l){this.url=e,this.method=t,this.handler=o,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function bs(n){if(!n)throw $v()}function Nh(n,e){return function t(o,l){const f=Gm(n,l,e);return bs(null!==f),f}}function il(n){return function e(t,o){let l;return l=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Nw(){return new En(an.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function JD(){return new En(an.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function QD(n){return new En(an.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function XD(n){return new En(an.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):o,l.status=t.getStatus(),l.serverResponse=o.serverResponse,l}}function kh(n){const e=il(n);return function t(o,l){let f=e(o,l);return 404===o.getStatus()&&(f=function Gv(n){return new En(an.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),f.serverResponse=l.serverResponse,f}}function Wm(n,e,t){const l=Ei(e.fullServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,D=new Yo(l,"GET",Nh(n,t),_);return D.errorHandler=kh(e),D}function EC(n,e,t,o,l){const f={};f.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(f.delimiter=t),o&&(f.pageToken=o),l&&(f.maxResults=l);const D=Ei(e.bucketOnlyServerUrl(),n.host,n._protocol),R=n.maxOperationRetryTime,V=new Yo(D,"GET",function Oh(n,e){return function t(o,l){const f=function kw(n,e,t){const o=jm(t);return null===o?null:function yC(n,e,t){const o={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Su])for(const l of t[Su]){const f=l.replace(/\/$/,""),_=n._makeStorageReference(new fr(e,f));o.prefixes.push(_)}if(t.items)for(const l of t.items){const f=n._makeStorageReference(new fr(e,l.name));o.items.push(f)}return o}(n,e,o)}(n,e,l);return bs(null!==f),f}}(n,e.bucket),R);return V.urlParams=f,V.errorHandler=il(e),V}function xh(n,e,t){const o=Object.assign({},t);return o.fullPath=n.path,o.size=e.size(),o.contentType||(o.contentType=function uE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),o}class Zm{constructor(e,t,o,l){this.current=e,this.total=t,this.finalized=!!o,this.metadata=l||null}}function bp(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{bs(!1)}return bs(!!t&&-1!==(e||["active"]).indexOf(t)),t}const dE={STATE_CHANGED:"state_changed"},gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hE(n){switch(n){case"running":case"pausing":case"canceling":return gr.RUNNING;case"paused":return gr.PAUSED;case"success":return gr.SUCCESS;case"canceled":return gr.CANCELED;default:return gr.ERROR}}class wC{constructor(e,t,o){if(function Ow(n){return"function"==typeof n}(e)||null!=t||null!=o)this.next=e,this.error=t??void 0,this.complete=o??void 0;else{const f=e;this.next=f.next,this.error=f.error,this.complete=f.complete}}}function Fh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class bC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,o,l){if(this.sent_)throw ld("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==l)for(const f in l)l.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,l[f].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ld("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ld("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ld("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ld("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class TC extends bC{initXhr(){this.xhr_.responseType="text"}}function qi(){return new TC}class _E{constructor(e,t,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=o,this._mappings=cd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=l=>{if(this._request=void 0,this._chunkMultiplier=1,l._codeEquals(an.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const f=this.isExponentialBackoffExpired();if(ws(l.status,[])){if(!f)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();l=Wv()}this._error=l,this._transition("error")}},this._metadataErrorHandler=l=>{this._request=void 0,l._codeEquals(an.CANCELED)?this.completeTransitions_():(this._error=l,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((l,f)=>{this._resolve=l,this._reject=f,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,o])=>{switch(this._state){case"running":e(t,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const o=function DC(n,e,t,o,l){const f=e.bucketOnlyServerUrl(),_=xh(e,o,l),D={name:_.fullPath},T=Ei(f,n.host,n._protocol),V={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":_.contentType,"Content-Type":"application/json; charset=utf-8"},B=pr(_,t),Ae=new Yo(T,"POST",function pe(Xe){let at;bp(Xe);try{at=Xe.getResponseHeader("X-Goog-Upload-URL")}catch{bs(!1)}return bs(_p(at)),at},n.maxUploadRetryTime);return Ae.urlParams=D,Ae.headers=V,Ae.body=B,Ae.errorHandler=il(e),Ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(o,qi,e,t);this._request=l,l.getPromise().then(f=>{this._request=void 0,this._uploadUrl=f,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,o)=>{const l=function cE(n,e,t,o){const T=new Yo(t,"POST",function f(R){const V=bp(R,["active","final"]);let B=null;try{B=R.getResponseHeader("X-Goog-Upload-Size-Received")}catch{bs(!1)}B||bs(!1);const J=Number(B);return bs(!isNaN(J)),new Zm(J,o.size(),"final"===V)},n.maxUploadRetryTime);return T.headers={"X-Goog-Upload-Command":"query"},T.errorHandler=il(e),T}(this._ref.storage,this._ref._location,e,this._blob),f=this._ref.storage._makeRequest(l,qi,t,o);this._request=f,f.getPromise().then(_=>{this._request=void 0,this._updateProgress(_.current),this._needToFetchStatus=!1,_.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Zm(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((l,f)=>{let _;try{_=function CC(n,e,t,o,l,f,_,D){const T=new Zm(0,0);if(_?(T.current=_.current,T.total=_.total):(T.current=0,T.total=o.size()),o.size()!==T.total)throw function nC(){return new En(an.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const R=T.total-T.current;let V=R;l>0&&(V=Math.min(V,l));const B=T.current;let pe="";pe=0===V?"finalize":R===V?"upload, finalize":"upload";const Ae={"X-Goog-Upload-Command":pe,"X-Goog-Upload-Offset":`${T.current}`},Xe=o.slice(B,B+V);if(null===Xe)throw qv();const jt=new Yo(t,"POST",function at(bt,mr){const Ji=bp(bt,["active","final"]),hw=T.current+V,y_=o.size();let fw;return fw="final"===Ji?Nh(e,f)(bt,mr):null,new Zm(hw,y_,"final"===Ji,fw)},e.maxUploadRetryTime);return jt.headers=Ae,jt.body=Xe.uploadData(),jt.progressCallback=D||null,jt.errorHandler=il(n),jt}(this._ref._location,this._ref.storage,o,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(T){return this._error=T,void this._transition("error")}const D=this._ref.storage._makeRequest(_,qi,l,f,!1);this._request=D,D.getPromise().then(T=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(T.current),T.finalized?(this._metadata=T.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const o=Wm(this._ref.storage,this._ref._location,this._mappings),l=this._ref.storage._makeRequest(o,qi,e,t);this._request=l,l.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const o=function wp(n,e,t,o,l){const f=e.bucketOnlyServerUrl(),_={"X-Goog-Upload-Protocol":"multipart"},T=function D(){let jt="";for(let bt=0;bt<2;bt++)jt+=Math.random().toString().slice(2);return jt}();_["Content-Type"]="multipart/related; boundary="+T;const R=xh(e,o,l),V=pr(R,t),pe=eo.getBlob("--"+T+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+V+"\r\n--"+T+"\r\nContent-Type: "+R.contentType+"\r\n\r\n",o,"\r\n--"+T+"--");if(null===pe)throw qv();const Ae={name:R.fullPath},Xe=Ei(f,n.host,n._protocol),Vt=n.maxUploadRetryTime,Ht=new Yo(Xe,"POST",Nh(n,t),Vt);return Ht.urlParams=Ae,Ht.headers=_,Ht.body=pe.uploadData(),Ht.errorHandler=il(e),Ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(o,qi,e,t);this._request=l,l.getPromise().then(f=>{this._request=void 0,this._metadata=f,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=zv(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,o,l){const f=new wC(t||void 0,o||void 0,l||void 0);return this._addObserver(f),()=>{this._removeObserver(f)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hE(this._state)){case gr.SUCCESS:Fh(this._resolve.bind(null,this.snapshot))();break;case gr.CANCELED:case gr.ERROR:Fh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hE(this._state)){case gr.RUNNING:case gr.PAUSED:e.next&&Fh(e.next.bind(e,this.snapshot))();break;case gr.SUCCESS:e.complete&&Fh(e.complete.bind(e))();break;default:e.error&&Fh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Mu{constructor(e,t){this._service=e,this._location=t instanceof fr?t:fr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mu(e,t)}get root(){const e=new fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iE(this._location.path)}get storage(){return this._service}get parent(){const e=function rE(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new fr(this._location.bucket,e);return new Mu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw od(e)}}function DE(n,e,t){return Km.apply(this,arguments)}function Km(){return(Km=(0,xi.Z)(function*(n,e,t){const l=yield MC(n,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),null!=l.nextPageToken&&(yield DE(n,e,l.nextPageToken))})).apply(this,arguments)}function MC(n,e){null!=e&&"number"==typeof e.maxResults&&Vm("options.maxResults",1,1e3,e.maxResults);const t=e||{},o=EC(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(o,qi)}function Fw(n){n._throwIfRoot("getDownloadURL");const e=function IC(n,e,t){const l=Ei(e.fullServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,D=new Yo(l,"GET",function vC(n,e){return function t(o,l){const f=Gm(n,l,e);return bs(null!==f),function _C(n,e,t,o){const l=jm(e);if(null===l||!_p(l.downloadTokens))return null;const f=l.downloadTokens;if(0===f.length)return null;const _=encodeURIComponent;return f.split(",").map(R=>{const B=n.fullPath;return Ei("/b/"+_(n.bucket)+"/o/"+_(B),t,o)+tE({alt:"media",token:R})})[0]}(f,l,n.host,n._protocol)}}(n,t),_);return D.errorHandler=kh(e),D}(n.storage,n._location,cd());return n.storage.makeRequestWithTokens(e,qi).then(t=>{if(null===t)throw function rC(){return new En(an.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function RC(n,e){const t=function $m(n,e){const t=e.split("/").filter(o=>o.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),o=new fr(n._location.bucket,t);return new Mu(n.storage,o)}function PC(n,e){if(n instanceof Tp){const t=n;if(null==t._bucket)throw function tC(){return new En(an.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fm+"' property when initializing the app?")}();const o=new Mu(t,t._bucket);return null!=e?PC(o,e):o}return void 0!==e?RC(n,e):n}function Bw(n,e){if(e&&function Vw(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Tp)return function Uw(n,e){return new Mu(n,e)}(n,e);throw sd("To use ref(service, url), the first argument must be a Storage instance.")}return PC(n,e)}function Lh(n,e){const t=e?.[Fm];return null==t?null:fr.makeFromBucketSpec(t,n)}class Tp{constructor(e,t,o,l,f){this.app=e,this._authProvider=t,this._appCheckProvider=o,this._url=l,this._firebaseVersion=f,this._bucket=null,this._host=xm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=l?fr.makeFromBucketSpec(l,this._host):Lh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?fr.makeFromBucketSpec(this._url,e):Lh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Vm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Vm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,xi.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const o=yield t.getToken();if(null!==o)return o.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,xi.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mu(this,e)}_makeRequest(e,t,o,l,f=!0){if(this._deleted)return new Yv(Kv());{const _=function yp(n,e,t,o,l,f,_=!0){const D=tE(n.urlParams),T=n.url+D,R=Object.assign({},n.headers);return function lC(n,e){e&&(n["X-Firebase-GMPID"]=e)}(R,e),function Rh(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(R,t),function aC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(R,f),function uC(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(R,o),new oC(T,n.method,R,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,l,_)}(e,this._appId,o,l,t,this._firebaseVersion,f);return this._requests.add(_),_.getPromise().then(()=>this._requests.delete(_),()=>this._requests.delete(_)),_}}makeRequestWithTokens(e,t){var o=this;return(0,xi.Z)(function*(){const[l,f]=yield Promise.all([o._getAuthToken(),o._getAppCheckToken()]);return o._makeRequest(e,t,l,f).getPromise()})()}}const Vh="@firebase/storage";function bE(n,e){return Bw(n=(0,P.m9)(n),e)}function LC(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),l=n.getProvider("app-check-internal");return new Tp(t,o,l,e,Fi.SDK_VERSION)}!function Zw(){(0,Fi._registerComponent)(new gi.wA("storage",LC,"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(Vh,"0.11.2",""),(0,Fi.registerVersion)(Vh,"0.11.2","esm2017")}();class Ap{constructor(e,t,o){this._delegate=e,this.task=t,this.ref=o}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Jm{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ap(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(o=>{if(e)return e(new Ap(o,this,this._ref))},t)}on(e,t,o,l){let f;return t&&(f="function"==typeof t?_=>t(new Ap(_,this,this._ref)):{next:t.next?_=>t.next(new Ap(_,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,f,o||void 0,l||void 0)}}class Xm{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sl(e,this._service))}get items(){return this._delegate.items.map(e=>new sl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Ww(n,e){return RC(n,e)}(this._delegate,e);return new sl(t,this.storage)}get root(){return new sl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Jm(function OC(n,e,t){return function vE(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new _E(n,new eo(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ai.RAW,o){this._throwIfRoot("putString");const l=Ep(t,e),f=Object.assign({},o);return null==f.contentType&&null!=l.contentType&&(f.contentType=l.contentType),new Jm(new _E(this._delegate,new eo(l.data,!0),f),this)}listAll(){return function Gw(n){return function IE(n){const e={prefixes:[],items:[]};return DE(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new Xm(e,this.storage))}list(e){return function $w(n,e){return MC(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Xm(t,this.storage))}getMetadata(){return function kC(n){return function CE(n){n._throwIfRoot("getMetadata");const e=Wm(n.storage,n._location,cd());return n.storage.makeRequestWithTokens(e,qi)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function jw(n,e){return function xw(n,e){n._throwIfRoot("updateMetadata");const t=function zm(n,e,t,o){const f=Ei(e.fullServerUrl(),n.host,n._protocol),D=pr(t,o),R=n.maxOperationRetryTime,V=new Yo(f,"PATCH",Nh(n,o),R);return V.headers={"Content-Type":"application/json; charset=utf-8"},V.body=D,V.errorHandler=kh(e),V}(n.storage,n._location,e,cd());return n.storage.makeRequestWithTokens(t,qi)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function xC(n){return Fw(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Sp(n){return function Lw(n){n._throwIfRoot("deleteObject");const e=function lE(n,e){const o=Ei(e.fullServerUrl(),n.host,n._protocol),D=new Yo(o,"DELETE",function _(T,R){},n.maxOperationRetryTime);return D.successCodes=[200,204],D.errorHandler=kh(e),D}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,qi)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw od(e)}}class Ki{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(TE(e))throw sd("ref() expected a child path but got a URL, use refFromURL instead.");return new sl(bE(this._delegate,e),this)}refFromURL(e){if(!TE(e))throw sd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fr.makeFromUrl(e,this._delegate.host)}catch{throw sd("refFromUrl() expected a valid full URL but got an invalid one.")}return new sl(bE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,o={}){!function FC(n,e,t,o={}){!function Hw(n,e,t,o={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:l}=o;l&&(n._overrideAuthToken="string"==typeof l?l:(0,P.Sg)(l,n.app.options.projectId))}(n,e,t,o)}(this._delegate,e,t,o)}}function TE(n){return/^[A-Za-z]+:\/\//.test(n)}function Yi(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),o=n.getProvider("storage").getImmediate({identifier:e});return new Ki(t,o)}function SE(n){const e=function t_(n){return new So.y(e=>{const t=_=>e.next(_);t(n.snapshot);const f=n.on("state_changed",t);return n.then(_=>{t(_),e.complete()},_=>{t(n.snapshot),(_=>{e.error(_)})(_)}),function(){f()}}).pipe(function Hv(n,e=su.z){return(0,Fr.e)((t,o)=>{let l=null,f=null,_=null;const D=()=>{if(l){l.unsubscribe(),l=null;const R=f;f=null,o.next(R)}};function T(){const R=_+n,V=e.now();if(V<R)return l=this.schedule(void 0,R-V),void o.add(l);D()}t.subscribe((0,un.x)(o,R=>{f=R,_=e.now(),l||(l=e.schedule(T,n),o.add(l))},()=>{D(),o.complete()},void 0,()=>{f=l=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Jt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Mp(n){return{getDownloadURL:()=>Ni(void 0).pipe(ze.fc,er(()=>n.getDownloadURL()),ze.iC),getMetadata:()=>Ni(void 0).pipe(ze.fc,er(()=>n.getMetadata()),ze.iC),delete:()=>(0,Xr.D)(n.delete()),child:e=>Mp(n.child(e)),updateMetadata:e=>(0,Xr.D)(n.updateMetadata(e)),put:(e,t)=>SE(n.put(e,t)),putString:(e,t,o)=>SE(n.putString(e,t,o)),list:e=>(0,Xr.D)(n.list(e)),listAll:()=>(0,Xr.D)(n.listAll())}}!function UC(n){const e={TaskState:gr,TaskEvent:dE,StringFormat:ai,Storage:Ki,Reference:sl};n.INTERNAL.registerComponent(new gi.wA("storage-compat",Yi,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(iI.Z);const n_=new p.OlP("angularfire2.storageBucket"),AE=new p.OlP("angularfire2.storage.maxUploadRetryTime"),ME=new p.OlP("angularfire2.storage.maxOperationRetryTime"),BC=new p.OlP("angularfire2.storage.use-emulator");let r_=(()=>{class n{constructor(t,o,l,f,_,D,T,R,V,B){const J=(0,Lt.on)(t,_,o);this.storage=(0,Lt.cc)(`${J.name}.storage.${l}`,"AngularFireStorage",J.name,()=>{const pe=_.runOutsideAngular(()=>J.storage(l||void 0)),Ae=V;return Ae&&pe.useEmulator(...Ae),T&&pe.setMaxUploadRetryTime(T),R&&pe.setMaxOperationRetryTime(R),pe},[T,R])}ref(t){return Mp(this.storage.ref(t))}refFromURL(t){return Mp(this.storage.refFromURL(t))}upload(t,o,l){return Mp(this.storage.ref(t)).put(o,l)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Lt.Dh),p.LFG(Lt.xv,8),p.LFG(n_,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ze.HU),p.LFG(AE,8),p.LFG(ME,8),p.LFG(BC,8),p.LFG(ni,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),RE=(()=>{class n{constructor(){z.Z.registerVersion("angularfire",ze.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[r_],imports:[jC]}),n})();class Qo{constructor(e,t){this.db=e,this.storage=t,this.basePath="/uploads",this.usrImg=""}pushFileToStorage(e){const t=`${this.basePath}/${e.file.name}`,o=this.storage.ref(t),l=this.storage.upload(t,e.file);return localStorage.getItem("userId"),l.snapshotChanges().pipe(function Ua(n){return(0,Fr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{o.getDownloadURL().subscribe(_=>{e.url=_,e.name=e.file.name,e.desc=e.desc,e.title=e.title,e.userID=e.userID,this.saveFileData(e)})})).subscribe(),l.percentageChanges()}saveFileData(e){this.db.list(this.basePath).push(e)}getFilesByUserId(e,t){return this.db.list(this.basePath,o=>o.orderByChild("userID").equalTo(e).limitToLast(t))}deleteFile(e){this.deleteFileDatabase(e.key).then(()=>{this.deleteFileStorage(e.name)}).catch(t=>console.log(t))}deleteFileDatabase(e){return this.db.list(this.basePath).remove(e)}deleteFileStorage(e){this.storage.ref(this.basePath).child(e).delete()}}Qo.\u0275fac=function(e){return new(e||Qo)(p.LFG(Bv),p.LFG(r_))},Qo.\u0275prov=p.Yz7({token:Qo,factory:Qo.\u0275fac,providedIn:"root"});const i_=function(n){return{width:n}};function ol(n,e){if(1&n&&(p.TgZ(0,"div",10)(1,"div",11),p._uU(2),p.qZA()()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngStyle",p.VKq(3,i_,t.percentage+"%")),p.uIk("aria-valuenow",t.percentage),p.xp6(1),p.hij(" ",t.percentage,"% ")}}class dd{constructor(e){this.uploadService=e,this.userId=localStorage.getItem("userId")||"",this.desc="",this.title="",this.percentage=0,this.userId=""}ngOnInit(){}selectFile(e,t,o,l){this.selectedFiles=e.target.files,this.desc=t,this.title=o,this.userId=l}upload(){if(this.selectedFiles){const e=this.selectedFiles.item(0);this.selectedFiles=void 0,e&&(this.currentFileUpload=new Vi(e,this.desc,this.title,this.userId),this.uploadService.pushFileToStorage(this.currentFileUpload).subscribe(t=>{this.percentage=Math.round(t||0)},t=>{console.log(t)}))}}}dd.\u0275fac=function(e){return new(e||dd)(p.Y36(Qo))},dd.\u0275cmp=p.Xpm({type:dd,selectors:[["app-upload-form"]],inputs:{userId:"userId"},decls:16,vars:2,consts:[[1,"row"],[1,"col-8"],["type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"col-4"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["type","text","placeholder","Enter title",1,"form-control"],["title",""],["type","text","placeholder","Enter description",1,"form-control"],["desc",""],["class","progress mt-2",4,"ngIf"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(e,t){if(1&e){const o=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"label")(3,"input",2),p.NdJ("change",function(f){p.CHM(o);const _=p.MAs(14),D=p.MAs(10);return p.KtG(t.selectFile(f,_.value,D.value,t.userId))}),p.qZA()()(),p.TgZ(4,"div",3)(5,"button",4),p.NdJ("click",function(){return t.upload()}),p._uU(6," Upload "),p.qZA()(),p.TgZ(7,"div",3),p._uU(8," title: "),p._UZ(9,"input",5,6),p.qZA(),p.TgZ(11,"div",3),p._uU(12," description: "),p._UZ(13,"input",7,8),p.qZA()(),p.YNc(15,ol,3,5,"div",9)}2&e&&(p.xp6(5),p.Q6J("disabled",!t.selectedFiles),p.xp6(10),p.Q6J("ngIf",t.currentFileUpload))},dependencies:[Yt,is]});class Ru{constructor(e){this.uploadService=e}ngOnInit(){}deleteFileUpload(e){this.uploadService.deleteFile(e)}}function Jo(n,e){if(1&n&&(p.TgZ(0,"li",5),p._UZ(1,"app-upload-details",6),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Q6J("fileUpload",t)}}Ru.\u0275fac=function(e){return new(e||Ru)(p.Y36(Qo))},Ru.\u0275cmp=p.Xpm({type:Ru,selectors:[["app-upload-details"]],inputs:{fileUpload:"fileUpload"},decls:6,vars:5,consts:[[3,"href"],["width","500","height","300",3,"src"],[1,"btn","btn-danger","btn-sm",2,"float","right",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"a",0),p._uU(1),p.qZA(),p._UZ(2,"img",1),p._uU(3),p.TgZ(4,"button",2),p.NdJ("click",function(){return t.deleteFileUpload(t.fileUpload)}),p._uU(5," Delete\n"),p.qZA()),2&e&&(p.s9C("href",t.fileUpload.url,p.LSH),p.xp6(1),p.Oqu(t.fileUpload.name),p.xp6(1),p.s9C("src",t.fileUpload.url,p.LSH),p.xp6(1),p.AsE("\ndesc:",t.fileUpload.desc,"\ntitle:",t.fileUpload.title," "))}});class Uh{constructor(e){this.uploadService=e,this.userId=localStorage.getItem("userId")||"",this.imgUsr="",this.imgUsr=e.usrImg}ngOnInit(){this.uploadService.getFilesByUserId(this.userId,6).snapshotChanges().pipe((0,Jt.U)(e=>e.map(t=>({key:t.payload.key,...t.payload.val()})))).subscribe(e=>{this.fileUploads=e})}}Uh.\u0275fac=function(e){return new(e||Uh)(p.Y36(Qo))},Uh.\u0275cmp=p.Xpm({type:Uh,selectors:[["app-upload-list"]],inputs:{userId:"userId"},decls:6,vars:2,consts:[[3,"src"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[3,"fileUpload"]],template:function(e,t){1&e&&(p._UZ(0,"img",0),p.TgZ(1,"div",1)(2,"div",2),p._uU(3,"List of Files"),p.qZA(),p.TgZ(4,"ul",3),p.YNc(5,Jo,2,1,"li",4),p.qZA()()),2&e&&(p.s9C("src",t.imgUsr,p.LSH),p.xp6(5),p.Q6J("ngForOf",t.fileUploads))},dependencies:[ui,Ru],styles:[".btn[_ngcontent-%COMP%]{height:30px}"]});class Rp{constructor(e,t){this.afAuth=e,this.upFile=t}ngOnInit(){}loginWithGoogle(){this.afAuth.signInWithPopup(new z.Z.auth.GoogleAuthProvider).then(e=>{const t=e.user?.uid;e.user?.photoURL&&(this.upFile.usrImg=e.user?.photoURL),t&&localStorage.setItem("userId",t)}).catch(e=>{console.log(e)})}}function $C(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"h3"),p._uU(2),p.qZA(),p.TgZ(3,"button",2),p.NdJ("click",function(){p.CHM(t);const l=p.oxw();return p.KtG(l.logout())}),p._uU(4,"Logout"),p.qZA(),p.TgZ(5,"div",3),p._UZ(6,"app-upload-form",4),p.qZA(),p.TgZ(7,"div",5),p._UZ(8,"app-upload-list",4),p.qZA()()}if(2&n){const t=e.ngIf;p.xp6(2),p.hij("Welcome, ",t.displayName,""),p.xp6(4),p.Q6J("userId",t.uid),p.xp6(2),p.Q6J("userId",t.uid)}}function Kw(n,e){1&n&&(p.TgZ(0,"div"),p._UZ(1,"app-login"),p.qZA())}Rp.\u0275fac=function(e){return new(e||Rp)(p.Y36(Va),p.Y36(Qo))},Rp.\u0275cmp=p.Xpm({type:Rp,selectors:[["app-login"]],decls:2,vars:0,consts:[[3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return t.loginWithGoogle()}),p._uU(1,"sign in with Google"),p.qZA())}});class Bh{constructor(e){this.afAuth=e,this.title="Angular 15 Firebase Storage example",this.user=e.authState}logout(){this.afAuth.signOut()}}Bh.\u0275fac=function(e){return new(e||Bh)(p.Y36(Va))},Bh.\u0275cmp=p.Xpm({type:Bh,selectors:[["app-root"]],decls:5,vars:6,consts:[[1,"container",2,"width","600px"],[4,"ngIf"],[3,"click"],[1,"my-3"],[3,"userId"],[1,"my-2"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.YNc(1,$C,9,3,"div",1),p.ALo(2,"async"),p.YNc(3,Kw,2,0,"div",1),p.ALo(4,"async"),p.qZA()),2&e&&(p.xp6(1),p.Q6J("ngIf",p.lcZ(2,2,t.user)),p.xp6(2),p.Q6J("ngIf",!p.lcZ(4,4,t.user)))},dependencies:[Yt,dd,Uh,Rp,ss]});const Me=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Fe}),Fe="always";let D0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const sw=new p.OlP("NgModelWithFormControlWarning");let U0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[D0]}),n})(),Rb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Me,useValue:t.callSetDisabledState??Fe}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[U0]}),n})(),Pb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sw,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Me,useValue:t.callSetDisabledState??Fe}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[U0]}),n})();class Vp{}Vp.\u0275fac=function(e){return new(e||Vp)},Vp.\u0275mod=p.oAB({type:Vp,bootstrap:[Bh]}),Vp.\u0275inj=p.cJS({providers:[Va],imports:[Fl,Lt.hO.initializeApp({apiKey:"AIzaSyBEkye6a1lIy24yNQt2cu1Mcn8yNcEfe1k",authDomain:"fir-authenticationstorag-94ee7.firebaseapp.com",projectId:"fir-authenticationstorag-94ee7",storageBucket:"fir-authenticationstorag-94ee7.appspot.com",messagingSenderId:"799001717258",appId:"1:799001717258:web:4a0c76545907f467ebcdf3",measurementId:"G-R3ZY6RF15D"}),km,RE,Rb,Pb]}),Jr().bootstrapModule(Vp).catch(n=>console.error(n))},8306:(et,we,k)=>{k.d(we,{y:()=>j});var p=k(930),X=k(727),N=k(8822),se=k(4671);var ge=k(2416),le=k(576),_e=k(2806);let j=(()=>{class Re{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const ie=new Re;return ie.source=this,ie.operator=xe,ie}subscribe(xe,ie,ye){const de=function He(Re){return Re&&Re instanceof p.Lv||function Y(Re){return Re&&(0,le.m)(Re.next)&&(0,le.m)(Re.error)&&(0,le.m)(Re.complete)}(Re)&&(0,X.Nn)(Re)}(xe)?xe:new p.Hp(xe,ie,ye);return(0,_e.x)(()=>{const{operator:be,source:Ee}=this;de.add(be?be.call(de,Ee):Ee?this._subscribe(de):this._trySubscribe(de))}),de}_trySubscribe(xe){try{return this._subscribe(xe)}catch(ie){xe.error(ie)}}forEach(xe,ie){return new(ie=H(ie))((ye,de)=>{const be=new p.Hp({next:Ee=>{try{xe(Ee)}catch(fe){de(fe),be.unsubscribe()}},error:de,complete:ye});this.subscribe(be)})}_subscribe(xe){var ie;return null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(xe)}[N.L](){return this}pipe(...xe){return function oe(Re){return 0===Re.length?se.y:1===Re.length?Re[0]:function(xe){return Re.reduce((ie,ye)=>ye(ie),xe)}}(xe)(this)}toPromise(xe){return new(xe=H(xe))((ie,ye)=>{let de;this.subscribe(be=>de=be,be=>ye(be),()=>ie(de))})}}return Re.create=tt=>new Re(tt),Re})();function H(Re){var tt;return null!==(tt=Re??ge.v.Promise)&&void 0!==tt?tt:Promise}},7579:(et,we,k)=>{k.d(we,{x:()=>ge});var p=k(8306),X=k(727);const se=(0,k(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),oe=k(2806);let ge=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new le(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new se}next(H){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:He,observers:Re}=this;return Y||He?X.Lc:(this.currentObservers=null,Re.push(H),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Re,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:He,isStopped:Re}=this;Y?H.error(He):Re&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return _e.create=(j,H)=>new le(j,H),_e})();class le extends ge{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,j)}error(j){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==Y?Y:X.Lc}}},930:(et,we,k)=>{k.d(we,{Hp:()=>xe,Lv:()=>Y});var p=k(576),X=k(727),N=k(2416),se=k(7849),re=k(5032);const oe=_e("C",void 0,void 0);function _e(Ee,fe,De){return{kind:Ee,value:fe,error:De}}var j=k(3410),H=k(2806);class Y extends X.w0{constructor(fe){super(),this.isStopped=!1,fe?(this.destination=fe,(0,X.Nn)(fe)&&fe.add(this)):this.destination=be}static create(fe,De,Ne){return new xe(fe,De,Ne)}next(fe){this.isStopped?de(function le(Ee){return _e("N",Ee,void 0)}(fe),this):this._next(fe)}error(fe){this.isStopped?de(function ge(Ee){return _e("E",void 0,Ee)}(fe),this):(this.isStopped=!0,this._error(fe))}complete(){this.isStopped?de(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(fe){this.destination.next(fe)}_error(fe){try{this.destination.error(fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Re(Ee,fe){return He.call(Ee,fe)}class tt{constructor(fe){this.partialObserver=fe}next(fe){const{partialObserver:De}=this;if(De.next)try{De.next(fe)}catch(Ne){ie(Ne)}}error(fe){const{partialObserver:De}=this;if(De.error)try{De.error(fe)}catch(Ne){ie(Ne)}else ie(fe)}complete(){const{partialObserver:fe}=this;if(fe.complete)try{fe.complete()}catch(De){ie(De)}}}class xe extends Y{constructor(fe,De,Ne){let Se;if(super(),(0,p.m)(fe)||!fe)Se={next:fe??void 0,error:De??void 0,complete:Ne??void 0};else{let U;this&&N.v.useDeprecatedNextContext?(U=Object.create(fe),U.unsubscribe=()=>this.unsubscribe(),Se={next:fe.next&&Re(fe.next,U),error:fe.error&&Re(fe.error,U),complete:fe.complete&&Re(fe.complete,U)}):Se=fe}this.destination=new tt(Se)}}function ie(Ee){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ee):(0,se.h)(Ee)}function de(Ee,fe){const{onStoppedNotification:De}=N.v;De&&j.z.setTimeout(()=>De(Ee,fe))}const be={closed:!0,next:re.Z,error:function ye(Ee){throw Ee},complete:re.Z}},727:(et,we,k)=>{k.d(we,{Lc:()=>oe,w0:()=>re,Nn:()=>ge});var p=k(576);const N=(0,k(3888).d)(_e=>function(H){_e(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,He)=>`${He+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var se=k(8737);class re{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Re of H)Re.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,p.m)(Y))try{Y()}catch(Re){j=Re instanceof N?Re.errors:[Re]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Re of He)try{le(Re)}catch(tt){j=j??[],tt instanceof N?j=[...j,...tt.errors]:j.push(tt)}}if(j)throw new N(j)}}add(j){var H;if(j&&j!==this)if(this.closed)le(j);else{if(j instanceof re){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,se.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,se.P)(H,j),j instanceof re&&j._removeParent(this)}}re.EMPTY=(()=>{const _e=new re;return _e.closed=!0,_e})();const oe=re.EMPTY;function ge(_e){return _e instanceof re||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function le(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2416:(et,we,k)=>{k.d(we,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,we,k)=>{k.d(we,{E:()=>X});const X=new(k(8306).y)(re=>re.complete())},8996:(et,we,k)=>{k.d(we,{D:()=>fe});var p=k(8421),X=k(5363),N=k(9468),oe=k(8306),le=k(2202),_e=k(576),j=k(9672);function Y(De,Ne){if(!De)throw new Error("Iterable cannot be null");return new oe.y(Se=>{(0,j.f)(Se,Ne,()=>{const U=De[Symbol.asyncIterator]();(0,j.f)(Se,Ne,()=>{U.next().then(ue=>{ue.done?Se.complete():Se.next(ue.value)})},0,!0)})})}var He=k(3670),Re=k(8239),tt=k(1144),xe=k(6495),ie=k(2206),ye=k(4532),de=k(3260);function fe(De,Ne){return Ne?function Ee(De,Ne){if(null!=De){if((0,He.c)(De))return function se(De,Ne){return(0,p.Xf)(De).pipe((0,N.R)(Ne),(0,X.Q)(Ne))}(De,Ne);if((0,tt.z)(De))return function ge(De,Ne){return new oe.y(Se=>{let U=0;return Ne.schedule(function(){U===De.length?Se.complete():(Se.next(De[U++]),Se.closed||this.schedule())})})}(De,Ne);if((0,Re.t)(De))return function re(De,Ne){return(0,p.Xf)(De).pipe((0,N.R)(Ne),(0,X.Q)(Ne))}(De,Ne);if((0,ie.D)(De))return Y(De,Ne);if((0,xe.T)(De))return function H(De,Ne){return new oe.y(Se=>{let U;return(0,j.f)(Se,Ne,()=>{U=De[le.h](),(0,j.f)(Se,Ne,()=>{let ue,$;try{({value:ue,done:$}=U.next())}catch(q){return void Se.error(q)}$?Se.complete():Se.next(ue)},0,!0)}),()=>(0,_e.m)(U?.return)&&U.return()})}(De,Ne);if((0,de.L)(De))return function be(De,Ne){return Y((0,de.Q)(De),Ne)}(De,Ne)}throw(0,ye.z)(De)}(De,Ne):(0,p.Xf)(De)}},8421:(et,we,k)=>{k.d(we,{Xf:()=>He});var p=k(655),X=k(1144),N=k(8239),se=k(8306),re=k(3670),oe=k(2206),ge=k(4532),le=k(6495),_e=k(3260),j=k(576),H=k(7849),Y=k(8822);function He(Ee){if(Ee instanceof se.y)return Ee;if(null!=Ee){if((0,re.c)(Ee))return function Re(Ee){return new se.y(fe=>{const De=Ee[Y.L]();if((0,j.m)(De.subscribe))return De.subscribe(fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,X.z)(Ee))return function tt(Ee){return new se.y(fe=>{for(let De=0;De<Ee.length&&!fe.closed;De++)fe.next(Ee[De]);fe.complete()})}(Ee);if((0,N.t)(Ee))return function xe(Ee){return new se.y(fe=>{Ee.then(De=>{fe.closed||(fe.next(De),fe.complete())},De=>fe.error(De)).then(null,H.h)})}(Ee);if((0,oe.D)(Ee))return ye(Ee);if((0,le.T)(Ee))return function ie(Ee){return new se.y(fe=>{for(const De of Ee)if(fe.next(De),fe.closed)return;fe.complete()})}(Ee);if((0,_e.L)(Ee))return function de(Ee){return ye((0,_e.Q)(Ee))}(Ee)}throw(0,ge.z)(Ee)}function ye(Ee){return new se.y(fe=>{(function be(Ee,fe){var De,Ne,Se,U;return(0,p.mG)(this,void 0,void 0,function*(){try{for(De=(0,p.KL)(Ee);!(Ne=yield De.next()).done;)if(fe.next(Ne.value),fe.closed)return}catch(ue){Se={error:ue}}finally{try{Ne&&!Ne.done&&(U=De.return)&&(yield U.call(De))}finally{if(Se)throw Se.error}}fe.complete()})})(Ee,fe).catch(De=>fe.error(De))})}},831:(et,we,k)=>{k.d(we,{T:()=>Re});var p=k(4004),X=k(8421),N=k(4482),se=k(9672),re=k(5403),ge=k(576);function le(tt,xe,ie=1/0){return(0,ge.m)(xe)?le((ye,de)=>(0,p.U)((be,Ee)=>xe(ye,be,de,Ee))((0,X.Xf)(tt(ye,de))),ie):("number"==typeof xe&&(ie=xe),(0,N.e)((ye,de)=>function oe(tt,xe,ie,ye,de,be,Ee,fe){const De=[];let Ne=0,Se=0,U=!1;const ue=()=>{U&&!De.length&&!Ne&&xe.complete()},$=ee=>Ne<ye?q(ee):De.push(ee),q=ee=>{be&&xe.next(ee),Ne++;let te=!1;(0,X.Xf)(ie(ee,Se++)).subscribe((0,re.x)(xe,Te=>{de?.(Te),be?$(Te):xe.next(Te)},()=>{te=!0},void 0,()=>{if(te)try{for(Ne--;De.length&&Ne<ye;){const Te=De.shift();Ee?(0,se.f)(xe,Ee,()=>q(Te)):q(Te)}ue()}catch(Te){xe.error(Te)}}))};return tt.subscribe((0,re.x)(xe,$,()=>{U=!0,ue()})),()=>{fe?.()}}(ye,de,tt,ie)))}var _e=k(4671),H=k(515),Y=k(7669),He=k(8996);function Re(...tt){const xe=(0,Y.yG)(tt),ie=(0,Y._6)(tt,1/0),ye=tt;return ye.length?1===ye.length?(0,X.Xf)(ye[0]):function j(tt=1/0){return le(_e.y,tt)}(ie)((0,He.D)(ye,xe)):H.E}},5403:(et,we,k)=>{k.d(we,{x:()=>X});var p=k(930);function X(se,re,oe,ge,le){return new N(se,re,oe,ge,le)}class N extends p.Lv{constructor(re,oe,ge,le,_e,j){super(re),this.onFinalize=_e,this.shouldUnsubscribe=j,this._next=oe?function(H){try{oe(H)}catch(Y){re.error(Y)}}:super._next,this._error=le?function(H){try{le(H)}catch(Y){re.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(H){re.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(et,we,k)=>{k.d(we,{U:()=>N});var p=k(4482),X=k(5403);function N(se,re){return(0,p.e)((oe,ge)=>{let le=0;oe.subscribe((0,X.x)(ge,_e=>{ge.next(se.call(re,_e,le++))}))})}},5363:(et,we,k)=>{k.d(we,{Q:()=>se});var p=k(9672),X=k(4482),N=k(5403);function se(re,oe=0){return(0,X.e)((ge,le)=>{ge.subscribe((0,N.x)(le,_e=>(0,p.f)(le,re,()=>le.next(_e),oe),()=>(0,p.f)(le,re,()=>le.complete(),oe),_e=>(0,p.f)(le,re,()=>le.error(_e),oe)))})}},3099:(et,we,k)=>{k.d(we,{B:()=>re});var p=k(8421),X=k(7579),N=k(930),se=k(4482);function re(ge={}){const{connector:le=(()=>new X.x),resetOnError:_e=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=ge;return Y=>{let He,Re,tt,xe=0,ie=!1,ye=!1;const de=()=>{Re?.unsubscribe(),Re=void 0},be=()=>{de(),He=tt=void 0,ie=ye=!1},Ee=()=>{const fe=He;be(),fe?.unsubscribe()};return(0,se.e)((fe,De)=>{xe++,!ye&&!ie&&de();const Ne=tt=tt??le();De.add(()=>{xe--,0===xe&&!ye&&!ie&&(Re=oe(Ee,H))}),Ne.subscribe(De),!He&&xe>0&&(He=new N.Hp({next:Se=>Ne.next(Se),error:Se=>{ye=!0,de(),Re=oe(be,_e,Se),Ne.error(Se)},complete:()=>{ie=!0,de(),Re=oe(be,j),Ne.complete()}}),(0,p.Xf)(fe).subscribe(He))})(Y)}}function oe(ge,le,..._e){if(!0===le)return void ge();if(!1===le)return;const j=new N.Hp({next:()=>{j.unsubscribe(),ge()}});return le(..._e).subscribe(j)}},9468:(et,we,k)=>{k.d(we,{R:()=>X});var p=k(4482);function X(N,se=0){return(0,p.e)((re,oe)=>{oe.add(N.schedule(()=>re.subscribe(oe),se))})}},4408:(et,we,k)=>{k.d(we,{o:()=>re});var p=k(727);class X extends p.w0{constructor(ge,le){super()}schedule(ge,le=0){return this}}const N={setInterval(oe,ge,...le){const{delegate:_e}=N;return _e?.setInterval?_e.setInterval(oe,ge,...le):setInterval(oe,ge,...le)},clearInterval(oe){const{delegate:ge}=N;return(ge?.clearInterval||clearInterval)(oe)},delegate:void 0};var se=k(8737);class re extends X{constructor(ge,le){super(ge,le),this.scheduler=ge,this.work=le,this.pending=!1}schedule(ge,le=0){var _e;if(this.closed)return this;this.state=ge;const j=this.id,H=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(H,j,le)),this.pending=!0,this.delay=le,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(H,this.id,le),this}requestAsyncId(ge,le,_e=0){return N.setInterval(ge.flush.bind(ge,this),_e)}recycleAsyncId(ge,le,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return le;null!=le&&N.clearInterval(le)}execute(ge,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ge,le);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,le){let j,_e=!1;try{this.work(ge)}catch(H){_e=!0,j=H||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ge,scheduler:le}=this,{actions:_e}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(_e,this),null!=ge&&(this.id=this.recycleAsyncId(le,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,we,k)=>{k.d(we,{v:()=>N});var p=k(6063);class X{constructor(re,oe=X.now){this.schedulerActionCtor=re,this.now=oe}schedule(re,oe=0,ge){return new this.schedulerActionCtor(this,re).schedule(ge,oe)}}X.now=p.l.now;class N extends X{constructor(re,oe=X.now){super(re,oe),this.actions=[],this._active=!1}flush(re){const{actions:oe}=this;if(this._active)return void oe.push(re);let ge;this._active=!0;do{if(ge=re.execute(re.state,re.delay))break}while(re=oe.shift());if(this._active=!1,ge){for(;re=oe.shift();)re.unsubscribe();throw ge}}}},4986:(et,we,k)=>{k.d(we,{z:()=>N});var p=k(4408);const N=new(k(7565).v)(p.o)},6063:(et,we,k)=>{k.d(we,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(et,we,k)=>{k.d(we,{z:()=>p});const p={setTimeout(X,N,...se){const{delegate:re}=p;return re?.setTimeout?re.setTimeout(X,N,...se):setTimeout(X,N,...se)},clearTimeout(X){const{delegate:N}=p;return(N?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(et,we,k)=>{k.d(we,{h:()=>X});const X=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,we,k)=>{k.d(we,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(et,we,k)=>{k.d(we,{_6:()=>oe,jO:()=>se,yG:()=>re});var p=k(576);function N(ge){return ge[ge.length-1]}function se(ge){return(0,p.m)(N(ge))?ge.pop():void 0}function re(ge){return function X(ge){return ge&&(0,p.m)(ge.schedule)}(N(ge))?ge.pop():void 0}function oe(ge,le){return"number"==typeof N(ge)?ge.pop():le}},8737:(et,we,k)=>{function p(X,N){if(X){const se=X.indexOf(N);0<=se&&X.splice(se,1)}}k.d(we,{P:()=>p})},3888:(et,we,k)=>{function p(X){const se=X(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(we,{d:()=>p})},2806:(et,we,k)=>{k.d(we,{O:()=>se,x:()=>N});var p=k(2416);let X=null;function N(re){if(p.v.useDeprecatedSynchronousErrorHandling){const oe=!X;if(oe&&(X={errorThrown:!1,error:null}),re(),oe){const{errorThrown:ge,error:le}=X;if(X=null,ge)throw le}}else re()}function se(re){p.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(et,we,k)=>{function p(X,N,se,re=0,oe=!1){const ge=N.schedule(function(){se(),oe?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(ge),!oe)return ge}k.d(we,{f:()=>p})},4671:(et,we,k)=>{function p(X){return X}k.d(we,{y:()=>p})},1144:(et,we,k)=>{k.d(we,{z:()=>p});const p=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(et,we,k)=>{k.d(we,{D:()=>X});var p=k(576);function X(N){return Symbol.asyncIterator&&(0,p.m)(N?.[Symbol.asyncIterator])}},576:(et,we,k)=>{function p(X){return"function"==typeof X}k.d(we,{m:()=>p})},3670:(et,we,k)=>{k.d(we,{c:()=>N});var p=k(8822),X=k(576);function N(se){return(0,X.m)(se[p.L])}},6495:(et,we,k)=>{k.d(we,{T:()=>N});var p=k(2202),X=k(576);function N(se){return(0,X.m)(se?.[p.h])}},8239:(et,we,k)=>{k.d(we,{t:()=>X});var p=k(576);function X(N){return(0,p.m)(N?.then)}},3260:(et,we,k)=>{k.d(we,{L:()=>se,Q:()=>N});var p=k(655),X=k(576);function N(re){return(0,p.FC)(this,arguments,function*(){const ge=re.getReader();try{for(;;){const{value:le,done:_e}=yield(0,p.qq)(ge.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(le)}}finally{ge.releaseLock()}})}function se(re){return(0,X.m)(re?.getReader)}},4482:(et,we,k)=>{k.d(we,{e:()=>N});var p=k(576);function N(se){return re=>{if(function X(se){return(0,p.m)(se?.lift)}(re))return re.lift(function(oe){try{return se(oe,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(et,we,k)=>{function p(){}k.d(we,{Z:()=>p})},7849:(et,we,k)=>{k.d(we,{h:()=>N});var p=k(2416),X=k(3410);function N(se){X.z.setTimeout(()=>{const{onUnhandledError:re}=p.v;if(!re)throw se;re(se)})}},4532:(et,we,k)=>{function p(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(we,{z:()=>p})},655:(et,we,k)=>{function se($,q){var ee={};for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&q.indexOf(te)<0&&(ee[te]=$[te]);if(null!=$&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(te=Object.getOwnPropertySymbols($);Te<te.length;Te++)q.indexOf(te[Te])<0&&Object.prototype.propertyIsEnumerable.call($,te[Te])&&(ee[te[Te]]=$[te[Te]])}return ee}function le($,q,ee,te){return new(ee||(ee=Promise))(function(Pe,qe){function Nt(Et){try{_t(te.next(Et))}catch(it){qe(it)}}function $t(Et){try{_t(te.throw(Et))}catch(it){qe(it)}}function _t(Et){Et.done?Pe(Et.value):function Te(Pe){return Pe instanceof ee?Pe:new ee(function(qe){qe(Pe)})}(Et.value).then(Nt,$t)}_t((te=te.apply($,q||[])).next())})}function ie($){return this instanceof ie?(this.v=$,this):new ie($)}function ye($,q,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,te=ee.apply($,q||[]),Pe=[];return Te={},qe("next"),qe("throw"),qe("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function qe(St){te[St]&&(Te[St]=function(On){return new Promise(function(zn,nt){Pe.push([St,On,zn,nt])>1||Nt(St,On)})})}function Nt(St,On){try{!function $t(St){St.value instanceof ie?Promise.resolve(St.value.v).then(_t,Et):it(Pe[0][2],St)}(te[St](On))}catch(zn){it(Pe[0][3],zn)}}function _t(St){Nt("next",St)}function Et(St){Nt("throw",St)}function it(St,On){St(On),Pe.shift(),Pe.length&&Nt(Pe[0][0],Pe[0][1])}}function be($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,q=$[Symbol.asyncIterator];return q?q.call($):($=function Y($){var q="function"==typeof Symbol&&Symbol.iterator,ee=q&&$[q],te=0;if(ee)return ee.call($);if($&&"number"==typeof $.length)return{next:function(){return $&&te>=$.length&&($=void 0),{value:$&&$[te++],done:!$}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}($),ee={},te("next"),te("throw"),te("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function te(Pe){ee[Pe]=$[Pe]&&function(qe){return new Promise(function(Nt,$t){!function Te(Pe,qe,Nt,$t){Promise.resolve($t).then(function(_t){Pe({value:_t,done:Nt})},qe)}(Nt,$t,(qe=$[Pe](qe)).done,qe.value)})}}}k.d(we,{FC:()=>ye,KL:()=>be,_T:()=>se,mG:()=>le,qq:()=>ie})},4650:(et,we,k)=>{k.d(we,{$8M:()=>tc,AFp:()=>Ym,ALo:()=>Jv,AaK:()=>le,AsE:()=>fm,CHM:()=>yl,CZH:()=>Vh,CqO:()=>ph,D6c:()=>o0,EJc:()=>bE,EpF:()=>Kg,F4k:()=>fh,FYo:()=>j_,FiY:()=>Ma,GfV:()=>dg,Gpc:()=>H,JOm:()=>Wt,KtG:()=>Wu,LFG:()=>ke,LSH:()=>Vo,Lbi:()=>OC,Lck:()=>Lv,MAs:()=>Gg,NdJ:()=>Yg,OlP:()=>Ft,Oqu:()=>np,Q6J:()=>Wg,QGY:()=>Ys,Qsj:()=>uI,R0b:()=>Yi,RDi:()=>ni,Rgc:()=>Rh,SBq:()=>nh,TTD:()=>ia,TgZ:()=>Zc,VKq:()=>Zv,X6Q:()=>ZC,Xpm:()=>no,Y36:()=>cu,YNc:()=>$g,Yjl:()=>io,Yz7:()=>nt,ZZ4:()=>qE,_Bn:()=>Fv,_UZ:()=>Zg,_c5:()=>r0,_uU:()=>Yy,aQg:()=>$h,cJS:()=>li,cg1:()=>up,dDg:()=>jC,dqk:()=>dt,eFA:()=>NE,ekj:()=>um,eoX:()=>RE,g9A:()=>NC,h0i:()=>id,hGG:()=>s0,hij:()=>rp,ifc:()=>rt,ip1:()=>Tp,kL8:()=>Cm,lG2:()=>ro,lcZ:()=>Xv,lri:()=>r_,n5z:()=>xl,oAB:()=>nn,oxw:()=>zo,q4F:()=>hg,qLn:()=>rh,qOj:()=>Lg,qZA:()=>hh,rWj:()=>HC,s9C:()=>Jg,sBO:()=>VE,sIi:()=>Qa,s_b:()=>vp,soG:()=>Sp,uIk:()=>Bg,vHH:()=>ie,vpe:()=>ws,wAp:()=>Qe,xp6:()=>kt,zSh:()=>ja,zs3:()=>nr});var p=k(7579),X=k(727),N=k(8306),se=k(831),re=k(3099);function oe(r){for(let i in r)if(r[i]===oe)return i;throw Error("Could not find renamed property on target object.")}function ge(r,i){for(const s in i)i.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(r[s]=i[s])}function le(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(le).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function _e(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const j=oe({__forward_ref__:oe});function H(r){return r.__forward_ref__=H,r.toString=function(){return le(this())},r}function Y(r){return He(r)?r():r}function He(r){return"function"==typeof r&&r.hasOwnProperty(j)&&r.__forward_ref__===H}function Re(r){return r&&!!r.\u0275providers}const xe="https://g.co/ng/security#xss";class ie extends Error{constructor(i,s){super(function ye(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}(i,s)),this.code=i}}function de(r){return"string"==typeof r?r:null==r?"":String(r)}function Ne(r,i){throw new ie(-201,!1)}function Et(r,i){null==r&&function it(r,i,s,a){throw new Error(`ASSERTION ERROR: ${r}`+(null==a?"":` [Expected=> ${s} ${a} ${i} <=Actual]`))}(i,r,null,"!=")}function nt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function li(r){return{providers:r.providers||[],imports:r.imports||[]}}function An(r){return Zn(r,qn)||Zn(r,zt)}function Zn(r,i){return r.hasOwnProperty(i)?r[i]:null}function _r(r){return r&&(r.hasOwnProperty(Di)||r.hasOwnProperty(ir))?r[Di]:null}const qn=oe({\u0275prov:oe}),Di=oe({\u0275inj:oe}),zt=oe({ngInjectableDef:oe}),ir=oe({ngInjectorDef:oe});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Ci;function en(r){const i=Ci;return Ci=r,i}function Un(r,i,s){const a=An(r);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Ke.Optional?null:void 0!==i?i:void Ne(le(r))}const dt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zt={},dn="__NG_DI_FLAG__",Bn="ngTempTokenPath",Ts=/\n/gm,Gr="__source";let At;function Kn(r){const i=At;return At=r,i}function Wr(r,i=Ke.Default){if(void 0===At)throw new ie(-203,!1);return null===At?Un(r,void 0,i):At.get(r,i&Ke.Optional?null:void 0,i)}function ke(r,i=Ke.Default){return(function Ar(){return Ci}()||Wr)(Y(r),i)}function lt(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function ht(r){const i=[];for(let s=0;s<r.length;s++){const a=Y(r[s]);if(Array.isArray(a)){if(0===a.length)throw new ie(900,!1);let u,d=Ke.Default;for(let m=0;m<a.length;m++){const v=a[m],E=jn(v);"number"==typeof E?-1===E?u=v.token:d|=E:u=v}i.push(ke(u,d))}else i.push(ke(a))}return i}function yt(r,i){return r[dn]=i,r.prototype[dn]=i,r}function jn(r){return r[dn]}function W(r){return{toString:r}.toString()}var ce=(()=>((ce=ce||{})[ce.OnPush=0]="OnPush",ce[ce.Default=1]="Default",ce))(),rt=(()=>{return(r=rt||(rt={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",rt;var r})();const Pt={},ot=[],tn=oe({\u0275cmp:oe}),vn=oe({\u0275dir:oe}),Dt=oe({\u0275pipe:oe}),Mr=oe({\u0275mod:oe}),Dn=oe({\u0275fac:oe}),ts=oe({__NG_ELEMENT_ID__:oe});let hd=0;function no(r){return W(()=>{const s=!0===r.standalone,a={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===ce.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||ot,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||rt.Emulated,id:"c"+hd++,styles:r.styles||ot,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},d=r.dependencies,m=r.features;return u.inputs=dl(r.inputs,a),u.outputs=dl(r.outputs),m&&m.forEach(v=>v(u)),u.directiveDefs=d?()=>("function"==typeof d?d():d).map(cl).filter(Pu):null,u.pipeDefs=d?()=>("function"==typeof d?d():d).map(hn).filter(Pu):null,u})}function cl(r){return Mt(r)||Cn(r)}function Pu(r){return null!==r}function nn(r){return W(()=>({type:r.type,bootstrap:r.bootstrap||ot,declarations:r.declarations||ot,imports:r.imports||ot,exports:r.exports||ot,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function dl(r,i){if(null==r)return Pt;const s={};for(const a in r)if(r.hasOwnProperty(a)){let u=r[a],d=u;Array.isArray(u)&&(d=u[1],u=u[0]),s[u]=a,i&&(i[u]=d)}return s}const ro=no;function io(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Mt(r){return r[tn]||null}function Cn(r){return r[vn]||null}function hn(r){return r[Dt]||null}function or(r){return Array.isArray(r)&&"object"==typeof r[1]}function Rr(r){return Array.isArray(r)&&!0===r[1]}function so(r){return 0!=(4&r.flags)}function Pr(r){return r.componentOffset>-1}function hl(r){return 1==(1&r.flags)}function ar(r){return null!==r.template}function oo(r){return 0!=(256&r[2])}function ls(r,i){return r.hasOwnProperty(Dn)?r[Dn]:null}class us{constructor(i,s,a){this.previousValue=i,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ia(){return cs}function cs(r){return r.type.prototype.ngOnChanges&&(r.setInput=oa),sa}function sa(){const r=lo(this),i=r?.current;if(i){const s=r.previous;if(s===Pt)r.previous=i;else for(let a in i)s[a]=i[a];r.current=null,this.ngOnChanges(i)}}function oa(r,i,s,a){const u=this.declaredInputs[s],d=lo(r)||function aa(r,i){return r[ds]=i}(r,{previous:Pt,current:null}),m=d.current||(d.current={}),v=d.previous,E=v[u];m[u]=new us(E&&E.currentValue,i,v===Pt),r[a]=i}ia.ngInherit=!0;const ds="__ngSimpleChanges__";function lo(r){return r[ds]||null}function gn(r){for(;Array.isArray(r);)r=r[0];return r}function hs(r,i){return gn(i[r])}function xn(r,i){return gn(i[r.index])}function Ps(r,i){return r.data[i]}function Ti(r,i){return r[i]}function Mn(r,i){const s=i[r];return or(s)?s:s[0]}function ho(r){return 64==(64&r[2])}function Kr(r,i){return null==i?null:r[i]}function fo(r){r[18]=0}function po(r,i){r[5]+=i;let s=r,a=r[3];for(;null!==a&&(1===i&&1===s[5]||-1===i&&0===s[5]);)a[5]+=i,s=a,a=a[3]}const ft={lFrame:Up(null),bindingsEnabled:!0};function ha(){return ft.bindingsEnabled}function Ie(){return ft.lFrame.lView}function Rt(){return ft.lFrame.tView}function yl(r){return ft.lFrame.contextLView=r,r[8]}function Wu(r){return ft.lFrame.contextLView=null,r}function Fn(){let r=Ns();for(;null!==r&&64===r.type;)r=r.parent;return r}function Ns(){return ft.lFrame.currentTNode}function Er(r,i){const s=ft.lFrame;s.currentTNode=r,s.isParent=i}function pa(){return ft.lFrame.isParent}function rn(){const r=ft.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function di(){return ft.lFrame.bindingIndex++}function Ir(r){const i=ft.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,s}function Dl(r,i){const s=ft.lFrame;s.bindingIndex=s.bindingRootIndex=r,Zu(i)}function Zu(r){ft.lFrame.currentDirectiveIndex=r}function Cl(r){ft.lFrame.currentQueryIndex=r}function Ku(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function _d(r,i,s){if(s&Ke.SkipSelf){let u=i,d=r;for(;!(u=u.parent,null!==u||s&Ke.Host||(u=Ku(d),null===u||(d=d[15],10&u.type))););if(null===u)return!1;i=u,r=d}const a=ft.lFrame=yd();return a.currentTNode=i,a.lView=r,!0}function ga(r){const i=yd(),s=r[1];ft.lFrame=i,i.currentTNode=s.firstChild,i.lView=r,i.tView=s,i.contextLView=r,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function yd(){const r=ft.lFrame,i=null===r?null:r.child;return null===i?Up(r):i}function Up(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Zh(){const r=ft.lFrame;return ft.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const ma=Zh;function qh(){const r=Zh();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function lr(){return ft.lFrame.selectedIndex}function mo(r){ft.lFrame.selectedIndex=r}function qt(){const r=ft.lFrame;return Ps(r.tView,r.selectedIndex)}function Si(r,i){for(let s=i.directiveStart,a=i.directiveEnd;s<a;s++){const d=r.data[s].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:E,ngAfterViewChecked:w,ngOnDestroy:A}=d;m&&(r.contentHooks||(r.contentHooks=[])).push(-s,m),v&&((r.contentHooks||(r.contentHooks=[])).push(s,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(s,v)),E&&(r.viewHooks||(r.viewHooks=[])).push(-s,E),w&&((r.viewHooks||(r.viewHooks=[])).push(s,w),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(s,w)),null!=A&&(r.destroyHooks||(r.destroyHooks=[])).push(s,A)}}function Dr(r,i,s){Tl(r,i,3,s)}function _a(r,i,s,a){(3&r[2])===s&&Tl(r,i,s,a)}function Or(r,i){let s=r[2];(3&s)===i&&(s&=2047,s+=1,r[2]=s)}function Tl(r,i,s,a){const d=a??-1,m=i.length-1;let v=0;for(let E=void 0!==a?65535&r[18]:0;E<m;E++)if("number"==typeof i[E+1]){if(v=i[E],null!=a&&v>=a)break}else i[E]<0&&(r[18]+=65536),(v<d||-1==d)&&(Yu(r,s,i,E),r[18]=(4294901760&r[18])+E+2),E++}function Yu(r,i,s,a){const u=s[a]<0,d=s[a+1],v=r[u?-s[a]:s[a]];if(u){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(v)}finally{}}}else try{d.call(v)}finally{}}class _o{constructor(i,s,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Qt(r,i,s){let a=0;for(;a<s.length;){const u=s[a];if("number"==typeof u){if(0!==u)break;a++;const d=s[a++],m=s[a++],v=s[a++];r.setAttribute(i,m,v,d)}else{const d=u,m=s[++a];Vs(d)?r.setProperty(i,d,m):r.setAttribute(i,d,m),a++}}return a}function Ls(r){return 3===r||4===r||6===r}function Vs(r){return 64===r.charCodeAt(0)}function Mi(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let s=-1;for(let a=0;a<i.length;a++){const u=i[a];"number"==typeof u?s=u:0===s||ya(r,s,u,null,-1===s||2===s?i[++a]:null)}}return r}function ya(r,i,s,a,u){let d=0,m=r.length;if(-1===i)m=-1;else for(;d<r.length;){const v=r[d++];if("number"==typeof v){if(v===i){m=-1;break}if(v>i){m=d-1;break}}}for(;d<r.length;){const v=r[d];if("number"==typeof v)break;if(v===s){if(null===a)return void(null!==u&&(r[d+1]=u));if(a===r[d+1])return void(r[d+2]=u)}d++,null!==a&&d++,null!==u&&d++}-1!==m&&(r.splice(m,0,i),d=m+1),r.splice(d++,0,s),null!==a&&r.splice(d++,0,a),null!==u&&r.splice(d++,0,u)}function Ju(r){return-1!==r}function va(r){return 32767&r}function Us(r,i){let s=function Ea(r){return r>>16}(r),a=i;for(;s>0;)a=a[15],s--;return a}let hi=!0;function Ia(r){const i=hi;return hi=r,i}let Ca=0;const Xn={};function Bs(r,i){const s=vo(r,i);if(-1!==s)return s;const a=i[1];a.firstCreatePass&&(r.injectorIndex=i.length,gs(a.data,r),gs(i,null),gs(a.blueprint,null));const u=wa(r,i),d=r.injectorIndex;if(Ju(u)){const m=va(u),v=Us(u,i),E=v[1].data;for(let w=0;w<8;w++)i[d+w]=v[m+w]|E[m+w]}return i[d+8]=u,d}function gs(r,i){r.push(0,0,0,0,0,0,0,0,i)}function vo(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function wa(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let s=0,a=null,u=i;for(;null!==u;){if(a=ec(u),null===a)return-1;if(s++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Pl(r,i,s){!function Rl(r,i,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(ts)&&(a=s[ts]),null==a&&(a=s[ts]=Ca++);const u=255&a;i.data[r+(u>>5)]|=1<<u}(r,i,s)}function fi(r,i,s){if(s&Ke.Optional||void 0!==r)return r;Ne()}function Nl(r,i,s,a){if(s&Ke.Optional&&void 0===a&&(a=null),0==(s&(Ke.Self|Ke.Host))){const u=r[9],d=en(void 0);try{return u?u.get(i,a,s&Ke.Optional):Un(i,a,s&Ke.Optional)}finally{en(d)}}return fi(a,0,s)}function Id(r,i,s,a=Ke.Default,u){if(null!==r){if(1024&i[2]){const m=function Cd(r,i,s,a,u){let d=r,m=i;for(;null!==d&&null!==m&&1024&m[2]&&!(256&m[2]);){const v=kr(d,m,s,a|Ke.Self,Xn);if(v!==Xn)return v;let E=d.parent;if(!E){const w=m[21];if(w){const A=w.get(s,Xn,a);if(A!==Xn)return A}E=ec(m),m=m[15]}d=E}return u}(r,i,s,a,Xn);if(m!==Xn)return m}const d=kr(r,i,s,a,Xn);if(d!==Xn)return d}return Nl(i,s,a,u)}function kr(r,i,s,a,u){const d=function kl(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(ts)?r[ts]:void 0;return"number"==typeof i?i>=0?255&i:Dd:i}(s);if("function"==typeof d){if(!_d(i,r,a))return a&Ke.Host?fi(u,0,a):Nl(i,s,a,u);try{const m=d(a);if(null!=m||a&Ke.Optional)return m;Ne()}finally{ma()}}else if("number"==typeof d){let m=null,v=vo(r,i),E=-1,w=a&Ke.Host?i[16][6]:null;for((-1===v||a&Ke.SkipSelf)&&(E=-1===v?wa(r,i):i[v+8],-1!==E&&Jr(a,!1)?(m=i[1],v=va(E),i=Us(E,i)):v=-1);-1!==v;){const A=i[1];if(ba(d,v,A.data)){const O=Ol(v,i,s,m,a,w);if(O!==Xn)return O}E=i[v+8],-1!==E&&Jr(a,i[1].data[v+8]===w)&&ba(d,v,i)?(m=A,v=va(E),i=Us(E,i)):v=-1}}return u}function Ol(r,i,s,a,u,d){const m=i[1],v=m.data[r+8],A=function Eo(r,i,s,a,u){const d=r.providerIndexes,m=i.data,v=1048575&d,E=r.directiveStart,A=d>>20,G=u?v+A:r.directiveEnd;for(let Q=a?v:v+A;Q<G;Q++){const he=m[Q];if(Q<E&&s===he||Q>=E&&he.type===s)return Q}if(u){const Q=m[E];if(Q&&ar(Q)&&Q.type===s)return E}return null}(v,m,s,null==a?Pr(v)&&hi:a!=m&&0!=(3&v.type),u&Ke.Host&&d===v);return null!==A?xr(i,m,A,v):Xn}function xr(r,i,s,a){let u=r[s];const d=i.data;if(function Cr(r){return r instanceof _o}(u)){const m=u;m.resolving&&function Ee(r,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new ie(-200,`Circular dependency in DI detected for ${r}${s}`)}(function be(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():de(r)}(d[s]));const v=Ia(m.canSeeViewProviders);m.resolving=!0;const E=m.injectImpl?en(m.injectImpl):null;_d(r,a,Ke.Default);try{u=r[s]=m.factory(void 0,d,r,a),i.firstCreatePass&&s>=a.directiveStart&&function Ed(r,i,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:d}=i.type.prototype;if(a){const m=cs(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(r,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,m)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-r,u),d&&((s.preOrderHooks||(s.preOrderHooks=[])).push(r,d),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,d))}(s,d[s],i)}finally{null!==E&&en(E),Ia(v),m.resolving=!1,ma()}}return u}function ba(r,i,s){return!!(s[i+(r>>5)]&1<<r)}function Jr(r,i){return!(r&Ke.Self||r&Ke.Host&&i)}class wr{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,a){return Id(this._tNode,this._lView,i,lt(a),s)}}function Dd(){return new wr(Fn(),Ie())}function xl(r){return W(()=>{const i=r.prototype.constructor,s=i[Dn]||Fl(i),a=Object.prototype;let u=Object.getPrototypeOf(r.prototype).constructor;for(;u&&u!==a;){const d=u[Dn]||Fl(u);if(d&&d!==s)return d;u=Object.getPrototypeOf(u)}return d=>new d})}function Fl(r){return He(r)?()=>{const i=Fl(Y(r));return i&&i()}:ls(r)}function ec(r){const i=r[1],s=i.type;return 2===s?i.declTNode:1===s?r[6]:null}function tc(r){return function Xu(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const s=r.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const d=s[u];if(Ls(d))break;if(0===d)u+=2;else if("number"==typeof d)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(d===i)return s[u+1];u+=2}}}return null}(Fn(),r)}const Io="__parameters__";function Ta(r,i,s){return W(()=>{const a=function wd(r){return function(...s){if(r){const a=r(...s);for(const u in a)this[u]=a[u]}}}(i);function u(...d){if(this instanceof u)return a.apply(this,d),this;const m=new u(...d);return v.annotation=m,v;function v(E,w,A){const O=E.hasOwnProperty(Io)?E[Io]:Object.defineProperty(E,Io,{value:[]})[Io];for(;O.length<=A;)O.push(null);return(O[A]=O[A]||[]).push(m),E}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=r,u.annotationCls=u,u})}class Ft{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=nt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Pi(r,i){r.forEach(s=>Array.isArray(s)?Pi(s,i):i(s))}function oc(r,i,s){i>=r.length?r.push(s):r.splice(i,0,s)}function wo(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function Rn(r,i,s){let a=_s(r,i);return a>=0?r[1|a]=s:(a=~a,function bo(r,i,s,a){let u=r.length;if(u==i)r.push(s,a);else if(1===u)r.push(a,r[0]),r[0]=s;else{for(u--,r.push(r[u-1],r[u]);u>i;)r[u]=r[u-2],u--;r[i]=s,r[i+1]=a}}(r,a,i,s)),a}function To(r,i){const s=_s(r,i);if(s>=0)return r[1|s]}function _s(r,i){return function Ni(r,i,s){let a=0,u=r.length>>s;for(;u!==a;){const d=a+(u-a>>1),m=r[d<<s];if(i===m)return d<<s;m>i?u=d:a=d+1}return~(u<<s)}(r,i,1)}const Ma=yt(Ta("Optional"),8),Mo=yt(Ta("SkipSelf"),4);var Wt=(()=>((Wt=Wt||{})[Wt.Important=1]="Important",Wt[Wt.DashCase=2]="DashCase",Wt))();const $l=new Map;let Gp=0;const Gl="__ngContext__";function Pn(r,i){or(i)?(r[Gl]=i[20],function Wp(r){$l.set(r[20],r)}(i)):r[Gl]=i}function Fd(r,i){return undefined(r,i)}function Oo(r){const i=r[3];return Rr(i)?i[3]:i}function Oa(r){return Vd(r[13])}function Zl(r){return Vd(r[4])}function Vd(r){for(;null!==r&&!Rr(r);)r=r[4];return r}function Li(r,i,s,a,u){if(null!=a){let d,m=!1;Rr(a)?d=a:or(a)&&(m=!0,a=a[0]);const v=gn(a);0===r&&null!==s?null==u?ko(i,s,v):ti(i,s,v,u||null,!0):1===r&&null!==s?ti(i,s,v,u||null,!0):2===r?function Fo(r,i,s){const a=yc(r,i);a&&function hf(r,i,s,a){r.removeChild(i,s,a)}(r,a,i,s)}(i,v,m):3===r&&i.destroyNode(v),null!=d&&function pf(r,i,s,a,u){const d=s[7];d!==gn(s)&&Li(i,r,a,d,u);for(let v=10;v<s.length;v++){const E=s[v];Fa(E[1],E,r,i,a,d)}}(i,r,d,s,u)}}function ql(r,i,s){return r.createElement(i,s)}function Yl(r,i){const s=r[9],a=s.indexOf(i),u=i[3];512&i[2]&&(i[2]&=-513,po(u,-1)),s.splice(a,1)}function ka(r,i){if(r.length<=10)return;const s=10+i,a=r[s];if(a){const u=a[17];null!==u&&u!==r&&Yl(u,a),i>0&&(r[s-1][4]=a[4]);const d=wo(r,10+i);!function Bd(r,i){Fa(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(a[1],a);const m=d[19];null!==m&&m.detachView(d[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function mc(r,i){if(!(128&i[2])){const s=i[11];s.destroyNode&&Fa(r,i,s,3,null,null),function Kl(r){let i=r[13];if(!i)return Ql(r[1],r);for(;i;){let s=null;if(or(i))s=i[13];else{const a=i[10];a&&(s=a)}if(!s){for(;i&&!i[4]&&i!==r;)or(i)&&Ql(i[1],i),i=i[3];null===i&&(i=r),or(i)&&Ql(i[1],i),s=i&&i[4]}i=s}}(i)}}function Ql(r,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function uf(r,i){let s;if(null!=r&&null!=(s=r.destroyHooks))for(let a=0;a<s.length;a+=2){const u=i[s[a]];if(!(u instanceof _o)){const d=s[a+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const v=u[d[m]],E=d[m+1];try{E.call(v)}finally{}}else try{d.call(u)}finally{}}}}(r,i),function _c(r,i){const s=r.cleanup,a=i[7];let u=-1;if(null!==s)for(let d=0;d<s.length-1;d+=2)if("string"==typeof s[d]){const m=s[d+3];m>=0?a[u=m]():a[u=-m].unsubscribe(),d+=2}else{const m=a[u=s[d+1]];s[d].call(m)}if(null!==a){for(let d=u+1;d<a.length;d++)(0,a[d])();i[7]=null}}(r,i),1===i[1].type&&i[11].destroy();const s=i[17];if(null!==s&&Rr(i[3])){s!==i[3]&&Yl(s,i);const a=i[19];null!==a&&a.detachView(r)}!function zp(r){$l.delete(r[20])}(i)}}function cf(r,i,s){return function Hd(r,i,s){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return s[0];{const{componentOffset:u}=a;if(u>-1){const{encapsulation:d}=r.data[a.directiveStart+u];if(d===rt.None||d===rt.Emulated)return null}return xn(a,s)}}(r,i.parent,s)}function ti(r,i,s,a,u){r.insertBefore(i,s,a,u)}function ko(r,i,s){r.appendChild(i,s)}function df(r,i,s,a,u){null!==a?ti(r,i,s,a,u):ko(r,i,s)}function yc(r,i){return r.parentNode(i)}let nu,vc=function jd(r,i,s){return 40&r.type?xn(r,s):null};function Xl(r,i,s,a){const u=cf(r,a,i),d=i[11],v=function ff(r,i,s){return vc(r,i,s)}(a.parent||i[6],a,i);if(null!=u)if(Array.isArray(s))for(let E=0;E<s.length;E++)df(d,u,s[E],v,!1);else df(d,u,s,v,!1)}function xo(r,i){if(null!==i){const s=i.type;if(3&s)return xn(i,r);if(4&s)return ur(-1,r[i.index]);if(8&s){const a=i.child;if(null!==a)return xo(r,a);{const u=r[i.index];return Rr(u)?ur(-1,u):gn(u)}}if(32&s)return Fd(i,r)()||gn(r[i.index]);{const a=Ec(r,i);return null!==a?Array.isArray(a)?a[0]:xo(Oo(r[16]),a):xo(r,i.next)}}return null}function Ec(r,i){return null!==i?r[16][6].projection[i.projection]:null}function ur(r,i){const s=10+r+1;if(s<i.length){const a=i[s],u=a[1].firstChild;if(null!==u)return xo(a,u)}return i[7]}function Ic(r,i,s,a,u,d,m){for(;null!=s;){const v=a[s.index],E=s.type;if(m&&0===i&&(v&&Pn(gn(v),a),s.flags|=2),32!=(32&s.flags))if(8&E)Ic(r,i,s.child,a,u,d,!1),Li(i,r,u,v,d);else if(32&E){const w=Fd(s,a);let A;for(;A=w();)Li(i,r,u,A,d);Li(i,r,u,v,d)}else 16&E?eu(r,i,a,s,u,d):Li(i,r,u,v,d);s=m?s.projectionNext:s.next}}function Fa(r,i,s,a,u,d){Ic(s,a,r.firstChild,i,u,d,!1)}function eu(r,i,s,a,u,d){const m=s[16],E=m[6].projection[a.projection];if(Array.isArray(E))for(let w=0;w<E.length;w++)Li(i,r,u,E[w],d);else Ic(r,i,E,m[3],u,d,!0)}function vs(r,i,s){""===s?r.removeAttribute(i,"class"):r.setAttribute(i,"class",s)}function gf(r,i,s){const{mergedAttrs:a,classes:u,styles:d}=s;null!==a&&Qt(r,i,a),null!==u&&vs(r,i,u),null!==d&&function C_(r,i,s){r.setAttribute(i,"style",s)}(r,i,d)}function ni(r){nu=r}class Ef{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xe})`}}function y(r){return r instanceof Ef?r.changingThisBreaksApplicationSecurity:r}const Va=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Nn=(()=>((Nn=Nn||{})[Nn.NONE=0]="NONE",Nn[Nn.HTML=1]="HTML",Nn[Nn.STYLE=2]="STYLE",Nn[Nn.SCRIPT=3]="SCRIPT",Nn[Nn.URL=4]="URL",Nn[Nn.RESOURCE_URL=5]="RESOURCE_URL",Nn))();function Vo(r){const i=function Ba(){const r=Ie();return r&&r[12]}();return i?i.sanitize(Nn.URL,r)||"":function b(r,i){const s=function M(r){return r instanceof Ef&&r.getTypeName()||null}(r);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see ${xe})`)}return s===i}(r,"URL")?y(r):function wc(r){return(r=String(r)).match(Va)?r:"unsafe:"+r}(de(r))}const N_=new Ft("ENVIRONMENT_INITIALIZER"),Uo=new Ft("INJECTOR",-1),Ws=new Ft("INJECTOR_DEF_TYPES");class Ha{get(i,s=Zt){if(s===Zt){const a=new Error(`NullInjectorError: No provider for ${le(i)}!`);throw a.name="NullInjectorError",a}return s}}function Xd(...r){return{\u0275providers:Df(0,r),\u0275fromNgModule:!0}}function Df(r,...i){const s=[],a=new Set;let u;return Pi(i,d=>{const m=d;Vn(m,s,[],a)&&(u||(u=[]),u.push(m))}),void 0!==u&&ng(u,s),s}function ng(r,i){for(let s=0;s<r.length;s++){const{providers:u}=r[s];rg(u,d=>{i.push(d)})}}function Vn(r,i,s,a){if(!(r=Y(r)))return!1;let u=null,d=_r(r);const m=!d&&Mt(r);if(d||m){if(m&&!m.standalone)return!1;u=r}else{const E=r.ngModule;if(d=_r(E),!d)return!1;u=E}const v=a.has(u);if(m){if(v)return!1;if(a.add(u),m.dependencies){const E="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const w of E)Vn(w,i,s,a)}}else{if(!d)return!1;{if(null!=d.imports&&!v){let w;a.add(u);try{Pi(d.imports,A=>{Vn(A,i,s,a)&&(w||(w=[]),w.push(A))})}finally{}void 0!==w&&ng(w,i)}if(!v){const w=ls(u)||(()=>new u);i.push({provide:u,useFactory:w,deps:ot},{provide:Ws,useValue:u,multi:!0},{provide:N_,useValue:()=>ke(u),multi:!0})}const E=d.providers;null==E||v||rg(E,A=>{i.push(A)})}}return u!==r&&void 0!==r.providers}function rg(r,i){for(let s of r)Re(s)&&(s=s.\u0275providers),Array.isArray(s)?rg(s,i):i(s)}const aI=oe({provide:String,useValue:oe});function ig(r){return null!==r&&"object"==typeof r&&aI in r}function lu(r){return"function"==typeof r}const ja=new Ft("Set Injector scope."),Cf={},eh={};let sg;function wf(){return void 0===sg&&(sg=new Ha),sg}class zs{}class th extends zs{constructor(i,s,a,u){super(),this.parent=s,this.source=a,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tf(i,m=>this.processProvider(m)),this.records.set(Uo,uu(void 0,this)),u.has("environment")&&this.records.set(zs,uu(void 0,this));const d=this.records.get(ja);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(Ws.multi,ot,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=Kn(this),a=en(void 0);try{return i()}finally{Kn(s),en(a)}}get(i,s=Zt,a=Ke.Default){this.assertNotDestroyed(),a=lt(a);const u=Kn(this),d=en(void 0);try{if(!(a&Ke.SkipSelf)){let v=this.records.get(i);if(void 0===v){const E=function ag(r){return"function"==typeof r||"object"==typeof r&&r instanceof Ft}(i)&&An(i);v=E&&this.injectableDefInScope(E)?uu(bf(i),Cf):null,this.records.set(i,v)}if(null!=v)return this.hydrate(i,v)}return(a&Ke.Self?wf():this.parent).get(i,s=a&Ke.Optional&&s===Zt?null:s)}catch(m){if("NullInjectorError"===m.name){if((m[Bn]=m[Bn]||[]).unshift(le(i)),u)throw m;return function L(r,i,s,a){const u=r[Bn];throw i[Gr]&&u.unshift(i[Gr]),r.message=function F(r,i,s,a=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let u=le(i);if(Array.isArray(i))u=i.map(le).join(" -> ");else if("object"==typeof i){let d=[];for(let m in i)if(i.hasOwnProperty(m)){let v=i[m];d.push(m+":"+("string"==typeof v?JSON.stringify(v):le(v)))}u=`{${d.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${r.replace(Ts,"\n  ")}`}("\n"+r.message,u,s,a),r.ngTokenPath=u,r[Bn]=null,r}(m,i,"R3InjectorError",this.source)}throw m}finally{en(d),Kn(u)}}resolveInjectorInitializers(){const i=Kn(this),s=en(void 0);try{const a=this.get(N_.multi,ot,Ke.Self);for(const u of a)u()}finally{Kn(i),en(s)}}toString(){const i=[],s=this.records;for(const a of s.keys())i.push(le(a));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(i){let s=lu(i=Y(i))?i:Y(i&&i.provide);const a=function L_(r){return ig(r)?uu(void 0,r.useValue):uu(og(r),Cf)}(i);if(lu(i)||!0!==i.multi)this.records.get(s);else{let u=this.records.get(s);u||(u=uu(void 0,Cf,!0),u.factory=()=>ht(u.multi),this.records.set(s,u)),s=i,u.multi.push(i)}this.records.set(s,a)}hydrate(i,s){return s.value===Cf&&(s.value=eh,s.value=s.factory()),"object"==typeof s.value&&s.value&&function U_(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Y(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function bf(r){const i=An(r),s=null!==i?i.factory:ls(r);if(null!==s)return s;if(r instanceof Ft)throw new ie(204,!1);if(r instanceof Function)return function F_(r){const i=r.length;if(i>0)throw function Hs(r,i){const s=[];for(let a=0;a<r;a++)s.push(i);return s}(i,"?"),new ie(204,!1);const s=function Xi(r){const i=r&&(r[qn]||r[zt]);if(i){const s=function Ii(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(r);return null!==s?()=>s.factory(r):()=>new r}(r);throw new ie(204,!1)}function og(r,i,s){let a;if(lu(r)){const u=Y(r);return ls(u)||bf(u)}if(ig(r))a=()=>Y(r.useValue);else if(function k_(r){return!(!r||!r.useFactory)}(r))a=()=>r.useFactory(...ht(r.deps||[]));else if(function O_(r){return!(!r||!r.useExisting)}(r))a=()=>ke(Y(r.useExisting));else{const u=Y(r&&(r.useClass||r.provide));if(!function V_(r){return!!r.deps}(r))return ls(u)||bf(u);a=()=>new u(...ht(r.deps))}return a}function uu(r,i,s=!1){return{factory:r,value:i,multi:s?[]:void 0}}function Tf(r,i){for(const s of r)Array.isArray(s)?Tf(s,i):s&&Re(s)?Tf(s.\u0275providers,i):i(s)}class B_{}class Sf{}class ug{resolveComponentFactory(i){throw function lI(r){const i=Error(`No component factory found for ${le(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let Sc=(()=>{class r{}return r.NULL=new ug,r})();function cg(){return Ac(Fn(),Ie())}function Ac(r,i){return new nh(xn(r,i))}let nh=(()=>{class r{constructor(s){this.nativeElement=s}}return r.__NG_ELEMENT_ID__=cg,r})();class j_{}let uI=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function cI(){const r=Ie(),s=Mn(Fn().index,r);return(or(s)?s:r)[11]}(),r})(),$_=(()=>{class r{}return r.\u0275prov=nt({token:r,providedIn:"root",factory:()=>null}),r})();class dg{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const hg=new dg("15.0.4"),fg={};function gg(r){return r.ngOriginalError}class rh{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&gg(i);for(;s&&gg(s);)s=gg(s);return s||null}}function Z_(r,i,s){let a=r.length;for(;;){const u=r.indexOf(i,s);if(-1===u)return u;if(0===u||r.charCodeAt(u-1)<=32){const d=i.length;if(u+d===a||r.charCodeAt(u+d)<=32)return u}s=u+1}}const Mf="ng-template";function q_(r,i,s){let a=0;for(;a<r.length;){let u=r[a++];if(s&&"class"===u){if(u=r[a],-1!==Z_(u.toLowerCase(),i,0))return!0}else if(1===u){for(;a<r.length&&"string"==typeof(u=r[a++]);)if(u.toLowerCase()===i)return!0;return!1}}return!1}function K_(r){return 4===r.type&&r.value!==Mf}function Y_(r,i,s){return i===(4!==r.type||s?r.value:Mf)}function mI(r,i,s){let a=4;const u=r.attrs||[],d=function _I(r){for(let i=0;i<r.length;i++)if(Ls(r[i]))return i;return r.length}(u);let m=!1;for(let v=0;v<i.length;v++){const E=i[v];if("number"!=typeof E){if(!m)if(4&a){if(a=2|1&a,""!==E&&!Y_(r,E,s)||""===E&&1===i.length){if(Ui(a))return!1;m=!0}}else{const w=8&a?E:i[++v];if(8&a&&null!==r.attrs){if(!q_(r.attrs,w,s)){if(Ui(a))return!1;m=!0}continue}const O=Q_(8&a?"class":E,u,K_(r),s);if(-1===O){if(Ui(a))return!1;m=!0;continue}if(""!==w){let G;G=O>d?"":u[O+1].toLowerCase();const Q=8&a?G:null;if(Q&&-1!==Z_(Q,w,0)||2&a&&w!==G){if(Ui(a))return!1;m=!0}}}}else{if(!m&&!Ui(a)&&!Ui(E))return!1;if(m&&Ui(E))continue;m=!1,a=E|1&a}}return Ui(a)||m}function Ui(r){return 0==(1&r)}function Q_(r,i,s,a){if(null===i)return-1;let u=0;if(a||!s){let d=!1;for(;u<i.length;){const m=i[u];if(m===r)return u;if(3===m||6===m)d=!0;else{if(1===m||2===m){let v=i[++u];for(;"string"==typeof v;)v=i[++u];continue}if(4===m)break;if(0===m){u+=4;continue}}u+=d?1:2}return-1}return function X_(r,i){let s=r.indexOf(4);if(s>-1)for(s++;s<r.length;){const a=r[s];if("number"==typeof a)return-1;if(a===i)return s;s++}return-1}(i,r)}function _g(r,i,s=!1){for(let a=0;a<i.length;a++)if(mI(r,i[a],s))return!0;return!1}function yg(r,i){return r?":not("+i.trim()+")":i}function Rf(r){let i=r[0],s=1,a=2,u="",d=!1;for(;s<r.length;){let m=r[s];if("string"==typeof m)if(2&a){const v=r[++s];u+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?u+="."+m:4&a&&(u+=" "+m);else""!==u&&!Ui(m)&&(i+=yg(d,u),u=""),a=m,d=d||!Ui(a);s++}return""!==u&&(i+=yg(d,u)),i}const Be={};function kt(r){wt(Rt(),Ie(),lr()+r,!1)}function wt(r,i,s,a){if(!a)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&Dr(i,d,s)}else{const d=r.preOrderHooks;null!==d&&_a(i,d,0,s)}mo(s)}function iy(r,i=null,s=null,a){const u=Pf(r,i,s,a);return u.resolveInjectorInitializers(),u}function Pf(r,i=null,s=null,a,u=new Set){const d=[s||ot,Xd(r)];return a=a||("object"==typeof r?void 0:le(r)),new th(d,i||wf(),a||null,u)}let nr=(()=>{class r{static create(s,a){if(Array.isArray(s))return iy({name:""},a,s,"");{const u=s.name??"";return iy({name:u},s.parent,s.providers,u)}}}return r.THROW_IF_NOT_FOUND=Zt,r.NULL=new Ha,r.\u0275prov=nt({token:r,providedIn:"any",factory:()=>ke(Uo)}),r.__NG_ELEMENT_ID__=-1,r})();function cu(r,i=Ke.Default){const s=Ie();return null===s?ke(r,i):Id(Fn(),s,Y(r),i)}function dy(r,i){const s=r.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const u=s[a],d=s[a+1];if(-1!==d){const m=r.data[d];Cl(u),m.contentQueries(2,i[d],d)}}}function Vf(r,i,s,a,u,d,m,v,E,w,A){const O=i.blueprint.slice();return O[0]=u,O[2]=76|a,(null!==A||r&&1024&r[2])&&(O[2]|=1024),fo(O),O[3]=O[15]=r,O[8]=s,O[10]=m||r&&r[10],O[11]=v||r&&r[11],O[12]=E||r&&r[12]||null,O[9]=w||r&&r[9]||null,O[6]=d,O[20]=function cc(){return Gp++}(),O[21]=A,O[16]=2==i.type?r[16]:O,O}function Oc(r,i,s,a,u){let d=r.data[i];if(null===d)d=function kc(r,i,s,a,u){const d=Ns(),m=pa(),E=r.data[i]=function fy(r,i,s,a,u,d){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,s,i,a,u);return null===r.firstChild&&(r.firstChild=E),null!==d&&(m?null==d.child&&null!==E.parent&&(d.child=E):null===d.next&&(d.next=E)),E}(r,i,s,a,u),function zh(){return ft.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=s,d.value=a,d.attrs=u;const m=function fa(){const r=ft.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Er(d,!0),d}function du(r,i,s,a){if(0===s)return-1;const u=i.length;for(let d=0;d<s;d++)i.push(a),r.blueprint.push(a),r.data.push(null);return u}function Wa(r,i,s){ga(i);try{const a=r.viewQuery;null!==a&&Za(1,a,s);const u=r.template;null!==u&&xc(r,i,u,1,s),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&dy(r,i),r.staticViewQueries&&Za(2,r.viewQuery,s);const d=r.components;null!==d&&function sn(r,i){for(let s=0;s<i.length;s++)Pg(r,i[s])}(i,d)}catch(a){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),a}finally{i[2]&=-5,qh()}}function Bi(r,i,s,a){const u=i[2];if(128!=(128&u)){ga(i);try{fo(i),function El(r){return ft.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==s&&xc(r,i,s,2,a);const m=3==(3&u);if(m){const w=r.preOrderCheckHooks;null!==w&&Dr(i,w,null)}else{const w=r.preOrderHooks;null!==w&&_a(i,w,0,null),Or(i,0)}if(function FI(r){for(let i=Oa(r);null!==i;i=Zl(i)){if(!i[2])continue;const s=i[9];for(let a=0;a<s.length;a++){const u=s[a],d=u[3];0==(512&u[2])&&po(d,1),u[2]|=512}}}(i),function xI(r){for(let i=Oa(r);null!==i;i=Zl(i))for(let s=10;s<i.length;s++){const a=i[s],u=a[1];ho(a)&&Bi(u,a,u.template,a[8])}}(i),null!==r.contentQueries&&dy(r,i),m){const w=r.contentCheckHooks;null!==w&&Dr(i,w)}else{const w=r.contentHooks;null!==w&&_a(i,w,1),Or(i,1)}!function wI(r,i){const s=r.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)mo(~u);else{const d=u,m=s[++a],v=s[++a];Dl(m,d),v(2,i[d])}}}finally{mo(-1)}}(r,i);const v=r.components;null!==v&&function bI(r,i){for(let s=0;s<i.length;s++)LI(r,i[s])}(i,v);const E=r.viewQuery;if(null!==E&&Za(2,E,a),m){const w=r.viewCheckHooks;null!==w&&Dr(i,w)}else{const w=r.viewHooks;null!==w&&_a(i,w,2),Or(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,po(i[3],-1))}finally{qh()}}}function xc(r,i,s,a,u){const d=lr(),m=2&a;try{mo(-1),m&&i.length>22&&wt(r,i,22,!1),s(a,u)}finally{mo(d)}}function vt(r,i,s){if(so(i)){const u=i.directiveEnd;for(let d=i.directiveStart;d<u;d++){const m=r.data[d];m.contentQueries&&m.contentQueries(1,s[d],d)}}}function bg(r,i,s){!ha()||(function RI(r,i,s,a){const u=s.directiveStart,d=s.directiveEnd;Pr(s)&&function Vc(r,i,s){const a=xn(i,r),u=hy(s),d=r[10],m=Uc(r,Vf(r,u,null,s.onPush?32:16,a,i,d,d.createRenderer(a,s),null,null,null));r[i.index]=m}(i,s,r.data[u+s.componentOffset]),r.firstCreatePass||Bs(s,i),Pn(a,i);const m=s.initialInputs;for(let v=u;v<d;v++){const E=r.data[v],w=xr(i,r,v,s);Pn(w,i),null!==m&&OI(0,v-u,w,E,0,m),ar(E)&&(Mn(s.index,i)[8]=xr(i,r,v,s))}}(r,i,s,xn(s,i)),64==(64&s.flags)&&Bf(r,i,s))}function hu(r,i,s=xn){const a=i.localNames;if(null!==a){let u=i.index+1;for(let d=0;d<a.length;d+=2){const m=a[d+1],v=-1===m?s(i,r):r[m];r[u++]=v}}}function hy(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=cn(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function cn(r,i,s,a,u,d,m,v,E,w){const A=22+a,O=A+u,G=function Tg(r,i){const s=[];for(let a=0;a<i;a++)s.push(a<r?null:Be);return s}(A,O),Q="function"==typeof w?w():w;return G[1]={type:r,blueprint:G,template:s,queries:null,viewQuery:v,declTNode:i,data:G.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:Q,incompleteFirstPass:!1}}function fu(r,i,s,a){for(let u in r)if(r.hasOwnProperty(u)){s=null===s?{}:s;const d=r[u];null===a?Fc(s,i,u,d):a.hasOwnProperty(u)&&Fc(s,i,a[u],d)}return s}function Fc(r,i,s,a){r.hasOwnProperty(s)?r[s].push(i,a):r[s]=[i,a]}function Hr(r,i,s,a,u,d,m,v){const E=xn(i,s);let A,w=i.inputs;!v&&null!=w&&(A=w[a])?(Og(r,s,A,a,u),Pr(i)&&Lc(s,i.index)):3&i.type&&(a=function SI(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(a),u=null!=m?m(u,i.value||"",a):u,d.setProperty(E,a,u))}function Lc(r,i){const s=Mn(i,r);16&s[2]||(s[2]|=32)}function Ag(r,i,s,a){let u=!1;if(ha()){const d=null===a?null:{"":-1},m=function Hf(r,i){const s=r.directiveRegistry;let a=null,u=null;if(s)for(let d=0;d<s.length;d++){const m=s[d];if(_g(i,m.selectors,!1))if(a||(a=[]),ar(m))if(null!==m.findHostDirectiveDefs){const v=[];u=u||new Map,m.findHostDirectiveDefs(m,v,u),a.unshift(...v,m),jf(r,i,v.length)}else a.unshift(m),jf(r,i,0);else u=u||new Map,m.findHostDirectiveDefs?.(m,a,u),a.push(m)}return null===a?null:[a,u]}(r,s);let v,E;null===m?v=E=null:[v,E]=m,null!==v&&(u=!0,py(r,i,s,v,d,E)),d&&function gy(r,i,s){if(i){const a=r.localNames=[];for(let u=0;u<i.length;u+=2){const d=s[i[u+1]];if(null==d)throw new ie(-301,!1);a.push(i[u],d)}}}(s,a,d)}return s.mergedAttrs=Mi(s.mergedAttrs,s.attrs),u}function py(r,i,s,a,u,d){for(let w=0;w<a.length;w++)Pl(Bs(s,i),r,a[w].type);!function NI(r,i,s){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+s,r.providerIndexes=i}(s,r.data.length,a.length);for(let w=0;w<a.length;w++){const A=a[w];A.providersResolver&&A.providersResolver(A)}let m=!1,v=!1,E=du(r,i,a.length,null);for(let w=0;w<a.length;w++){const A=a[w];s.mergedAttrs=Mi(s.mergedAttrs,A.hostAttrs),Gf(r,s,i,E,A),$f(E,A,u),null!==A.contentQueries&&(s.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(s.flags|=64);const O=A.type.prototype;!m&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(s.index),m=!0),!v&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(s.index),v=!0),E++}!function ah(r,i,s){const u=i.directiveEnd,d=r.data,m=i.attrs,v=[];let E=null,w=null;for(let A=i.directiveStart;A<u;A++){const O=d[A],G=s?s.get(O):null,he=G?G.outputs:null;E=fu(O.inputs,A,E,G?G.inputs:null),w=fu(O.outputs,A,w,he);const Me=null===E||null===m||K_(i)?null:kI(E,A,m);v.push(Me)}null!==E&&(E.hasOwnProperty("class")&&(i.flags|=8),E.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=v,i.inputs=E,i.outputs=w}(r,s,d)}function Bf(r,i,s){const a=s.directiveStart,u=s.directiveEnd,d=s.index,m=function go(){return ft.lFrame.currentDirectiveIndex}();try{mo(d);for(let v=a;v<u;v++){const E=r.data[v],w=i[v];Zu(v),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&PI(E,w)}}finally{mo(-1),Zu(m)}}function PI(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function jf(r,i,s){i.componentOffset=s,(r.components||(r.components=[])).push(i.index)}function $f(r,i,s){if(s){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)s[i.exportAs[a]]=r;ar(i)&&(s[""]=r)}}function Gf(r,i,s,a,u){r.data[a]=u;const d=u.factory||(u.factory=ls(u.type)),m=new _o(d,ar(u),cu);r.blueprint[a]=m,s[a]=m,function MI(r,i,s,a,u){const d=u.hostBindings;if(d){let m=r.hostBindingOpCodes;null===m&&(m=r.hostBindingOpCodes=[]);const v=~i.index;(function Mg(r){let i=r.length;for(;i>0;){const s=r[--i];if("number"==typeof s&&s<0)return s}return 0})(m)!=v&&m.push(v),m.push(s,a,d)}}(r,i,a,du(r,s,u.hostVars,Be),u)}function Hi(r,i,s,a,u,d){const m=xn(r,i);!function lh(r,i,s,a,u,d,m){if(null==d)r.removeAttribute(i,u,s);else{const v=null==m?de(d):m(d,a||"",u);r.setAttribute(i,u,v,s)}}(i[11],m,d,r.value,s,a,u)}function OI(r,i,s,a,u,d){const m=d[i];if(null!==m){const v=a.setInput;for(let E=0;E<m.length;){const w=m[E++],A=m[E++],O=m[E++];null!==v?a.setInput(s,O,w,A):s[A]=O}}}function kI(r,i,s){let a=null,u=0;for(;u<s.length;){const d=s[u];if(0!==d)if(5!==d){if("number"==typeof d)break;if(r.hasOwnProperty(d)){null===a&&(a=[]);const m=r[d];for(let v=0;v<m.length;v+=2)if(m[v]===i){a.push(d,m[v+1],s[u+1]);break}}u+=2}else u+=2;else u+=4}return a}function Rg(r,i,s,a){return[r,!0,!1,i,null,0,a,s,null,null]}function LI(r,i){const s=Mn(i,r);if(ho(s)){const a=s[1];48&s[2]?Bi(a,s,a.template,s[8]):s[5]>0&&si(s)}}function si(r){for(let a=Oa(r);null!==a;a=Zl(a))for(let u=10;u<a.length;u++){const d=a[u];if(ho(d))if(512&d[2]){const m=d[1];Bi(m,d,m.template,d[8])}else d[5]>0&&si(d)}const s=r[1].components;if(null!==s)for(let a=0;a<s.length;a++){const u=Mn(s[a],r);ho(u)&&u[5]>0&&si(u)}}function Pg(r,i){const s=Mn(i,r),a=s[1];(function Ng(r,i){for(let s=i.length;s<r.blueprint.length;s++)i.push(r.blueprint[s])})(a,s),Wa(a,s,s[8])}function Uc(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Bc(r){for(;r;){r[2]|=32;const i=Oo(r);if(oo(r)&&!i)return r;r=i}return null}function za(r,i,s,a=!0){const u=i[10];u.begin&&u.begin();try{Bi(r,i,r.template,s)}catch(m){throw a&&yy(i,m),m}finally{u.end&&u.end()}}function Za(r,i,s){Cl(0),i(r,s)}function my(r){return r[7]||(r[7]=[])}function _y(r){return r.cleanup||(r.cleanup=[])}function yy(r,i){const s=r[9],a=s?s.get(rh,null):null;a&&a.handleError(i)}function Og(r,i,s,a,u){for(let d=0;d<s.length;){const m=s[d++],v=s[d++],E=i[m],w=r.data[m];null!==w.setInput?w.setInput(E,u,a,v):E[v]=u}}function ji(r,i,s){const a=hs(i,r);!function fc(r,i,s){r.setValue(i,s)}(r[11],a,s)}function qa(r,i,s){let a=s?r.styles:null,u=s?r.classes:null,d=0;if(null!==i)for(let m=0;m<i.length;m++){const v=i[m];"number"==typeof v?d=v:1==d?u=_e(u,v):2==d&&(a=_e(a,v+": "+i[++m]+";"))}s?r.styles=a:r.stylesWithoutHost=a,s?r.classes=u:r.classesWithoutHost=u}function uh(r,i,s,a,u=!1){for(;null!==s;){const d=i[s.index];if(null!==d&&a.push(gn(d)),Rr(d))for(let v=10;v<d.length;v++){const E=d[v],w=E[1].firstChild;null!==w&&uh(E[1],E,w,a)}const m=s.type;if(8&m)uh(r,i,s.child,a);else if(32&m){const v=Fd(s,i);let E;for(;E=v();)a.push(E)}else if(16&m){const v=Ec(i,s);if(Array.isArray(v))a.push(...v);else{const E=Oo(i[16]);uh(E[1],E,v,a,!0)}}s=u?s.projectionNext:s.next}return a}class Ka{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return uh(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Rr(i)){const s=i[8],a=s?s.indexOf(this):-1;a>-1&&(ka(i,a),wo(s,a))}this._attachedToViewContainer=!1}mc(this._lView[1],this._lView)}onDestroy(i){!function Uf(r,i,s,a){const u=my(i);null===s?u.push(a):(u.push(s),r.firstCreatePass&&_y(r).push(a,u.length-1))}(this._lView[1],this._lView,null,i)}markForCheck(){Bc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){za(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gc(r,i){Fa(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=i}}class gu extends Ka{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;za(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class Wf extends Sc{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Mt(i);return new jo(s,this.ngModule)}}function vy(r){const i=[];for(let s in r)r.hasOwnProperty(s)&&i.push({propName:r[s],templateName:s});return i}class Is{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,a){a=lt(a);const u=this.injector.get(i,fg,a);return u!==fg||s===fg?u:this.parentInjector.get(i,s,a)}}class jo extends Sf{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function ty(r){return r.map(Rf).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return vy(this.componentDef.inputs)}get outputs(){return vy(this.componentDef.outputs)}create(i,s,a,u){let d=(u=u||this.ngModule)instanceof zs?u:u?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const m=d?new Is(i,d):i,v=m.get(j_,null);if(null===v)throw new ie(407,!1);const E=m.get($_,null),w=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=a?function TI(r,i,s){return r.selectRootElement(i,s===rt.ShadowDom)}(w,a,this.componentDef.encapsulation):ql(w,A,function on(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(A)),G=this.componentDef.onPush?288:272,Q=cn(0,null,null,1,0,null,null,null,null,null),he=Vf(null,Q,null,G,null,null,v,w,E,m,null);let Me,Fe;ga(he);try{const We=this.componentDef;let st,Ce=null;We.findHostDirectiveDefs?(st=[],Ce=new Map,We.findHostDirectiveDefs(We,st,Ce),st.push(We)):st=[We];const pt=function xg(r,i){const s=r[1];return r[22]=i,Oc(s,22,2,"#host",null)}(he,O),yn=function mu(r,i,s,a,u,d,m,v){const E=u[1];!function Ey(r,i,s,a){for(const u of r)i.mergedAttrs=Mi(i.mergedAttrs,u.hostAttrs);null!==i.mergedAttrs&&(qa(i,i.mergedAttrs,!0),null!==s&&gf(a,s,i))}(a,r,i,m);const w=d.createRenderer(i,s),A=Vf(u,hy(s),null,s.onPush?32:16,u[r.index],r,d,w,v||null,null,null);return E.firstCreatePass&&jf(E,r,a.length-1),Uc(u,A),u[r.index]=A}(pt,O,We,st,he,v,w);Fe=Ps(Q,22),O&&function Fg(r,i,s,a){if(a)Qt(r,s,["ng-version",hg.full]);else{const{attrs:u,classes:d}=function ny(r){const i=[],s=[];let a=1,u=2;for(;a<r.length;){let d=r[a];if("string"==typeof d)2===u?""!==d&&i.push(d,r[++a]):8===u&&s.push(d);else{if(!Ui(u))break;u=d}a++}return{attrs:i,classes:s}}(i.selectors[0]);u&&Qt(r,s,u),d&&d.length>0&&vs(r,s,d.join(" "))}}(w,We,O,a),void 0!==s&&function $c(r,i,s){const a=r.projection=[];for(let u=0;u<i.length;u++){const d=s[u];a.push(null!=d?Array.from(d):null)}}(Fe,this.ngContentSelectors,s),Me=function Ya(r,i,s,a,u,d){const m=Fn(),v=u[1],E=xn(m,u);py(v,u,m,s,null,a);for(let A=0;A<s.length;A++)Pn(xr(u,v,m.directiveStart+A,m),u);Bf(v,u,m),E&&Pn(E,u);const w=xr(u,v,m.directiveStart+m.componentOffset,m);if(r[8]=u[8]=w,null!==d)for(const A of d)A(w,i);return vt(v,m,r),w}(yn,We,st,Ce,he,[Iy]),Wa(Q,he,null)}finally{qh()}return new kg(this.componentType,Me,Ac(Fe,he),he,Fe)}}class kg extends B_{constructor(i,s,a,u,d){super(),this.location=a,this._rootLView=u,this._tNode=d,this.instance=s,this.hostView=this.changeDetectorRef=new gu(u),this.componentType=i}setInput(i,s){const a=this._tNode.inputs;let u;if(null!==a&&(u=a[i])){const d=this._rootLView;Og(d[1],d,u,i,s),Lc(d,this._tNode.index)}}get injector(){return new wr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Iy(){const r=Fn();Si(Ie()[1],r)}function Lg(r){let i=function ch(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),s=!0;const a=[r];for(;i;){let u;if(ar(r))u=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ie(903,!1);u=i.\u0275dir}if(u){if(s){a.push(u);const m=r;m.inputs=Vg(r.inputs),m.declaredInputs=Vg(r.declaredInputs),m.outputs=Vg(r.outputs);const v=u.hostBindings;v&&jI(r,v);const E=u.viewQuery,w=u.contentQueries;if(E&&BI(r,E),w&&HI(r,w),ge(r.inputs,u.inputs),ge(r.declaredInputs,u.declaredInputs),ge(r.outputs,u.outputs),ar(u)&&u.data.animation){const A=r.data;A.animation=(A.animation||[]).concat(u.data.animation)}}const d=u.features;if(d)for(let m=0;m<d.length;m++){const v=d[m];v&&v.ngInherit&&v(r),v===Lg&&(s=!1)}}i=Object.getPrototypeOf(i)}!function UI(r){let i=0,s=null;for(let a=r.length-1;a>=0;a--){const u=r[a];u.hostVars=i+=u.hostVars,u.hostAttrs=Mi(u.hostAttrs,s=Mi(s,u.hostAttrs))}}(a)}function Vg(r){return r===Pt?{}:r===ot?[]:r}function BI(r,i){const s=r.viewQuery;r.viewQuery=s?(a,u)=>{i(a,u),s(a,u)}:i}function HI(r,i){const s=r.contentQueries;r.contentQueries=s?(a,u,d)=>{i(a,u,d),s(a,u,d)}:i}function jI(r,i){const s=r.hostBindings;r.hostBindings=s?(a,u)=>{i(a,u),s(a,u)}:i}let _u=null;function $o(){if(!_u){const r=dt.Symbol;if(r&&r.iterator)_u=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const a=i[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(_u=a)}}}return _u}function Qa(r){return!!zf(r)&&(Array.isArray(r)||!(r instanceof Map)&&$o()in r)}function zf(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function dr(r,i,s){return!Object.is(r[i],s)&&(r[i]=s,!0)}function Bg(r,i,s,a){const u=Ie();return dr(u,di(),i)&&(Rt(),Hi(qt(),u,r,i,s,a)),Bg}function yu(r,i,s,a){return dr(r,di(),s)?i+de(s)+a:Be}function Wo(r,i,s,a,u,d){const v=function Go(r,i,s,a){const u=dr(r,i,s);return dr(r,i+1,a)||u}(r,function Yr(){return ft.lFrame.bindingIndex}(),s,u);return Ir(2),v?i+de(s)+a+de(u)+d:Be}function $g(r,i,s,a,u,d,m,v){const E=Ie(),w=Rt(),A=r+22,O=w.firstCreatePass?function qI(r,i,s,a,u,d,m,v,E){const w=i.consts,A=Oc(i,r,4,m||null,Kr(w,v));Ag(i,s,A,Kr(w,E)),Si(i,A);const O=A.tViews=cn(2,A,a,u,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,w);return null!==i.queries&&(i.queries.template(i,A),O.queries=i.queries.embeddedTView(A)),A}(A,w,E,i,s,a,u,d,m):w.data[A];Er(O,!1);const G=E[11].createComment("");Xl(w,E,G,O),Pn(G,E),Uc(E,E[A]=Rg(G,E,G,O)),hl(O)&&bg(w,E,O),null!=m&&hu(E,O,v)}function Gg(r){return Ti(function vl(){return ft.lFrame.contextLView}(),22+r)}function Wg(r,i,s){const a=Ie();return dr(a,di(),i)&&Hr(Rt(),qt(),a,r,i,a[11],s,!1),Wg}function zg(r,i,s,a,u){const m=u?"class":"style";Og(r,s,i.inputs[m],m,a)}function Zc(r,i,s,a){const u=Ie(),d=Rt(),m=22+r,v=u[11],E=u[m]=ql(v,i,function Kh(){return ft.lFrame.currentNamespace}()),w=d.firstCreatePass?function KI(r,i,s,a,u,d,m){const v=i.consts,w=Oc(i,r,2,u,Kr(v,d));return Ag(i,s,w,Kr(v,m)),null!==w.attrs&&qa(w,w.attrs,!1),null!==w.mergedAttrs&&qa(w,w.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,w),w}(m,d,u,0,i,s,a):d.data[m];return Er(w,!0),gf(v,E,w),32!=(32&w.flags)&&Xl(d,u,E,w),0===function da(){return ft.lFrame.elementDepthCount}()&&Pn(E,u),function _l(){ft.lFrame.elementDepthCount++}(),hl(w)&&(bg(d,u,w),vt(d,w,u)),null!==a&&hu(u,w),Zc}function hh(){let r=Fn();pa()?function Os(){ft.lFrame.isParent=!1}():(r=r.parent,Er(r,!1));const i=r;!function $u(){ft.lFrame.elementDepthCount--}();const s=Rt();return s.firstCreatePass&&(Si(s,r),so(r)&&s.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Al(r){return 0!=(8&r.flags)}(i)&&zg(s,i,Ie(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Qu(r){return 0!=(16&r.flags)}(i)&&zg(s,i,Ie(),i.stylesWithoutHost,!1),hh}function Zg(r,i,s,a){return Zc(r,i,s,a),hh(),Zg}function Kg(){return Ie()}function Ys(r){return!!r&&"function"==typeof r.then}function fh(r){return!!r&&"function"==typeof r.subscribe}const ph=fh;function Yg(r,i,s,a){const u=Ie(),d=Rt(),m=Fn();return function Qg(r,i,s,a,u,d,m){const v=hl(a),w=r.firstCreatePass&&_y(r),A=i[8],O=my(i);let G=!0;if(3&a.type||m){const Me=xn(a,i),Fe=m?m(Me):Me,We=O.length,st=m?pt=>m(gn(pt[a.index])):a.index;let Ce=null;if(!m&&v&&(Ce=function QI(r,i,s,a){const u=r.cleanup;if(null!=u)for(let d=0;d<u.length-1;d+=2){const m=u[d];if(m===s&&u[d+1]===a){const v=i[7],E=u[d+2];return v.length>E?v[E]:null}"string"==typeof m&&(d+=2)}return null}(r,i,u,a.index)),null!==Ce)(Ce.__ngLastListenerFn__||Ce).__ngNextListenerFn__=d,Ce.__ngLastListenerFn__=d,G=!1;else{d=Ly(a,i,A,d,!1);const pt=s.listen(Fe,u,d);O.push(d,pt),w&&w.push(u,st,We,We+1)}}else d=Ly(a,i,A,d,!1);const Q=a.outputs;let he;if(G&&null!==Q&&(he=Q[u])){const Me=he.length;if(Me)for(let Fe=0;Fe<Me;Fe+=2){const yn=i[he[Fe]][he[Fe+1]].subscribe(d),In=O.length;O.push(d,yn),w&&w.push(u,a.index,In,-(In+1))}}}(d,u,u[11],m,r,i,a),Yg}function Yf(r,i,s,a){try{return!1!==s(a)}catch(u){return yy(r,u),!1}}function Ly(r,i,s,a,u){return function d(m){if(m===Function)return a;Bc(r.componentOffset>-1?Mn(r.index,i):i);let E=Yf(i,0,a,m),w=d.__ngNextListenerFn__;for(;w;)E=Yf(i,0,w,m)&&E,w=w.__ngNextListenerFn__;return u&&!1===E&&(m.preventDefault(),m.returnValue=!1),E}}function zo(r=1){return function Bp(r){return(ft.lFrame.contextLView=function wl(r,i){for(;r>0;)i=i[15],r--;return i}(r,ft.lFrame.contextLView))[8]}(r)}function Jg(r,i,s){return qc(r,"",i,"",s),Jg}function qc(r,i,s,a,u){const d=Ie(),m=yu(d,i,s,a);return m!==Be&&Hr(Rt(),qt(),d,r,m,d[11],u,!1),qc}function _h(r,i){return r<<17|i<<2}function Gi(r){return r>>17&32767}function yh(r){return 2|r}function Zo(r){return(131068&r)>>2}function rm(r,i){return-131069&r|i<<2}function im(r){return 1|r}function By(r,i,s,a,u){const d=r[s+1],m=null===i;let v=a?Gi(d):Zo(d),E=!1;for(;0!==v&&(!1===E||m);){const A=r[v+1];Hy(r[v],i)&&(E=!0,r[v+1]=a?im(A):yh(A)),v=a?Gi(A):Zo(A)}E&&(r[s+1]=a?yh(d):im(d))}function Hy(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&_s(r,i)>=0}function um(r,i){return function Wi(r,i,s,a){const u=Ie(),d=Rt(),m=Ir(2);d.firstUpdatePass&&function Cs(r,i,s,a){const u=r.data;if(null===u[s+1]){const d=u[lr()],m=function Kc(r,i){return i>=r.expandoStartIndex}(r,s);(function hm(r,i){return 0!=(r.flags&(i?8:16))})(d,a)&&null===i&&!m&&(i=!1),i=function Dh(r,i,s,a){const u=function fs(r){const i=ft.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let d=a?i.residualClasses:i.residualStyles;if(null===u)0===(a?i.classBindings:i.styleBindings)&&(s=qo(s=Du(null,r,i,s,a),i.attrs,a),d=null);else{const m=i.directiveStylingLast;if(-1===m||r[m]!==u)if(s=Du(u,r,i,s,a),null===d){let E=function nD(r,i,s){const a=s?i.classBindings:i.styleBindings;if(0!==Zo(a))return r[Gi(a)]}(r,i,a);void 0!==E&&Array.isArray(E)&&(E=Du(null,r,i,E[1],a),E=qo(E,i.attrs,a),function Zy(r,i,s,a){r[Gi(s?i.classBindings:i.styleBindings)]=a}(r,i,a,E))}else d=function dm(r,i,s){let a;const u=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<u;d++)a=qo(a,r[d].hostAttrs,s);return qo(a,i.attrs,s)}(r,i,a)}return void 0!==d&&(a?i.residualClasses=d:i.residualStyles=d),s}(u,d,i,a),function sm(r,i,s,a,u,d){let m=d?i.classBindings:i.styleBindings,v=Gi(m),E=Zo(m);r[a]=s;let A,w=!1;if(Array.isArray(s)){const O=s;A=O[1],(null===A||_s(O,A)>0)&&(w=!0)}else A=s;if(u)if(0!==E){const G=Gi(r[v+1]);r[a+1]=_h(G,v),0!==G&&(r[G+1]=rm(r[G+1],a)),r[v+1]=function nm(r,i){return 131071&r|i<<17}(r[v+1],a)}else r[a+1]=_h(v,0),0!==v&&(r[v+1]=rm(r[v+1],a)),v=a;else r[a+1]=_h(E,0),0===v?v=a:r[E+1]=rm(r[E+1],a),E=a;w&&(r[a+1]=yh(r[a+1])),By(r,A,a,!0),By(r,A,a,!1),function om(r,i,s,a,u){const d=u?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof i&&_s(d,i)>=0&&(s[a+1]=im(s[a+1]))}(i,A,r,a,d),m=_h(v,E),d?i.classBindings=m:i.styleBindings=m}(u,d,i,s,m,a)}}(d,r,m,a),i!==Be&&dr(u,m,i)&&function Ky(r,i,s,a,u,d,m,v){if(!(3&i.type))return;const E=r.data,w=E[v+1],A=function vh(r){return 1==(1&r)}(w)?Ch(E,i,s,u,Zo(w),m):void 0;wh(A)||(wh(d)||function Jf(r){return 2==(2&r)}(w)&&(d=Ch(E,null,s,u,v,m)),function $d(r,i,s,a,u){if(i)u?r.addClass(s,a):r.removeClass(s,a);else{let d=-1===a.indexOf("-")?void 0:Wt.DashCase;null==u?r.removeStyle(s,a,d):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),d|=Wt.Important),r.setStyle(s,a,u,d))}}(a,m,hs(lr(),s),u,d))}(d,d.data[lr()],u,u[11],r,u[m+1]=function yi(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=le(y(r)))),r}(i,s),a,m)}(r,i,null,!0),um}function Du(r,i,s,a,u){let d=null;const m=s.directiveEnd;let v=s.directiveStylingLast;for(-1===v?v=s.directiveStart:v++;v<m&&(d=i[v],a=qo(a,d.hostAttrs,u),d!==r);)v++;return null!==r&&(s.directiveStylingLast=v),a}function qo(r,i,s){const a=s?1:2;let u=-1;if(null!==i)for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?u=m:u===a&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Rn(r,m,!!s||i[++d]))}return void 0===r?null:r}function Ch(r,i,s,a,u,d){const m=null===i;let v;for(;u>0;){const E=r[u],w=Array.isArray(E),A=w?E[1]:E,O=null===A;let G=s[u+1];G===Be&&(G=O?ot:void 0);let Q=O?To(G,a):A===a?G:void 0;if(w&&!wh(Q)&&(Q=To(E,a)),wh(Q)&&(v=Q,m))return v;const he=r[u+1];u=m?Gi(he):Zo(he)}if(null!==i){let E=d?i.residualClasses:i.residualStyles;null!=E&&(v=To(E,a))}return v}function wh(r){return void 0!==r}function Yy(r,i=""){const s=Ie(),a=Rt(),u=r+22,d=a.firstCreatePass?Oc(a,u,1,i,null):a.data[u],m=s[u]=function Ud(r,i){return r.createText(i)}(s[11],i);Xl(a,s,m,d),Er(d,!1)}function np(r){return rp("",r,""),np}function rp(r,i,s){const a=Ie(),u=yu(a,r,i,s);return u!==Be&&ji(a,lr(),u),rp}function fm(r,i,s,a,u){const d=Ie(),m=Wo(d,r,i,s,a,u);return m!==Be&&ji(d,lr(),m),fm}const Ko=void 0;var sv=["en",[["a","p"],["AM","PM"],Ko],[["AM","PM"],Ko,Ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ko,"{1} 'at' {0}",Ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fD(r){const s=Math.floor(Math.abs(r)),a=r.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Jc={};function up(r){const i=function cp(r){return r.toLowerCase().replace(/_/g,"-")}(r);let s=jr(i);if(s)return s;const a=i.split("-")[0];if(s=jr(a),s)return s;if("en"===a)return sv;throw new ie(701,!1)}function Cm(r){return up(r)[Qe.PluralCase]}function jr(r){return r in Jc||(Jc[r]=dt.ng&&dt.ng.common&&dt.ng.common.locales&&dt.ng.common.locales[r]),Jc[r]}var Qe=(()=>((Qe=Qe||{})[Qe.LocaleId=0]="LocaleId",Qe[Qe.DayPeriodsFormat=1]="DayPeriodsFormat",Qe[Qe.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qe[Qe.DaysFormat=3]="DaysFormat",Qe[Qe.DaysStandalone=4]="DaysStandalone",Qe[Qe.MonthsFormat=5]="MonthsFormat",Qe[Qe.MonthsStandalone=6]="MonthsStandalone",Qe[Qe.Eras=7]="Eras",Qe[Qe.FirstDayOfWeek=8]="FirstDayOfWeek",Qe[Qe.WeekendRange=9]="WeekendRange",Qe[Qe.DateFormat=10]="DateFormat",Qe[Qe.TimeFormat=11]="TimeFormat",Qe[Qe.DateTimeFormat=12]="DateTimeFormat",Qe[Qe.NumberSymbols=13]="NumberSymbols",Qe[Qe.NumberFormats=14]="NumberFormats",Qe[Qe.CurrencyCode=15]="CurrencyCode",Qe[Qe.CurrencySymbol=16]="CurrencySymbol",Qe[Qe.CurrencyName=17]="CurrencyName",Qe[Qe.Currencies=18]="Currencies",Qe[Qe.Directionality=19]="Directionality",Qe[Qe.PluralCase=20]="PluralCase",Qe[Qe.ExtraData=21]="ExtraData",Qe))();const bu="en-US";let dp=bu;function Tu(r,i,s,a,u){if(r=Y(r),Array.isArray(r))for(let d=0;d<r.length;d++)Tu(r[d],i,s,a,u);else{const d=Rt(),m=Ie();let v=lu(r)?r:Y(r.provide),E=og(r);const w=Fn(),A=1048575&w.providerIndexes,O=w.directiveStart,G=w.providerIndexes>>20;if(lu(r)||!r.multi){const Q=new _o(E,u,cu),he=Om(v,i,u?A:A+G,O);-1===he?(Pl(Bs(w,m),d,v),Pm(d,r,i.length),i.push(v),w.directiveStart++,w.directiveEnd++,u&&(w.providerIndexes+=1048576),s.push(Q),m.push(Q)):(s[he]=Q,m[he]=Q)}else{const Q=Om(v,i,A+G,O),he=Om(v,i,A,A+G),Me=Q>=0&&s[Q],Fe=he>=0&&s[he];if(u&&!Fe||!u&&!Me){Pl(Bs(w,m),d,v);const We=function xv(r,i,s,a,u){const d=new _o(r,s,cu);return d.multi=[],d.index=i,d.componentProviders=0,Nm(d,u,a&&!s),d}(u?kv:WD,s.length,u,a,E);!u&&Fe&&(s[he].providerFactory=We),Pm(d,r,i.length,0),i.push(v),w.directiveStart++,w.directiveEnd++,u&&(w.providerIndexes+=1048576),s.push(We),m.push(We)}else Pm(d,r,Q>-1?Q:he,Nm(s[u?he:Q],E,!u&&a));!u&&a&&Fe&&s[he].componentProviders++}}}function Pm(r,i,s,a){const u=lu(i),d=function x_(r){return!!r.useClass}(i);if(u||d){const E=(d?Y(i.useClass):i).prototype.ngOnDestroy;if(E){const w=r.destroyHooks||(r.destroyHooks=[]);if(!u&&i.multi){const A=w.indexOf(s);-1===A?w.push(s,[a,E]):w[A+1].push(a,E)}else w.push(s,E)}}}function Nm(r,i,s){return s&&r.componentProviders++,r.multi.push(i)-1}function Om(r,i,s,a){for(let u=s;u<a;u++)if(i[u]===r)return u;return-1}function WD(r,i,s,a){return pp(this.multi,[])}function kv(r,i,s,a){const u=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=xr(s,s[1],this.providerFactory.index,a);d=v.slice(0,m),pp(u,d);for(let E=m;E<v.length;E++)d.push(v[E])}else d=[],pp(u,d);return d}function pp(r,i){for(let s=0;s<r.length;s++)i.push((0,r[s])());return i}function Fv(r,i=[]){return s=>{s.providersResolver=(a,u)=>function Ov(r,i,s){const a=Rt();if(a.firstCreatePass){const u=ar(r);Tu(s,a.data,a.blueprint,u,!0),Tu(i,a.data,a.blueprint,u,!1)}}(a,u?u(r):r,i)}}class id{}class zD{}function Lv(r,i){return new Vv(r,i??null)}class Vv extends id{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wf(this);const a=function $n(r,i){const s=r[Mr]||null;if(!s&&!0===i)throw new Error(`Type ${le(r)} does not have '\u0275mod' property.`);return s}(i);this._bootstrapComponents=function Bo(r){return r instanceof Function?r():r}(a.bootstrap),this._r3Injector=Pf(i,s,[{provide:id,useValue:this},{provide:Sc,useValue:this.componentFactoryResolver}],le(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class gp extends zD{constructor(i){super(),this.moduleType=i}create(i){return new Vv(this.moduleType,i)}}function Zv(r,i,s,a){return ad(Ie(),rn(),r,i,s,a)}function ad(r,i,s,a,u,d){const m=i+s;return dr(r,m,u)?function qs(r,i,s){return r[i]=s}(r,m+1,d?a.call(d,u):a(u)):function od(r,i){const s=r[i];return s===Be?void 0:s}(r,m+1)}function Jv(r,i){const s=Rt();let a;const u=r+22;s.firstCreatePass?(a=function sC(r,i){if(i)for(let s=i.length-1;s>=0;s--){const a=i[s];if(r===a.name)return a}}(i,s.pipeRegistry),s.data[u]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(u,a.onDestroy)):a=s.data[u];const d=a.factory||(a.factory=ls(a.type)),m=en(cu);try{const v=Ia(!1),E=d();return Ia(v),function qf(r,i,s,a){s>=r.data.length&&(r.data[s]=null,r.blueprint[s]=null),i[s]=a}(s,Ie(),u,E),E}finally{en(m)}}function Xv(r,i,s){const a=r+22,u=Ie(),d=Ti(u,a);return function Ei(r,i){return r[1].data[i].pure}(u,a)?ad(u,rn(),i,d.transform,s,d):d.transform(s)}function Xs(r){return i=>{setTimeout(r,void 0,i)}}const ws=class tE extends p.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,a){let u=i,d=s||(()=>null),m=a;if(i&&"object"==typeof i){const E=i;u=E.next?.bind(E),d=E.error?.bind(E),m=E.complete?.bind(E)}this.__isAsync&&(d=Xs(d),u&&(u=Xs(u)),m&&(m=Xs(m)));const v=super.subscribe({next:u,error:d,complete:m});return i instanceof X.w0&&i.add(v),v}};let Rh=(()=>{class r{}return r.__NG_ELEMENT_ID__=uC,r})();const aC=Rh,lC=class extends aC{constructor(i,s,a){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(i,s){const a=this._declarationTContainer.tViews,u=Vf(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null,s||null);u[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(u[19]=m.createEmbeddedView(a)),Wa(a,u,i),new Ka(u)}};function uC(){return function yp(r,i){return 4&r.type?new lC(i,r,Ac(r,i)):null}(Fn(),Ie())}let vp=(()=>{class r{}return r.__NG_ELEMENT_ID__=cC,r})();function cC(){return function Ep(r,i){let s;const a=i[r.index];if(Rr(a))s=a;else{let u;if(8&r.type)u=gn(a);else{const d=i[11];u=d.createComment("");const m=xn(r,i);ti(d,yc(d,m),u,function Yp(r,i){return r.nextSibling(i)}(d,m),!1)}i[r.index]=s=Rg(a,i,u,r),Uc(i,s)}return new nE(s,r,i)}(Fn(),Ie())}const dC=vp,nE=class extends dC{constructor(i,s,a){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=a}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new wr(this._hostTNode,this._hostLView)}get parentInjector(){const i=wa(this._hostTNode,this._hostLView);if(Ju(i)){const s=Us(i,this._hostLView),a=va(i);return new wr(s[1].data[a+8],s)}return new wr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=ai(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,a){let u,d;"number"==typeof a?u=a:null!=a&&(u=a.index,d=a.injector);const m=i.createEmbeddedView(s||{},d);return this.insert(m,u),m}createComponent(i,s,a,u,d){const m=i&&!function Co(r){return"function"==typeof r}(i);let v;if(m)v=s;else{const O=s||{};v=O.index,a=O.injector,u=O.projectableNodes,d=O.environmentInjector||O.ngModuleRef}const E=m?i:new jo(Mt(i)),w=a||this.parentInjector;if(!d&&null==E.ngModule){const G=(m?w:this.parentInjector).get(zs,null);G&&(d=G)}const A=E.create(w,u,void 0,d);return this.insert(A.hostView,v),A}insert(i,s){const a=i._lView,u=a[1];if(function ua(r){return Rr(r[3])}(a)){const A=this.indexOf(i);if(-1!==A)this.detach(A);else{const O=a[3],G=new nE(O,O[6],O[3]);G.detach(G.indexOf(i))}}const d=this._adjustIndex(s),m=this._lContainer;!function qp(r,i,s,a){const u=10+a,d=s.length;a>0&&(s[u-1][4]=i),a<d-10?(i[4]=s[u],oc(s,10+a,i)):(s.push(i),i[4]=null),i[3]=s;const m=i[17];null!==m&&s!==m&&function Kp(r,i){const s=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===s?r[9]=[i]:s.push(i)}(m,i);const v=i[19];null!==v&&v.insertView(r),i[2]|=64}(u,a,m,d);const v=ur(d,m),E=a[11],w=yc(E,m[7]);return null!==w&&function lf(r,i,s,a,u,d){a[0]=u,a[6]=i,Fa(r,a,s,1,u,d)}(u,m[6],E,a,w,v),i.attachToViewContainerRef(),oc(Ph(m),d,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=ai(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),a=ka(this._lContainer,s);a&&(wo(Ph(this._lContainer),s),mc(a[1],a))}detach(i){const s=this._adjustIndex(i,-1),a=ka(this._lContainer,s);return a&&null!=wo(Ph(this._lContainer),s)?new Ka(a):null}_adjustIndex(i,s=0){return i??this.length+s}};function ai(r){return r[8]}function Ph(r){return r[8]||(r[8]=[])}function Lh(...r){}const Tp=new Ft("Application Initializer");let Vh=(()=>{class r{constructor(s){this.appInits=s,this.resolve=Lh,this.reject=Lh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const d=this.appInits[u]();if(Ys(d))s.push(d);else if(ph(d)){const m=new Promise((v,E)=>{d.subscribe({complete:v,error:E})});s.push(m)}}Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}}return r.\u0275fac=function(s){return new(s||r)(ke(Tp,8))},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Ym=new Ft("AppId",{providedIn:"root",factory:function Qm(){return`${wE()}${wE()}${wE()}`}});function wE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NC=new Ft("Platform Initializer"),OC=new Ft("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kC=new Ft("appBootstrapListener"),Sp=new Ft("LocaleId",{providedIn:"root",factory:()=>function Ge(r,i=Ke.Default){return ke(r,lt(i))}(Sp,Ke.Optional|Ke.SkipSelf)||function xC(){return typeof $localize<"u"&&$localize.locale||bu}()}),bE=new Ft("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),TE=(()=>Promise.resolve(0))();function e_(r){typeof Zone>"u"?TE.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Yi{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ws(!1),this.onMicrotaskEmpty=new ws(!1),this.onStable=new ws(!1),this.onError=new ws(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function VC(){let r=dt.requestAnimationFrame,i=dt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const s=r[Zone.__symbol__("OriginalDelegate")];s&&(r=s);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Mp(r){const i=()=>{!function SE(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(dt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,n_(r),r.isCheckStableRunning=!0,t_(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),n_(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,d,m,v)=>{try{return AE(r),s.invokeTask(u,d,m,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),ME(r)}},onInvoke:(s,a,u,d,m,v,E)=>{try{return AE(r),s.invoke(u,d,m,v,E)}finally{r.shouldCoalesceRunChangeDetection&&i(),ME(r)}},onHasTask:(s,a,u,d)=>{s.hasTask(u,d),a===u&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,n_(r),t_(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(s,a,u,d)=>(s.handleError(u,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yi.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(Yi.isInAngularZone())throw new ie(909,!1)}run(i,s,a){return this._inner.run(i,s,a)}runTask(i,s,a,u){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+u,i,UC,Lh,Lh);try{return d.runTask(m,s,a)}finally{d.cancelTask(m)}}runGuarded(i,s,a){return this._inner.runGuarded(i,s,a)}runOutsideAngular(i){return this._outer.run(i)}}const UC={};function t_(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function n_(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function AE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function ME(r){r._nesting--,t_(r)}class BC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ws,this.onMicrotaskEmpty=new ws,this.onStable=new ws,this.onError=new ws}run(i,s,a){return i.apply(s,a)}runGuarded(i,s,a){return i.apply(s,a)}runOutsideAngular(i){return i()}runTask(i,s,a,u){return i.apply(s,a)}}const r_=new Ft(""),HC=new Ft("");let i_,jC=(()=>{class r{constructor(s,a,u){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,i_||(function Qo(r){i_=r}(u),u.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yi.assertNotInAngularZone(),e_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())e_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let d=-1;a&&a>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:d,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,u){return[]}}return r.\u0275fac=function(s){return new(s||r)(ke(Yi),ke(RE),ke(HC))},r.\u0275prov=nt({token:r,factory:r.\u0275fac}),r})(),RE=(()=>{class r{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return i_?.findTestabilityInTree(this,s,a)??null}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),ol=null;const dd=new Ft("AllowMultipleToken"),Ru=new Ft("PlatformDestroyListeners");function NE(r,i,s=[]){const a=`Platform: ${i}`,u=new Ft(a);return(d=[])=>{let m=s_();if(!m||m.injector.get(dd,!1)){const v=[...s,...d,{provide:u,useValue:!0}];r?r(v):function Bh(r){if(ol&&!ol.get(dd,!1))throw new ie(400,!1);ol=r;const i=r.get(kE);(function PE(r){const i=r.get(NC,null);i&&i.forEach(s=>s())})(r)}(function OE(r=[],i){return nr.create({name:i,providers:[{provide:ja,useValue:"platform"},{provide:Ru,useValue:new Set([()=>ol=null])},...r]})}(v,a))}return function WC(r){const i=s_();if(!i)throw new ie(401,!1);return i}()}}function s_(){return ol?.get(kE)??null}let kE=(()=>{class r{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const u=function FE(r,i){let s;return s="noop"===r?new BC:("zone.js"===r?void 0:r)||new Yi(i),s}(a?.ngZone,function xE(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(a)),d=[{provide:Yi,useValue:u}];return u.run(()=>{const m=nr.create({providers:d,parent:this.injector,name:s.moduleType.name}),v=s.create(m),E=v.injector.get(rh,null);if(!E)throw new ie(402,!1);return u.runOutsideAngular(()=>{const w=u.onError.subscribe({next:A=>{E.handleError(A)}});v.onDestroy(()=>{Pp(this._modules,v),w.unsubscribe()})}),function o_(r,i,s){try{const a=s();return Ys(a)?a.catch(u=>{throw i.runOutsideAngular(()=>r.handleError(u)),u}):a}catch(a){throw i.runOutsideAngular(()=>r.handleError(a)),a}}(E,u,()=>{const w=v.injector.get(Vh);return w.runInitializers(),w.donePromise.then(()=>(function lv(r){Et(r,"Expected localeId to be defined"),"string"==typeof r&&(dp=r.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Sp,bu)||bu),this._moduleDoBootstrap(v),v))})})}bootstrapModule(s,a=[]){const u=al({},a);return function Uh(r,i,s){const a=new gp(s);return Promise.resolve(a)}(0,0,s).then(d=>this.bootstrapModuleFactory(d,u))}_moduleDoBootstrap(s){const a=s.injector.get(Qi);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new ie(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Ru,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(s){return new(s||r)(ke(nr))},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function al(r,i){return Array.isArray(i)?i.reduce(al,r):{...r,...i}}let Qi=(()=>{class r{constructor(s,a,u){this._zone=s,this._injector=a,this._exceptionHandler=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const d=new N.y(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new N.y(v=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Yi.assertNotInAngularZone(),e_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const w=this._zone.onUnstable.subscribe(()=>{Yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{E.unsubscribe(),w.unsubscribe()}});this.isStable=(0,se.T)(d,m.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const u=s instanceof Sf;if(!this._injector.get(Vh).done)throw!u&&function wn(r){const i=Mt(r)||Cn(r)||hn(r);return null!==i&&i.standalone}(s),new ie(405,false);let m;m=u?s:this._injector.get(Sc).resolveComponentFactory(s),this.componentTypes.push(m.componentType);const v=function $C(r){return r.isBoundToModule}(m)?void 0:this._injector.get(id),w=m.create(nr.NULL,[],a||m.selector,v),A=w.location.nativeElement,O=w.injector.get(r_,null);return O?.registerApplication(A),w.onDestroy(()=>{this.detachView(w.hostView),Pp(this.components,w),O?.unregisterApplication(A)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new ie(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Pp(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(kC,[]);a.push(...this._bootstrapListeners),a.forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Pp(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ie(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(s){return new(s||r)(ke(Yi),ke(zs),ke(rh))},r.\u0275prov=nt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Pp(r,i){const s=r.indexOf(i);s>-1&&r.splice(s,1)}function ZC(){return!1}let VE=(()=>{class r{}return r.__NG_ELEMENT_ID__=Tr,r})();function Tr(r){return function ll(r,i,s){if(Pr(r)&&!s){const a=Mn(r.index,i);return new Ka(a,a)}return 47&r.type?new Ka(i[16],i):null}(Fn(),Ie(),16==(16&r))}class d_{constructor(){}supports(i){return Qa(i)}create(i){return new h_(i)}}const WE=(r,i)=>i;class h_{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||WE}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,a=this._removalsHead,u=0,d=null;for(;s||a;){const m=!a||s&&s.currentIndex<p_(a,u,d)?s:a,v=p_(m,u,d),E=m.currentIndex;if(m===a)u--,a=a._nextRemoved;else if(s=s._next,null==m.previousIndex)u++;else{d||(d=[]);const w=v-u,A=E-u;if(w!=A){for(let G=0;G<w;G++){const Q=G<d.length?d[G]:d[G]=0,he=Q+G;A<=he&&he<w&&(d[G]=Q+1)}d[m.previousIndex]=A-w}}v!==E&&i(m,v,E)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!Qa(i))throw new ie(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let u,d,m,s=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let v=0;v<this.length;v++)d=i[v],m=this._trackByFn(v,d),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,d,m,v)),Object.is(s.item,d)||this._addIdentityChange(s,d)):(s=this._mismatch(s,d,m,v),a=!0),s=s._next}else u=0,function Ug(r,i){if(Array.isArray(r))for(let s=0;s<r.length;s++)i(r[s]);else{const s=r[$o()]();let a;for(;!(a=s.next()).done;)i(a.value)}}(i,v=>{m=this._trackByFn(u,v),null!==s&&Object.is(s.trackById,m)?(a&&(s=this._verifyReinsertion(s,v,m,u)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,m,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,a,u){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,d,u)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,d,u)):i=this._addAfter(new xp(s,a),d,u),i}_verifyReinsertion(i,s,a,u){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?i=this._reinsertAfter(d,i._prev,u):i.currentIndex!=u&&(i.currentIndex=u,this._addToMoves(i,u)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const u=i._prevRemoved,d=i._nextRemoved;return null===u?this._removalsHead=d:u._nextRemoved=d,null===d?this._removalsTail=u:d._prevRemoved=u,this._insertAfter(i,s,a),this._addToMoves(i,a),i}_moveAfter(i,s,a){return this._unlink(i),this._insertAfter(i,s,a),this._addToMoves(i,a),i}_addAfter(i,s,a){return this._insertAfter(i,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,a){const u=null===s?this._itHead:s._next;return i._next=u,i._prev=s,null===u?this._itTail=i:u._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new f_),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,a=i._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new f_),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class xp{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zE{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const s=i._prevDup,a=i._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class f_{constructor(){this.map=new Map}put(i){const s=i.trackById;let a=this.map.get(s);a||(a=new zE,this.map.set(s,a)),a.add(i)}get(i,s){const u=this.map.get(i);return u?u.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function p_(r,i,s){const a=r.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+i+u}class Sr{constructor(){}supports(i){return i instanceof Map||zf(i)}create(){return new ul}}class ul{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||zf(i)))throw new ie(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const d=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,d)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const a=i._prev;return s._next=i,s._prev=a,i._prev=s,a&&(a._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const u=this._records.get(i);this._maybeAddToChanges(u,s);const d=u._prev,m=u._next;return d&&(d._next=m),m&&(m._prev=d),u._next=null,u._prev=null,u}const a=new ZE(i);return this._records.set(i,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(a=>s(i[a],a))}}class ZE{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function XC(){return new qE([new d_])}let qE=(()=>{class r{constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new r(s)}static extend(s){return{provide:r,useFactory:a=>r.create(s,a||XC()),deps:[[r,new Mo,new Ma]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new ie(901,!1)}}return r.\u0275prov=nt({token:r,providedIn:"root",factory:XC}),r})();function KE(){return new $h([new Sr])}let $h=(()=>{class r{constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new r(s)}static extend(s){return{provide:r,useFactory:a=>r.create(s,a||KE()),deps:[[r,new Mo,new Ma]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(a)return a;throw new ie(901,!1)}}return r.\u0275prov=nt({token:r,providedIn:"root",factory:KE}),r})();const r0=NE(null,"core",[]);let s0=(()=>{class r{constructor(s){}}return r.\u0275fac=function(s){return new(s||r)(ke(Qi))},r.\u0275mod=nn({type:r}),r.\u0275inj=li({}),r})();function o0(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},3942:(et,we,k)=>{k.d(we,{Z:()=>tt});var p=k(2090),X=k(4859),N=k(9681),se=k(1877);class re{constructor(ie,ye){this._delegate=ie,this.firebase=ye,(0,N._addComponent)(ie,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this._delegate.automaticDataCollectionEnabled=ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ie=>{this._delegate.checkDestroyed(),ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ie,ye=N._DEFAULT_ENTRY_NAME){var de;this._delegate.checkDestroyed();const be=this._delegate.container.getProvider(ie);return!be.isInitialized()&&"EXPLICIT"===(null===(de=be.getComponent())||void 0===de?void 0:de.instantiationMode)&&be.initialize(),be.getImmediate({identifier:ye})}_removeServiceInstance(ie,ye=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ie).clearInstance(ye)}_addComponent(ie){(0,N._addComponent)(this._delegate,ie)}_addOrOverwriteComponent(ie){(0,N._addOrOverwriteComponent)(this._delegate,ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function _e(){const xe=function le(xe){const ie={},ye={__esModule:!0,initializeApp:function Ee(Se,U={}){const ue=N.initializeApp(Se,U);if((0,p.r3)(ie,ue.name))return ie[ue.name];const $=new xe(ue,ye);return ie[ue.name]=$,$},app:be,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function De(Se){const U=Se.name,ue=U.replace("-compat","");if(N._registerComponent(Se)&&"PUBLIC"===Se.type){const $=(q=be())=>{if("function"!=typeof q[ue])throw ge.create("invalid-app-argument",{appName:U});return q[ue]()};void 0!==Se.serviceProps&&(0,p.ZB)($,Se.serviceProps),ye[ue]=$,xe.prototype[ue]=function(...q){return this._getService.bind(this,U).apply(this,Se.multipleInstances?q:[])}}return"PUBLIC"===Se.type?ye[ue]:null},removeApp:function de(Se){delete ie[Se]},useAsService:function Ne(Se,U){return"serverAuth"===U?null:U},modularAPIs:N}};function be(Se){if(!(0,p.r3)(ie,Se=Se||N._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Se});return ie[Se]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function fe(){return Object.keys(ie).map(Se=>ie[Se])}}),be.App=xe,ye}(re);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function ie(ye){(0,p.ZB)(xe,ye)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),xe}(),H=new se.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=j;!function Re(xe){(0,N.registerVersion)("@firebase/app-compat","0.2.4",xe)}()},9681:(et,we,k)=>{k.r(we),k.d(we,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Xi,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>St,_addOrOverwriteComponent:()=>On,_apps:()=>Et,_clearComponents:()=>li,_components:()=>it,_getProvider:()=>nt,_registerComponent:()=>zn,_removeServiceInstance:()=>Ut,deleteApp:()=>Di,getApp:()=>_r,getApps:()=>qn,initializeApp:()=>Ii,onLog:()=>Ke,registerVersion:()=>ir,setLogLevel:()=>Ci});var p=k(5861),X=k(4859),N=k(1877),se=k(2090),re=k(8766);class oe{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(Ge=>{if(function ge(ke){return"VERSION"===ke.getComponent()?.type}(Ge)){const lt=Ge.getImmediate();return`${lt.library}/${lt.version}`}return null}).filter(Ge=>Ge).join(" ")}}const le="@firebase/app",j=new N.Yd("@firebase/app"),$t="[DEFAULT]",_t={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Et=new Map,it=new Map;function St(ke,ve){try{ke.container.addComponent(ve)}catch(Ge){j.debug(`Component ${ve.name} failed to register with FirebaseApp ${ke.name}`,Ge)}}function On(ke,ve){ke.container.addOrOverwriteComponent(ve)}function zn(ke){const ve=ke.name;if(it.has(ve))return j.debug(`There were multiple attempts to register component ${ve}.`),!1;it.set(ve,ke);for(const Ge of Et.values())St(Ge,ke);return!0}function nt(ke,ve){const Ge=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Ge&&Ge.triggerHeartbeat(),ke.container.getProvider(ve)}function Ut(ke,ve,Ge=$t){nt(ke,ve).clearInstance(Ge)}function li(){it.clear()}const rr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zn{constructor(ve,Ge,lt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Ge),this._name=Ge.name,this._automaticDataCollectionEnabled=Ge.automaticDataCollectionEnabled,this._container=lt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}const Xi="9.17.2";function Ii(ke,ve={}){let Ge=ke;"object"!=typeof ve&&(ve={name:ve});const lt=Object.assign({name:$t,automaticDataCollectionEnabled:!1},ve),ht=lt.name;if("string"!=typeof ht||!ht)throw rr.create("bad-app-name",{appName:String(ht)});if(Ge||(Ge=(0,se.aH)()),!Ge)throw rr.create("no-options");const yt=Et.get(ht);if(yt){if((0,se.vZ)(Ge,yt.options)&&(0,se.vZ)(lt,yt.config))return yt;throw rr.create("duplicate-app",{appName:ht})}const jn=new X.H0(ht);for(const F of it.values())jn.addComponent(F);const L=new Zn(Ge,lt,jn);return Et.set(ht,L),L}function _r(ke=$t){const ve=Et.get(ke);if(!ve&&ke===$t)return Ii();if(!ve)throw rr.create("no-app",{appName:ke});return ve}function qn(){return Array.from(Et.values())}function Di(ke){return zt.apply(this,arguments)}function zt(){return(zt=(0,p.Z)(function*(ke){const ve=ke.name;Et.has(ve)&&(Et.delete(ve),yield Promise.all(ke.container.getProviders().map(Ge=>Ge.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function ir(ke,ve,Ge){var lt;let ht=null!==(lt=_t[ke])&&void 0!==lt?lt:ke;Ge&&(ht+=`-${Ge}`);const yt=ht.match(/\s|\//),jn=ve.match(/\s|\//);if(yt||jn){const L=[`Unable to register library "${ht}" with version "${ve}":`];return yt&&L.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),yt&&jn&&L.push("and"),jn&&L.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void j.warn(L.join(" "))}zn(new X.wA(`${ht}-version`,()=>({library:ht,version:ve}),"VERSION"))}function Ke(ke,ve){if(null!==ke&&"function"!=typeof ke)throw rr.create("invalid-log-argument");(0,N.Am)(ke,ve)}function Ci(ke){(0,N.Ub)(ke)}const Un="firebase-heartbeat-store";let wi=null;function dt(){return wi||(wi=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(ke,ve)=>{0===ve&&ke.createObjectStore(Un)}}).catch(ke=>{throw rr.create("idb-open",{originalErrorMessage:ke.message})})),wi}function ct(){return(ct=(0,p.Z)(function*(ke){try{return(yield dt()).transaction(Un).objectStore(Un).get(dn(ke))}catch(ve){if(ve instanceof se.ZR)j.warn(ve.message);else{const Ge=rr.create("idb-get",{originalErrorMessage:ve?.message});j.warn(Ge.message)}}})).apply(this,arguments)}function es(ke,ve){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,p.Z)(function*(ke,ve){try{const lt=(yield dt()).transaction(Un,"readwrite");return yield lt.objectStore(Un).put(ve,dn(ke)),lt.done}catch(Ge){if(Ge instanceof se.ZR)j.warn(Ge.message);else{const lt=rr.create("idb-set",{originalErrorMessage:Ge?.message});j.warn(lt.message)}}})).apply(this,arguments)}function dn(ke){return`${ke.name}!${ke.options.appId}`}class Ts{constructor(ve){this.container=ve,this._heartbeatsCache=null;const Ge=this.container.getProvider("app").getImmediate();this._storage=new At(Ge),this._heartbeatsCachePromise=this._storage.read().then(lt=>(this._heartbeatsCache=lt,lt))}triggerHeartbeat(){var ve=this;return(0,p.Z)(function*(){const lt=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=Ot();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==ht&&!ve._heartbeatsCache.heartbeats.some(yt=>yt.date===ht))return ve._heartbeatsCache.heartbeats.push({date:ht,agent:lt}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(yt=>{const jn=new Date(yt.date).valueOf();return Date.now()-jn<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,p.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const Ge=Ot(),{heartbeatsToSend:lt,unsentEntries:ht}=function Gr(ke,ve=1024){const Ge=[];let lt=ke.slice();for(const ht of ke){const yt=Ge.find(jn=>jn.agent===ht.agent);if(yt){if(yt.dates.push(ht.date),Kn(Ge)>ve){yt.dates.pop();break}}else if(Ge.push({agent:ht.agent,dates:[ht.date]}),Kn(Ge)>ve){Ge.pop();break}lt=lt.slice(1)}return{heartbeatsToSend:Ge,unsentEntries:lt}}(ve._heartbeatsCache.heartbeats),yt=(0,se.L)(JSON.stringify({version:2,heartbeats:lt}));return ve._heartbeatsCache.lastSentHeartbeatDate=Ge,ht.length>0?(ve._heartbeatsCache.heartbeats=ht,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),yt})()}}function Ot(){return(new Date).toISOString().substring(0,10)}class At{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,p.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function Je(ke){return ct.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var Ge=this;return(0,p.Z)(function*(){var lt;if(yield Ge._canUseIndexedDBPromise){const yt=yield Ge.read();return es(Ge.app,{lastSentHeartbeatDate:null!==(lt=ve.lastSentHeartbeatDate)&&void 0!==lt?lt:yt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var Ge=this;return(0,p.Z)(function*(){var lt;if(yield Ge._canUseIndexedDBPromise){const yt=yield Ge.read();return es(Ge.app,{lastSentHeartbeatDate:null!==(lt=ve.lastSentHeartbeatDate)&&void 0!==lt?lt:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...ve.heartbeats]})}})()}}function Kn(ke){return(0,se.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function Wr(ke){zn(new X.wA("platform-logger",ve=>new oe(ve),"PRIVATE")),zn(new X.wA("heartbeat",ve=>new Ts(ve),"PRIVATE")),ir(le,"0.9.4",ke),ir(le,"0.9.4","esm2017"),ir("fire-js","")}("")},4859:(et,we,k)=>{k.d(we,{H0:()=>le,wA:()=>N,zt:()=>re});var p=k(5861),X=k(2090);class N{constructor(j,H,Y){this.name=j,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const se="[DEFAULT]";class re{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const Y=new X.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:H});He&&Y.resolve(He)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const Y=this.normalizeInstanceIdentifier(j?.identifier),He=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Re){if(He)return null;throw Re}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ge(_e){return"EAGER"===_e.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[H,Y]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(H);try{const Re=this.getOrInitializeService({instanceIdentifier:He});Y.resolve(Re)}catch{}}}}clearInstance(j=se){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,p.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=se){return this.instances.has(j)}getOptions(j=se){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,Y=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[Re,tt]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Re)&&tt.resolve(He);return He}onInit(j,H){var Y;const He=this.normalizeInstanceIdentifier(H),Re=null!==(Y=this.onInitCallbacks.get(He))&&void 0!==Y?Y:new Set;Re.add(j),this.onInitCallbacks.set(He,Re);const tt=this.instances.get(He);return tt&&j(tt,He),()=>{Re.delete(j)}}invokeOnInitCallbacks(j,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const He of Y)try{He(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let Y=this.instances.get(j);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=j,_e===se?void 0:_e),options:H}),this.instances.set(j,Y),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(Y,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Y)}catch{}var _e;return Y||null}normalizeInstanceIdentifier(j=se){return this.component?this.component.multipleInstances?j:se:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new re(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(et,we,k)=>{k.d(we,{Am:()=>_e,Ub:()=>le,Yd:()=>ge,in:()=>X});const p=[];var X=(()=>{return(j=X||(X={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",X;var j})();const N={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},se=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},oe=(j,H,...Y)=>{if(H<j.logLevel)return;const He=(new Date).toISOString(),Re=re[H];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Re](`[${He}]  ${j.name}:`,...Y)};class ge{constructor(H){this.name=H,this._logLevel=se,this._logHandler=oe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function le(j){p.forEach(H=>{H.setLogLevel(j)})}function _e(j,H){for(const Y of p){let He=null;H&&H.level&&(He=N[H.level]),Y.userLogHandler=null===j?null:(Re,tt,...xe)=>{const ie=xe.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");tt>=(He??Re.logLevel)&&j({level:X[tt].toLowerCase(),message:ie,args:xe,type:Re.name})}}}},259:(et,we,k)=>{k.d(we,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=k(9681);(0,p.registerVersion)("firebase","9.17.2","app")},9260:(et,we,k)=>{k.d(we,{Z:()=>p.Z});var p=k(3942);p.Z.registerVersion("firebase","9.17.2","app-compat")},4217:(et,we,k)=>{k.r(we);var p=k(5861),X=k(3942),N=k(2090),se=k(9681),re=k(1877),oe=k(655),ge=k(4859);const tt=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},xe=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ie=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),de=new re.Yd("@firebase/auth");function be(g,...c){de.logLevel<=re.in.ERROR&&de.error(`Auth (${se.SDK_VERSION}): ${g}`,...c)}function Ee(g,...c){throw Se(g,...c)}function fe(g,...c){return Se(g,...c)}function De(g,c,h){const y=Object.assign(Object.assign({},xe()),{[c]:h});return new N.LL("auth","Firebase",y).create(c,{appName:g.name})}function Ne(g,c,h){if(!(c instanceof h))throw h.name!==c.constructor.name&&Ee(g,"argument-error"),De(g,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Se(g,...c){if("string"!=typeof g){const h=c[0],y=[...c.slice(1)];return y[0]&&(y[0].appName=g.name),g._errorFactory.create(h,...y)}return ie.create(g,...c)}function U(g,c,...h){if(!g)throw Se(c,...h)}function ue(g){const c="INTERNAL ASSERTION FAILED: "+g;throw be(c),new Error(c)}function $(g,c){g||ue(c)}const q=new Map;function ee(g){$(g instanceof Function,"Expected a class definition");let c=q.get(g);return c?($(c instanceof g,"Instance stored in cache mismatched with class"),c):(c=new g,q.set(g,c),c)}function Pe(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function qe(){return"http:"===Nt()||"https:"===Nt()}function Nt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Et{constructor(c,h){this.shortDelay=c,this.longDelay=h,$(h>c,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function $t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qe()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function it(g,c){$(g.emulator,"Emulator should always be set here");const{url:h}=g.emulator;return c?`${h}${c.startsWith("/")?c.slice(1):c}`:h}class St{static initialize(c,h,y){this.fetchImpl=c,h&&(this.headersImpl=h),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const On={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zn=new Et(3e4,6e4);function nt(g,c){return g.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:g.tenantId}):c}function Ut(g,c,h,y){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(g,c,h,y,b={}){return An(g,b,(0,p.Z)(function*(){let M={},z={};y&&("GET"===c?z=y:M={body:JSON.stringify(y)});const ae=(0,N.xO)(Object.assign({key:g.config.apiKey},z)).slice(1),Oe=yield g._getAdditionalHeaders();return Oe["Content-Type"]="application/json",g.languageCode&&(Oe["X-Firebase-Locale"]=g.languageCode),St.fetch()(Ii(g,g.config.apiHost,h,ae),Object.assign({method:c,headers:Oe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function An(g,c,h){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(g,c,h){g._canInitEmulator=!1;const y=Object.assign(Object.assign({},On),c);try{const b=new _r(g),M=yield Promise.race([h(),b.promise]);b.clearNetworkTimeout();const z=yield M.json();if("needConfirmation"in z)throw qn(g,"account-exists-with-different-credential",z);if(M.ok&&!("errorMessage"in z))return z;{const ae=M.ok?z.errorMessage:z.error.message,[Oe,$e]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw qn(g,"credential-already-in-use",z);if("EMAIL_EXISTS"===Oe)throw qn(g,"email-already-in-use",z);if("USER_DISABLED"===Oe)throw qn(g,"user-disabled",z);const ut=y[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw De(g,ut,$e);Ee(g,ut)}}catch(b){if(b instanceof N.ZR)throw b;Ee(g,"internal-error",{message:String(b)})}})).apply(this,arguments)}function Zn(g,c,h,y){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,p.Z)(function*(g,c,h,y,b={}){const M=yield Ut(g,c,h,y,b);return"mfaPendingCredential"in M&&Ee(g,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Ii(g,c,h,y){const b=`${c}${h}?${y}`;return g.config.emulator?it(g.config,b):`${g.config.apiScheme}://${b}`}class _r{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((h,y)=>{this.timer=setTimeout(()=>y(fe(this.auth,"network-request-failed")),zn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(g,c,h){const y={appName:g.name};h.email&&(y.email=h.email),h.phoneNumber&&(y.phoneNumber=h.phoneNumber);const b=fe(g,c,y);return b.customData._tokenResponse=h,b}function zt(){return(zt=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function ir(g,c){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ci(g,c){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function en(g){if(g)try{const c=new Date(Number(g));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function dt(){return(dt=(0,p.Z)(function*(g,c=!1){const h=(0,N.m9)(g),y=yield h.getIdToken(c),b=ct(y);U(b&&b.exp&&b.auth_time&&b.iat,h.auth,"internal-error");const M="object"==typeof b.firebase?b.firebase:void 0,z=M?.sign_in_provider;return{claims:b,token:y,authTime:en(Je(b.auth_time)),issuedAtTime:en(Je(b.iat)),expirationTime:en(Je(b.exp)),signInProvider:z||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function Je(g){return 1e3*Number(g)}function ct(g){const[c,h,y]=g.split(".");if(void 0===c||void 0===h||void 0===y)return be("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,N.tV)(h);return b?JSON.parse(b):(be("Failed to decode base64 JWT payload"),null)}catch(b){return be("Caught error parsing JWT payload as JSON",b?.toString()),null}}function Zt(g,c){return dn.apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(g,c,h=!1){if(h)return c;try{return yield c}catch(y){throw y instanceof N.ZR&&Bn(y)&&g.auth.currentUser===g&&(yield g.auth.signOut()),y}})).apply(this,arguments)}function Bn({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Hn{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var h;if(c){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const b=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(c=!1){var h=this;if(!this.isRunning)return;const y=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield h.iteration()}),y)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&c.schedule(!0))}c.schedule()})()}}class Ts{constructor(c,h){this.createdAt=c,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=en(this.lastLoginAt),this.creationTime=en(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ot(g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(g){var c;const h=g.auth,y=yield g.getIdToken(),b=yield Zt(g,Ci(h,{idToken:y}));U(b?.users.length,h,"internal-error");const M=b.users[0];g._notifyReloadListener(M);const z=null!==(c=M.providerUserInfo)&&void 0!==c&&c.length?ke(M.providerUserInfo):[],ae=Wr(g.providerData,z),ut=!!g.isAnonymous&&!(g.email&&M.passwordHash||ae?.length),Ye={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ae,metadata:new Ts(M.createdAt,M.lastLoginAt),isAnonymous:ut};Object.assign(g,Ye)})).apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(g){const c=(0,N.m9)(g);yield Ot(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Wr(g,c){return[...g.filter(y=>!c.some(b=>b.providerId===y.providerId)),...c]}function ke(g){return g.map(c=>{var{providerId:h}=c,y=(0,oe._T)(c,["providerId"]);return{providerId:h,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function Ge(){return(Ge=(0,p.Z)(function*(g,c){const h=yield An(g,{},(0,p.Z)(function*(){const y=(0,N.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:b,apiKey:M}=g.config,z=Ii(g,b,"/v1/token",`key=${M}`),ae=yield g._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",St.fetch()(z,{method:"POST",headers:ae,body:y})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){U(c.idToken,"internal-error"),U(typeof c.idToken<"u","internal-error"),U(typeof c.refreshToken<"u","internal-error");const h="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function es(g){const c=ct(g);return U(c,"internal-error"),U(typeof c.exp<"u","internal-error"),U(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,h)}getToken(c,h=!1){var y=this;return(0,p.Z)(function*(){return U(!y.accessToken||y.refreshToken,c,"user-token-expired"),h||!y.accessToken||y.isExpired?y.refreshToken?(yield y.refresh(c,y.refreshToken),y.accessToken):null:y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,h){var y=this;return(0,p.Z)(function*(){const{accessToken:b,refreshToken:M,expiresIn:z}=yield function ve(g,c){return Ge.apply(this,arguments)}(c,h);y.updateTokensAndExpiration(b,M,Number(z))})()}updateTokensAndExpiration(c,h,y){this.refreshToken=h||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(c,h){const{refreshToken:y,accessToken:b,expirationTime:M}=h,z=new lt;return y&&(U("string"==typeof y,"internal-error",{appName:c}),z.refreshToken=y),b&&(U("string"==typeof b,"internal-error",{appName:c}),z.accessToken=b),M&&(U("number"==typeof M,"internal-error",{appName:c}),z.expirationTime=M),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new lt,this.toJSON())}_performRefresh(){return ue("not implemented")}}function ht(g,c){U("string"==typeof g||typeof g>"u","internal-error",{appName:c})}class yt{constructor(c){var{uid:h,auth:y,stsTokenManager:b}=c,M=(0,oe._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=y,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Ts(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(c){var h=this;return(0,p.Z)(function*(){const y=yield Zt(h,h.stsTokenManager.getToken(h.auth,c));return U(y,h.auth,"internal-error"),h.accessToken!==y&&(h.accessToken=y,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),y})()}getIdTokenResult(c){return function wi(g){return dt.apply(this,arguments)}(this,c)}reload(){return function At(g){return Kn.apply(this,arguments)}(this)}_assign(c){this!==c&&(U(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(h=>Object.assign({},h)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new yt(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,h=!1){var y=this;return(0,p.Z)(function*(){let b=!1;c.idToken&&c.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(c),b=!0),h&&(yield Ot(y)),yield y.auth._persistUserIfCurrent(y),b&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var c=this;return(0,p.Z)(function*(){const h=yield c.getIdToken();return yield Zt(c,function Di(g,c){return zt.apply(this,arguments)}(c.auth,{idToken:h})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,h){var y,b,M,z,ae,Oe,$e,ut;const Ye=null!==(y=h.displayName)&&void 0!==y?y:void 0,Tn=null!==(b=h.email)&&void 0!==b?b:void 0,ri=null!==(M=h.phoneNumber)&&void 0!==M?M:void 0,iu=null!==(z=h.photoURL)&&void 0!==z?z:void 0,Va=null!==(ae=h.tenantId)&&void 0!==ae?ae:void 0,wc=null!==(Oe=h._redirectEventId)&&void 0!==Oe?Oe:void 0,Vi=null!==($e=h.createdAt)&&void 0!==$e?$e:void 0,Ua=null!==(ut=h.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:su,emailVerified:Zd,isAnonymous:bc,providerData:If,stsTokenManager:Qp}=h;U(su&&Qp,c,"internal-error");const T_=lt.fromJSON(this.name,Qp);U("string"==typeof su,c,"internal-error"),ht(Ye,c.name),ht(Tn,c.name),U("boolean"==typeof Zd,c,"internal-error"),U("boolean"==typeof bc,c,"internal-error"),ht(ri,c.name),ht(iu,c.name),ht(Va,c.name),ht(wc,c.name),ht(Vi,c.name),ht(Ua,c.name);const ou=new yt({uid:su,auth:c,email:Tn,emailVerified:Zd,displayName:Ye,isAnonymous:bc,photoURL:iu,phoneNumber:ri,tenantId:Va,stsTokenManager:T_,createdAt:Vi,lastLoginAt:Ua});return If&&Array.isArray(If)&&(ou.providerData=If.map(qd=>Object.assign({},qd))),wc&&(ou._redirectEventId=wc),ou}static _fromIdTokenResponse(c,h,y=!1){return(0,p.Z)(function*(){const b=new lt;b.updateFromServerResponse(h);const M=new yt({uid:h.localId,auth:c,stsTokenManager:b,isAnonymous:y});return yield Ot(M),M})()}}const L=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(h,y){var b=this;return(0,p.Z)(function*(){b.storage[h]=y})()}_get(h){var y=this;return(0,p.Z)(function*(){const b=y.storage[h];return void 0===b?null:b})()}_remove(h){var y=this;return(0,p.Z)(function*(){delete y.storage[h]})()}_addListener(h,y){}_removeListener(h,y){}}return g.type="NONE",g})();function F(g,c,h){return`firebase:${g}:${c}:${h}`}class W{constructor(c,h,y){this.persistence=c,this.auth=h,this.userKey=y;const{config:b,name:M}=this.auth;this.fullUserKey=F(this.userKey,b.apiKey,M),this.fullPersistenceKey=F("persistence",b.apiKey,M),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const h=yield c.persistence._get(c.fullUserKey);return h?yt._fromJSON(c.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var h=this;return(0,p.Z)(function*(){if(h.persistence===c)return;const y=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=c,y?h.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,h,y="authUser"){return(0,p.Z)(function*(){if(!h.length)return new W(ee(L),c,y);const b=(yield Promise.all(h.map(function(){var $e=(0,p.Z)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return $e.apply(this,arguments)}}()))).filter($e=>$e);let M=b[0]||ee(L);const z=F(y,c.config.apiKey,c.name);let ae=null;for(const $e of h)try{const ut=yield $e._get(z);if(ut){const Ye=yt._fromJSON(c,ut);$e!==M&&(ae=Ye),M=$e;break}}catch{}const Oe=b.filter($e=>$e._shouldAllowMigration);return M._shouldAllowMigration&&Oe.length?(M=Oe[0],ae&&(yield M._set(z,ae.toJSON())),yield Promise.all(h.map(function(){var $e=(0,p.Z)(function*(ut){if(ut!==M)try{yield ut._remove(z)}catch{}});return function(ut){return $e.apply(this,arguments)}}())),new W(M,c,y)):new W(M,c,y)})()}}function ce(g){const c=g.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Pt(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(ne(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(tn(c))return"Blackberry";if(vn(c))return"Webos";if(Ze(c))return"Safari";if((c.includes("chrome/")||rt(c))&&!c.includes("edge/"))return"Chrome";if(ot(c))return"Android";{const y=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function ne(g=(0,N.z$)()){return/firefox\//i.test(g)}function Ze(g=(0,N.z$)()){const c=g.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function rt(g=(0,N.z$)()){return/crios\//i.test(g)}function Pt(g=(0,N.z$)()){return/iemobile/i.test(g)}function ot(g=(0,N.z$)()){return/android/i.test(g)}function tn(g=(0,N.z$)()){return/blackberry/i.test(g)}function vn(g=(0,N.z$)()){return/webos/i.test(g)}function Dt(g=(0,N.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function hd(g=(0,N.z$)()){return Dt(g)||ot(g)||vn(g)||tn(g)||/windows phone/i.test(g)||Pt(g)}function ea(g,c=[]){let h;switch(g){case"Browser":h=ce((0,N.z$)());break;case"Worker":h=`${ce((0,N.z$)())}-${g}`;break;default:h=g}const y=c.length?c.join(","):"FirebaseCore-web";return`${h}/JsCore/${se.SDK_VERSION}/${y}`}class cl{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,h){const y=M=>new Promise((z,ae)=>{try{z(c(M))}catch(Oe){ae(Oe)}});y.onAbort=h,this.queue.push(y);const b=this.queue.length-1;return()=>{this.queue[b]=()=>Promise.resolve()}}runMiddleware(c){var h=this;return(0,p.Z)(function*(){if(h.auth.currentUser===c)return;const y=[];try{for(const b of h.queue)yield b(c),b.onAbort&&y.push(b.onAbort)}catch(b){y.reverse();for(const M of y)try{M()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:b?.message})}})()}}class Pu{constructor(c,h,y){this.app=c,this.heartbeatServiceProvider=h,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nu(this),this.idTokenSubscription=new Nu(this),this.beforeStateQueue=new cl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ie,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,h){var y=this;return h&&(this._popupRedirectResolver=ee(h)),this._initializationPromise=this.queue((0,p.Z)(function*(){var b,M;if(!y._deleted&&(y.persistenceManager=yield W.create(y,c),!y._deleted)){if(null!==(b=y._popupRedirectResolver)&&void 0!==b&&b._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(h),y.lastNotifiedUid=(null===(M=y.currentUser)||void 0===M?void 0:M.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const h=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||h){if(c.currentUser&&h&&c.currentUser.uid===h.uid)return c._currentUser._assign(h),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(h,!0)}})()}initializeCurrentUser(c){var h=this;return(0,p.Z)(function*(){var y;const b=yield h.assertedPersistence.getCurrentUser();let M=b,z=!1;if(c&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const ae=null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId,Oe=M?._redirectEventId,$e=yield h.tryRedirectSignIn(c);(!ae||ae===Oe)&&$e?.user&&(M=$e.user,z=!0)}if(!M)return h.directlySetCurrentUser(null);if(!M._redirectEventId){if(z)try{yield h.beforeStateQueue.runMiddleware(M)}catch(ae){M=b,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(ae))}return M?h.reloadAndSetCurrentUserOrClear(M):h.directlySetCurrentUser(null)}return U(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===M._redirectEventId?h.directlySetCurrentUser(M):h.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(c){var h=this;return(0,p.Z)(function*(){let y=null;try{y=yield h._popupRedirectResolver._completeRedirectFn(h,c,!0)}catch{yield h._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(c){var h=this;return(0,p.Z)(function*(){try{yield Ot(c)}catch(y){if("auth/network-request-failed"!==y?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function _t(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var h=this;return(0,p.Z)(function*(){const y=c?(0,N.m9)(c):null;return y&&U(y.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(y&&y._clone(h))})()}_updateCurrentUser(c,h=!1){var y=this;return(0,p.Z)(function*(){if(!y._deleted)return c&&U(y.tenantId===c.tenantId,y,"tenant-id-mismatch"),h||(yield y.beforeStateQueue.runMiddleware(c)),y.queue((0,p.Z)(function*(){yield y.directlySetCurrentUser(c),y.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var h=this;return this.queue((0,p.Z)(function*(){yield h.assertedPersistence.setPersistence(ee(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new N.LL("auth","Firebase",c())}onAuthStateChanged(c,h,y){return this.registerStateListener(this.authStateSubscription,c,h,y)}beforeAuthStateChanged(c,h){return this.beforeStateQueue.pushCallback(c,h)}onIdTokenChanged(c,h,y){return this.registerStateListener(this.idTokenSubscription,c,h,y)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,h){var y=this;return(0,p.Z)(function*(){const b=yield y.getOrInitRedirectPersistenceManager(h);return null===c?b.removeCurrentUser():b.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var h=this;return(0,p.Z)(function*(){if(!h.redirectPersistenceManager){const y=c&&ee(c)||h._popupRedirectResolver;U(y,h,"argument-error"),h.redirectPersistenceManager=yield W.create(h,[ee(y._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(c){var h=this;return(0,p.Z)(function*(){var y,b;return h._isInitialized&&(yield h.queue((0,p.Z)(function*(){}))),(null===(y=h._currentUser)||void 0===y?void 0:y._redirectEventId)===c?h._currentUser:(null===(b=h.redirectUser)||void 0===b?void 0:b._redirectEventId)===c?h.redirectUser:null})()}_persistUserIfCurrent(c){var h=this;return(0,p.Z)(function*(){if(c===h.currentUser)return h.queue((0,p.Z)(function*(){return h.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(h=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,h,y,b){if(this._deleted)return()=>{};const M="function"==typeof h?h:h.next.bind(h),z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(z,this,"internal-error"),z.then(()=>M(this.currentUser)),"function"==typeof h?c.addObserver(h,y,b):c.addObserver(h)}directlySetCurrentUser(c){var h=this;return(0,p.Z)(function*(){h.currentUser&&h.currentUser!==c&&h._currentUser._stopProactiveRefresh(),c&&h.isProactiveRefreshEnabled&&c._startProactiveRefresh(),h.currentUser=c,c?yield h.assertedPersistence.setCurrentUser(c):yield h.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=ea(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var h;const y={"X-Client-Version":c.clientVersion};c.app.options.appId&&(y["X-Firebase-gmpid"]=c.app.options.appId);const b=yield null===(h=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();return b&&(y["X-Firebase-Client"]=b),y})()}}function nn(g){return(0,N.m9)(g)}class Nu{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,N.ne)(h=>this.observer=h)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ro(g){const c=g.indexOf(":");return c<0?"":g.substr(0,c+1)}function Mt(g){if(!g)return null;const c=Number(g);return isNaN(c)?null:c}class hn{constructor(c,h){this.providerId=c,this.signInMethod=h}toJSON(){return ue("not implemented")}_getIdTokenResponse(c){return ue("not implemented")}_linkToIdToken(c,h){return ue("not implemented")}_getReauthenticationResolver(c){return ue("not implemented")}}function wn(g,c){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:resetPassword",nt(g,c))})).apply(this,arguments)}function zr(g,c){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function gt(g,c){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:update",nt(g,c))})).apply(this,arguments)}function ui(){return(ui=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signInWithPassword",nt(g,c))})).apply(this,arguments)}function fn(g,c){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:sendOobCode",nt(g,c))})).apply(this,arguments)}function Yt(g,c){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,p.Z)(function*(g,c){return fn(g,c)})).apply(this,arguments)}function ns(g,c){return mt.apply(this,arguments)}function mt(){return(mt=(0,p.Z)(function*(g,c){return fn(g,c)})).apply(this,arguments)}function ta(g,c){return As.apply(this,arguments)}function As(){return(As=(0,p.Z)(function*(g,c){return fn(g,c)})).apply(this,arguments)}function fd(g,c){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(g,c){return fn(g,c)})).apply(this,arguments)}function rs(){return(rs=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signInWithEmailLink",nt(g,c))})).apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signInWithEmailLink",nt(g,c))})).apply(this,arguments)}class bi extends hn{constructor(c,h,y,b=null){super("password",y),this._email=c,this._password=h,this._tenantId=b}static _fromEmailAndPassword(c,h){return new bi(c,h,"password")}static _fromEmailAndCode(c,h,y=null){return new bi(c,h,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(c){var h=this;return(0,p.Z)(function*(){switch(h.signInMethod){case"password":return function sr(g,c){return ui.apply(this,arguments)}(c,{returnSecureToken:!0,email:h._email,password:h._password});case"emailLink":return function kn(g,c){return rs.apply(this,arguments)}(c,{email:h._email,oobCode:h._password});default:Ee(c,"internal-error")}})()}_linkToIdToken(c,h){var y=this;return(0,p.Z)(function*(){switch(y.signInMethod){case"password":return zr(c,{idToken:h,returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function is(g,c){return yr.apply(this,arguments)}(c,{idToken:h,email:y._email,oobCode:y._password});default:Ee(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function pn(g,c){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signInWithIdp",nt(g,c))})).apply(this,arguments)}class vr extends hn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const h=new vr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(h.idToken=c.idToken),c.accessToken&&(h.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(h.nonce=c.nonce),c.pendingToken&&(h.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(h.accessToken=c.oauthToken,h.secret=c.oauthTokenSecret):Ee("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c,{providerId:y,signInMethod:b}=h,M=(0,oe._T)(h,["providerId","signInMethod"]);if(!y||!b)return null;const z=new vr(y,b);return z.idToken=M.idToken||void 0,z.accessToken=M.accessToken||void 0,z.secret=M.secret,z.nonce=M.nonce,z.pendingToken=M.pendingToken||null,z}_getIdTokenResponse(c){return pn(c,this.buildRequest())}_linkToIdToken(c,h){const y=this.buildRequest();return y.idToken=h,pn(c,y)}_getReauthenticationResolver(c){const h=this.buildRequest();return h.autoCreate=!1,pn(c,h)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),c.postBody=(0,N.xO)(h)}return c}}function Ou(g,c){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:sendVerificationCode",nt(g,c))})).apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signInWithPhoneNumber",nt(g,c))})).apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(g,c){const h=yield Zn(g,"POST","/v1/accounts:signInWithPhoneNumber",nt(g,c));if(h.temporaryProof)throw qn(g,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const or={USER_NOT_FOUND:"user-not-found"};function so(){return(so=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signInWithPhoneNumber",nt(g,Object.assign(Object.assign({},c),{operation:"REAUTH"})),or)})).apply(this,arguments)}class Pr extends hn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,h){return new Pr({verificationId:c,verificationCode:h})}static _fromTokenResponse(c,h){return new Pr({phoneNumber:c,temporaryProof:h})}_getIdTokenResponse(c){return function os(g,c){return Yn.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,h){return function Gn(g,c){return ku.apply(this,arguments)}(c,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Rr(g,c){return so.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:h,verificationId:y,verificationCode:b}=this.params;return c&&h?{temporaryProof:c,phoneNumber:h}:{sessionInfo:y,code:b}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:h,verificationCode:y,phoneNumber:b,temporaryProof:M}=c;return y||h||b||M?new Pr({verificationId:h,verificationCode:y,phoneNumber:b,temporaryProof:M}):null}}class oo{constructor(c){var h,y,b,M,z,ae;const Oe=(0,N.zd)((0,N.pd)(c)),$e=null!==(h=Oe.apiKey)&&void 0!==h?h:null,ut=null!==(y=Oe.oobCode)&&void 0!==y?y:null,Ye=function hl(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=Oe.mode)&&void 0!==b?b:null);U($e&&ut&&Ye,"argument-error"),this.apiKey=$e,this.operation=Ye,this.code=ut,this.continueUrl=null!==(M=Oe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(z=Oe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ae=Oe.tenantId)&&void 0!==ae?ae:null}static parseLink(c){const h=function ar(g){const c=(0,N.zd)((0,N.pd)(g)).link,h=c?(0,N.zd)((0,N.pd)(c)).deep_link_id:null,y=(0,N.zd)((0,N.pd)(g)).deep_link_id;return(y?(0,N.zd)((0,N.pd)(y)).link:null)||y||h||c||g}(c);try{return new oo(h)}catch{return null}}}let fl=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(h,y){return bi._fromEmailAndPassword(h,y)}static credentialWithLink(h,y){const b=oo.parseLink(y);return U(b,"argument-error"),bi._fromEmailAndCode(h,b.code,b.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class ci{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class as extends ci{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ao extends as{static credentialFromJSON(c){const h="string"==typeof c?JSON.parse(c):c;return U("providerId"in h&&"signInMethod"in h,"argument-error"),vr._fromParams(h)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return U(c.idToken||c.accessToken,"argument-error"),vr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ao.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ao.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:h,oauthAccessToken:y,oauthTokenSecret:b,pendingToken:M,nonce:z,providerId:ae}=c;if(!y&&!b&&!h&&!M||!ae)return null;try{return new ao(ae)._credential({idToken:h,accessToken:y,nonce:z,pendingToken:M})}catch{return null}}}let xu=(()=>{class g extends as{constructor(){super("facebook.com")}static credential(h){return vr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),gd=(()=>{class g extends as{constructor(){super("google.com"),this.addScope("profile")}static credential(h,y){return vr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:y})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:y,oauthAccessToken:b}=h;if(!y&&!b)return null;try{return g.credential(y,b)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),pl=(()=>{class g extends as{constructor(){super("github.com")}static credential(h){return vr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class na extends hn{constructor(c,h){super(c,c),this.pendingToken=h}_getIdTokenResponse(c){return pn(c,this.buildRequest())}_linkToIdToken(c,h){const y=this.buildRequest();return y.idToken=h,pn(c,y)}_getReauthenticationResolver(c){const h=this.buildRequest();return h.autoCreate=!1,pn(c,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c,{providerId:y,signInMethod:b,pendingToken:M}=h;return y&&b&&M&&y===b?new na(y,M):null}static _create(c,h){return new na(c,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends ci{constructor(c){U(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Nr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Nr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const h=na.fromJSON(c);return U(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:h,providerId:y}=c;if(!h||!y)return null;try{return na._create(y,h)}catch{return null}}}let Lu=(()=>{class g extends as{constructor(){super("twitter.com")}static credential(h,y){return vr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:y})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:y,oauthTokenSecret:b}=h;if(!y||!b)return null;try{return g.credential(y,b)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function gl(g,c){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signUp",nt(g,c))})).apply(this,arguments)}class Qn{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,h,y,b=!1){return(0,p.Z)(function*(){const M=yield yt._fromIdTokenResponse(c,y,b),z=Uu(y);return new Qn({user:M,providerId:z,_tokenResponse:y,operationType:h})})()}static _forOperation(c,h,y){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(y,!0);const b=Uu(y);return new Qn({user:c,providerId:b,_tokenResponse:y,operationType:h})})()}}function Uu(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function md(){return(md=(0,p.Z)(function*(g){var c;const h=nn(g);if(yield h._initializationPromise,null!==(c=h.currentUser)&&void 0!==c&&c.isAnonymous)return new Qn({user:h.currentUser,providerId:null,operationType:"signIn"});const y=yield gl(h,{returnSecureToken:!0}),b=yield Qn._fromIdTokenResponse(h,"signIn",y,!0);return yield h._updateCurrentUser(b.user),b})).apply(this,arguments)}class Hu extends N.ZR{constructor(c,h,y,b){var M;super(h.code,h.message),this.operationType=y,this.user=b,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:c.name,tenantId:null!==(M=c.tenantId)&&void 0!==M?M:void 0,_serverResponse:h.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(c,h,y,b){return new Hu(c,h,y,b)}}function ls(g,c,h,y){return("reauthenticate"===c?h._getReauthenticationResolver(g):h._getIdTokenResponse(g)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Hu._fromErrorAndOperation(g,M,c,y):M})}function us(g){return new Set(g.map(({providerId:c})=>c).filter(c=>!!c))}function cs(){return(cs=(0,p.Z)(function*(g,c){const h=(0,N.m9)(g);yield ds(!0,h,c);const{providerUserInfo:y}=yield ir(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[c]}),b=us(y||[]);return h.providerData=h.providerData.filter(M=>b.has(M.providerId)),b.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h})).apply(this,arguments)}function sa(g,c){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(g,c,h=!1){const y=yield Zt(g,c._linkToIdToken(g.auth,yield g.getIdToken()),h);return Qn._forOperation(g,"link",y)})).apply(this,arguments)}function ds(g,c,h){return lo.apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(g,c,h){yield Ot(c);const b=!1===g?"provider-already-linked":"no-such-provider";U(us(c.providerData).has(h)===g,c.auth,b)})).apply(this,arguments)}function aa(g,c){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(g,c,h=!1){const{auth:y}=g,b="reauthenticate";try{const M=yield Zt(g,ls(y,b,c,g),h);U(M.idToken,y,"internal-error");const z=ct(M.idToken);U(z,y,"internal-error");const{sub:ae}=z;return U(g.uid===ae,y,"user-mismatch"),Qn._forOperation(g,b,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ee(y,"user-mismatch"),M}})).apply(this,arguments)}function la(g,c){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(g,c,h=!1){const y="signIn",b=yield ls(g,y,c),M=yield Qn._fromIdTokenResponse(g,y,b);return h||(yield g._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ln(g,c){return uo.apply(this,arguments)}function uo(){return(uo=(0,p.Z)(function*(g,c){return la(nn(g),c)})).apply(this,arguments)}function gn(g,c){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(g,c){const h=(0,N.m9)(g);return yield ds(!1,h,c.providerId),sa(h,c)})).apply(this,arguments)}function hs(g,c){return xn.apply(this,arguments)}function xn(){return(xn=(0,p.Z)(function*(g,c){return aa((0,N.m9)(g),c)})).apply(this,arguments)}function ju(g,c){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(g,c){return Zn(g,"POST","/v1/accounts:signInWithCustomToken",nt(g,c))})).apply(this,arguments)}function Mn(){return(Mn=(0,p.Z)(function*(g,c){const h=nn(g),y=yield ju(h,{token:c,returnSecureToken:!0}),b=yield Qn._fromIdTokenResponse(h,"signIn",y);return yield h._updateCurrentUser(b.user),b})).apply(this,arguments)}class co{constructor(c,h){this.factorId=c,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(c,h){return"phoneInfo"in h?ho._fromServerResponse(c,h):Ee(c,"internal-error")}}class ho extends co{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,h){return new ho(h)}}function ua(g,c,h){var y;U((null===(y=h.url)||void 0===y?void 0:y.length)>0,g,"invalid-continue-uri"),U(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),c.continueUrl=h.url,c.dynamicLinkDomain=h.dynamicLinkDomain,c.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(U(h.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),c.iOSBundleId=h.iOS.bundleId),h.android&&(U(h.android.packageName.length>0,g,"missing-android-pkg-name"),c.androidInstallApp=h.android.installApp,c.androidMinimumVersionCode=h.android.minimumVersion,c.androidPackageName=h.android.packageName)}function fo(){return(fo=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g),b={requestType:"PASSWORD_RESET",email:c};h&&ua(y,b,h),yield ns(y,b)})).apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(g,c,h){yield wn((0,N.m9)(g),{oobCode:c,newPassword:h})})).apply(this,arguments)}function ml(){return(ml=(0,p.Z)(function*(g,c){yield gt((0,N.m9)(g),{oobCode:c})})).apply(this,arguments)}function da(g,c){return _l.apply(this,arguments)}function _l(){return(_l=(0,p.Z)(function*(g,c){const h=(0,N.m9)(g),y=yield wn(h,{oobCode:c}),b=y.requestType;switch(U(b,h,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(y.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(y.mfaInfo,h,"internal-error");default:U(y.email,h,"internal-error")}let M=null;return y.mfaInfo&&(M=co._fromServerResponse(nn(h),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:M},operation:b}})).apply(this,arguments)}function ha(){return(ha=(0,p.Z)(function*(g,c){const{data:h}=yield da((0,N.m9)(g),c);return h.email})).apply(this,arguments)}function Gu(){return(Gu=(0,p.Z)(function*(g,c,h){const y=nn(g),b=yield gl(y,{returnSecureToken:!0,email:c,password:h}),M=yield Qn._fromIdTokenResponse(y,"signIn",b);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}function yl(){return(yl=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g),b={requestType:"EMAIL_SIGNIN",email:c};U(h.handleCodeInApp,y,"argument-error"),h&&ua(y,b,h),yield ta(y,b)})).apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g),b=fl.credentialWithLink(c,h||Pe());return U(b._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),ln(y,b)})).apply(this,arguments)}function fa(g,c){return Er.apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:createAuthUri",nt(g,c))})).apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(g,c){const y={identifier:c,continueUri:qe()?Pe():"http://localhost"},{signinMethods:b}=yield fa((0,N.m9)(g),y);return b||[]})).apply(this,arguments)}function zu(){return(zu=(0,p.Z)(function*(g,c){const h=(0,N.m9)(g),b={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};c&&ua(h.auth,b,c);const{email:M}=yield Yt(h.auth,b);M!==g.email&&(yield g.reload())})).apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:c};h&&ua(y.auth,M,h);const{email:z}=yield fd(y.auth,M);z!==g.email&&(yield g.reload())})).apply(this,arguments)}function Yr(g,c){return El.apply(this,arguments)}function El(){return(El=(0,p.Z)(function*(g,c){return Ut(g,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(g,{displayName:c,photoURL:h}){if(void 0===c&&void 0===h)return;const y=(0,N.m9)(g),M={idToken:yield y.getIdToken(),displayName:c,photoUrl:h,returnSecureToken:!0},z=yield Zt(y,Yr(y.auth,M));y.displayName=z.displayName||null,y.photoURL=z.photoUrl||null;const ae=y.providerData.find(({providerId:Oe})=>"password"===Oe);ae&&(ae.displayName=y.displayName,ae.photoURL=y.photoURL),yield y._updateTokensIfNecessary(z)})).apply(this,arguments)}function Dl(g,c,h){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(g,c,h){const{auth:y}=g,M={idToken:yield g.getIdToken(),returnSecureToken:!0};c&&(M.email=c),h&&(M.password=h);const z=yield Zt(g,zr(y,M));yield g._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class fs{constructor(c,h,y={}){this.isNewUser=c,this.providerId=h,this.profile=y}}class qu extends fs{constructor(c,h,y,b){super(c,h,y),this.username=b}}class Cl extends fs{constructor(c,h){super(c,"facebook.com",h)}}class Ku extends qu{constructor(c,h){super(c,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class _d extends fs{constructor(c,h){super(c,"google.com",h)}}class ga extends qu{constructor(c,h,y){super(c,"twitter.com",h,y)}}function yd(g){const{user:c,_tokenResponse:h}=g;return c.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Zu(g){var c,h;if(!g)return null;const{providerId:y}=g,b=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},M=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!y&&g?.idToken){const z=null===(h=null===(c=ct(g.idToken))||void 0===c?void 0:c.firebase)||void 0===h?void 0:h.sign_in_provider;if(z)return new fs(M,"anonymous"!==z&&"custom"!==z?z:null)}if(!y)return null;switch(y){case"facebook.com":return new Cl(M,b);case"github.com":return new Ku(M,b);case"google.com":return new _d(M,b);case"twitter.com":return new ga(M,b,g.screenName||null);case"custom":case"anonymous":return new fs(M,null);default:return new fs(M,y,b)}}(h)}class xs{constructor(c,h,y){this.type=c,this.credential=h,this.auth=y}static _fromIdtoken(c,h){return new xs("enroll",c,h)}static _fromMfaPendingCredential(c){return new xs("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var h,y;if(c?.multiFactorSession){if(null!==(h=c.multiFactorSession)&&void 0!==h&&h.pendingCredential)return xs._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(y=c.multiFactorSession)&&void 0!==y&&y.idToken)return xs._fromIdtoken(c.multiFactorSession.idToken)}return null}}class bl{constructor(c,h,y){this.session=c,this.hints=h,this.signInResolver=y}static _fromError(c,h){const y=nn(c),b=h.customData._serverResponse,M=(b.mfaInfo||[]).map(ae=>co._fromServerResponse(y,ae));U(b.mfaPendingCredential,y,"internal-error");const z=xs._fromMfaPendingCredential(b.mfaPendingCredential);return new bl(z,M,function(){var ae=(0,p.Z)(function*(Oe){const $e=yield Oe._process(y,z);delete b.mfaInfo,delete b.mfaPendingCredential;const ut=Object.assign(Object.assign({},b),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(h.operationType){case"signIn":const Ye=yield Qn._fromIdTokenResponse(y,h.operationType,ut);return yield y._updateCurrentUser(Ye.user),Ye;case"reauthenticate":return U(h.user,y,"internal-error"),Qn._forOperation(h.user,h.operationType,ut);default:Ee(y,"internal-error")}});return function(Oe){return ae.apply(this,arguments)}}())}resolveSignIn(c){var h=this;return(0,p.Z)(function*(){return h.signInResolver(c)})()}}function vd(g,c){return Ut(g,"POST","/v2/accounts/mfaEnrollment:start",nt(g,c))}class Si{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(y=>co._fromServerResponse(c.auth,y)))})}static _fromUser(c){return new Si(c)}getSession(){var c=this;return(0,p.Z)(function*(){return xs._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,h){var y=this;return(0,p.Z)(function*(){const b=c,M=yield y.getSession(),z=yield Zt(y.user,b._process(y.user.auth,M,h));return yield y.user._updateTokensIfNecessary(z),y.user.reload()})()}unenroll(c){var h=this;return(0,p.Z)(function*(){const y="string"==typeof c?c:c.uid,b=yield h.user.getIdToken();try{const M=yield Zt(h.user,function Ed(g,c){return Ut(g,"POST","/v2/accounts/mfaEnrollment:withdraw",nt(g,c))}(h.user.auth,{idToken:b,mfaEnrollmentId:y}));h.enrolledFactors=h.enrolledFactors.filter(({uid:z})=>z!==y),yield h.user._updateTokensIfNecessary(M),yield h.user.reload()}catch(M){throw M}})()}}const Dr=new WeakMap,Or="__sak";class Tl{constructor(c,h){this.storageRetriever=c,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Or,"1"),this.storage.removeItem(Or),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,h){return this.storage.setItem(c,JSON.stringify(h)),Promise.resolve()}_get(c){const h=this.storage.getItem(c);return Promise.resolve(h?JSON.parse(h):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Sl=(()=>{class g extends Tl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,y)=>this.onStorageEvent(h,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yu(){const g=(0,N.z$)();return Ze(g)||Dt(g)}()&&function no(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hd(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const y of Object.keys(this.listeners)){const b=this.storage.getItem(y),M=this.localCache[y];b!==M&&h(y,M,b)}}onStorageEvent(h,y=!1){if(!h.key)return void this.forAllChangedKeys((ae,Oe,$e)=>{this.notifyListeners(ae,$e)});const b=h.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(b);if(h.newValue!==ae)null!==h.newValue?this.storage.setItem(b,h.newValue):this.storage.removeItem(b);else if(this.localCache[b]===h.newValue&&!y)return}const M=()=>{const ae=this.storage.getItem(b);!y&&this.localCache[b]===ae||this.notifyListeners(b,ae)},z=this.storage.getItem(b);!function ts(){return(0,N.w1)()&&10===document.documentMode}()||z===h.newValue||h.newValue===h.oldValue?M():setTimeout(M,10)}notifyListeners(h,y){this.localCache[h]=y;const b=this.listeners[h];if(b)for(const M of Array.from(b))M(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,y,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:y,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,y){var b=()=>super._set,M=this;return(0,p.Z)(function*(){yield b().call(M,h,y),M.localCache[h]=JSON.stringify(y)})()}_get(h){var y=()=>super._get,b=this;return(0,p.Z)(function*(){const M=yield y().call(b,h);return b.localCache[h]=JSON.stringify(M),M})()}_remove(h){var y=()=>super._remove,b=this;return(0,p.Z)(function*(){yield y().call(b,h),delete b.localCache[h]})()}}return g.type="LOCAL",g})(),Qr=(()=>{class g extends Tl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,y){}_removeListener(h,y){}}return g.type="SESSION",g})();let Qu=(()=>{class g{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const y=this.receivers.find(M=>M.isListeningto(h));if(y)return y;const b=new g(h);return this.receivers.push(b),b}isListeningto(h){return this.eventTarget===h}handleEvent(h){var y=this;return(0,p.Z)(function*(){const b=h,{eventId:M,eventType:z,data:ae}=b.data,Oe=y.handlersMap[z];if(!Oe?.size)return;b.ports[0].postMessage({status:"ack",eventId:M,eventType:z});const $e=Array.from(Oe).map(function(){var Ye=(0,p.Z)(function*(Tn){return Tn(b.origin,ae)});return function(Tn){return Ye.apply(this,arguments)}}()),ut=yield function Al(g){return Promise.all(g.map(function(){var c=(0,p.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(y){return{fulfilled:!1,reason:y}}});return function(h){return c.apply(this,arguments)}}()))}($e);b.ports[0].postMessage({status:"done",eventId:M,eventType:z,response:ut})})()}_subscribe(h,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(y)}_unsubscribe(h,y){this.handlersMap[h]&&y&&this.handlersMap[h].delete(y),(!y||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Ai(g="",c=10){let h="";for(let y=0;y<c;y++)h+=Math.floor(10*Math.random());return g+h}class Ml{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,h,y=50){var b=this;return(0,p.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let z,ae;return new Promise((Oe,$e)=>{const ut=Ai("",20);M.port1.start();const Ye=setTimeout(()=>{$e(new Error("unsupported_event"))},y);ae={messageChannel:M,onMessage(Tn){const ri=Tn;if(ri.data.eventId===ut)switch(ri.data.status){case"ack":clearTimeout(Ye),z=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Oe(ri.data.response);break;default:clearTimeout(Ye),clearTimeout(z),$e(new Error("invalid_response"))}}},b.handlers.add(ae),M.port1.addEventListener("message",ae.onMessage),b.target.postMessage({eventType:c,eventId:ut,data:h},[M.port2])}).finally(()=>{ae&&b.removeMessageHandler(ae)})})()}}function Qt(){return window}function Vs(){return typeof Qt().WorkerGlobalScope<"u"&&"function"==typeof Qt().importScripts}function ya(){return(ya=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ea="firebaseLocalStorageDb",hi="firebaseLocalStorage",Ia="fbase_key";class Ri{constructor(c){this.request=c}toPromise(){return new Promise((c,h)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function ps(g,c){return g.transaction([hi],c?"readwrite":"readonly").objectStore(hi)}function Ca(){const g=indexedDB.open(Ea,1);return new Promise((c,h)=>{g.addEventListener("error",()=>{h(g.error)}),g.addEventListener("upgradeneeded",()=>{const y=g.result;try{y.createObjectStore(hi,{keyPath:Ia})}catch(b){h(b)}}),g.addEventListener("success",(0,p.Z)(function*(){const y=g.result;y.objectStoreNames.contains(hi)?c(y):(y.close(),yield function Da(){const g=indexedDB.deleteDatabase(Ea);return new Ri(g).toPromise()}(),c(yield Ca()))}))})}function Xn(g,c,h){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,p.Z)(function*(g,c,h){const y=ps(g,!0).put({[Ia]:c,value:h});return new Ri(y).toPromise()})).apply(this,arguments)}function gs(){return(gs=(0,p.Z)(function*(g,c){const h=ps(g,!1).get(c),y=yield new Ri(h).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function vo(g,c){const h=ps(g,!0).delete(c);return new Ri(h).toPromise()}const fi=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,p.Z)(function*(){return h.db||(h.db=yield Ca()),h.db})()}_withRetries(h){var y=this;return(0,p.Z)(function*(){let b=0;for(;;)try{const M=yield y._openDb();return yield h(M)}catch(M){if(b++>3)throw M;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,p.Z)(function*(){return Vs()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,p.Z)(function*(){h.receiver=Qu._getInstance(function va(){return Vs()?self:null}()),h.receiver._subscribe("keyChanged",function(){var y=(0,p.Z)(function*(b,M){return{keyProcessed:(yield h._poll()).includes(M.key)}});return function(b,M){return y.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var y=(0,p.Z)(function*(b,M){return["keyChanged"]});return function(b,M){return y.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,p.Z)(function*(){var y,b;if(h.activeServiceWorker=yield function Mi(){return ya.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Ml(h.activeServiceWorker);const M=yield h.sender._send("ping",{},800);!M||(null===(y=M[0])||void 0===y?void 0:y.fulfilled)&&(null===(b=M[0])||void 0===b?void 0:b.value.includes("keyChanged"))&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var y=this;return(0,p.Z)(function*(){if(y.sender&&y.activeServiceWorker&&function Ju(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:h},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const h=yield Ca();return yield Xn(h,Or,"1"),yield vo(h,Or),!0}catch{}return!1})()}_withPendingWrite(h){var y=this;return(0,p.Z)(function*(){y.pendingWrites++;try{yield h()}finally{y.pendingWrites--}})()}_set(h,y){var b=this;return(0,p.Z)(function*(){return b._withPendingWrite((0,p.Z)(function*(){return yield b._withRetries(M=>Xn(M,h,y)),b.localCache[h]=y,b.notifyServiceWorker(h)}))})()}_get(h){var y=this;return(0,p.Z)(function*(){const b=yield y._withRetries(M=>function Bs(g,c){return gs.apply(this,arguments)}(M,h));return y.localCache[h]=b,b})()}_remove(h){var y=this;return(0,p.Z)(function*(){return y._withPendingWrite((0,p.Z)(function*(){return yield y._withRetries(b=>vo(b,h)),delete y.localCache[h],y.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,p.Z)(function*(){const y=yield h._withRetries(z=>{const ae=ps(z,!1).getAll();return new Ri(ae).toPromise()});if(!y)return[];if(0!==h.pendingWrites)return[];const b=[],M=new Set;for(const{fbase_key:z,value:ae}of y)M.add(z),JSON.stringify(h.localCache[z])!==JSON.stringify(ae)&&(h.notifyListeners(z,ae),b.push(z));for(const z of Object.keys(h.localCache))h.localCache[z]&&!M.has(z)&&(h.notifyListeners(z,null),b.push(z));return b})()}notifyListeners(h,y){this.localCache[h]=y;const b=this.listeners[h];if(b)for(const M of Array.from(b))M(y)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function Nl(g,c){return Ut(g,"POST","/v2/accounts/mfaSignIn:start",nt(g,c))}function Ol(){return(Ol=(0,p.Z)(function*(g){return(yield Ut(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xr(g){return new Promise((c,h)=>{const y=document.createElement("script");y.setAttribute("src",g),y.onload=c,y.onerror=b=>{const M=fe("internal-error");M.customData=b,h(M)},y.type="text/javascript",y.charset="UTF-8",function Eo(){var g,c;return null!==(c=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==c?c:document}().appendChild(y)})}function kl(g){return`__${g}${Math.floor(1e6*Math.random())}`}const wr=1e12;class Dd{constructor(c){this.auth=c,this.counter=wr,this._widgets=new Map}render(c,h){const y=this.counter;return this._widgets.set(y,new xl(c,this.auth.name,h||{})),this.counter++,y}reset(c){var h;const y=c||wr;null===(h=this._widgets.get(y))||void 0===h||h.delete(),this._widgets.delete(y)}getResponse(c){var h;return(null===(h=this._widgets.get(c||wr))||void 0===h?void 0:h.getResponse())||""}execute(c){var h=this;return(0,p.Z)(function*(){var y;return null===(y=h._widgets.get(c||wr))||void 0===y||y.execute(),""})()}}class xl{constructor(c,h,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof c?document.getElementById(c):c;U(b,"argument-error",{appName:h}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fl(g){const c=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<g;y++)c.push(h.charAt(Math.floor(Math.random()*h.length)));return c.join("")}(50);const{callback:c,"expired-callback":h}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cd=kl("rcb"),ec=new Et(3e4,6e4);class ms{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Qt().grecaptcha)||void 0===c||!c.render)}load(c,h=""){return U(function Io(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(h),c,"argument-error"),this.shouldResolveImmediately(h)?Promise.resolve(Qt().grecaptcha):new Promise((y,b)=>{const M=Qt().setTimeout(()=>{b(fe(c,"network-request-failed"))},ec.get());Qt()[Cd]=()=>{Qt().clearTimeout(M),delete Qt()[Cd];const ae=Qt().grecaptcha;if(!ae)return void b(fe(c,"internal-error"));const Oe=ae.render;ae.render=($e,ut)=>{const Ye=Oe($e,ut);return this.counter++,Ye},this.hostLanguage=h,y(ae)},xr(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Cd,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(M),b(fe(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var h;return!(null===(h=Qt().grecaptcha)||void 0===h||!h.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Do{load(c){return(0,p.Z)(function*(){return new Dd(c)})()}clearedOneInstance(){}}const nc="recaptcha",wd={theme:"light",type:"image"};class Ta{constructor(c,h=Object.assign({},wd),y){this.parameters=h,this.type=nc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nn(y),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof c?document.getElementById(c):c;U(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Do:new ms,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const h=yield c.render(),y=c.getAssertedRecaptcha();return y.getResponse(h)||new Promise(M=>{const z=ae=>{!ae||(c.tokenChangeListeners.delete(z),M(ae))};c.tokenChangeListeners.add(z),c.isInvisible&&y.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return h=>{if(this.tokenChangeListeners.forEach(y=>y(h)),"function"==typeof c)c(h);else if("string"==typeof c){const y=Qt()[c];"function"==typeof y&&y(h)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let h=c.container;if(!c.isInvisible){const y=document.createElement("div");h.appendChild(y),h=y}c.widgetId=c.getAssertedRecaptcha().render(h,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){U(qe()&&!Vs(),c.auth,"internal-error"),yield function bd(){let g=null;return new Promise(c=>{"complete"!==document.readyState?(g=()=>c(),window.addEventListener("load",g)):c()}).catch(c=>{throw g&&window.removeEventListener("load",g),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const h=yield function kr(g){return Ol.apply(this,arguments)}(c.auth);U(h,c.auth,"internal-error"),c.parameters.sitekey=h})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pi{constructor(c,h){this.verificationId=c,this.onConfirmation=h}confirm(c){const h=Pr._fromVerification(this.verificationId,c);return this.onConfirmation(h)}}function Ll(){return(Ll=(0,p.Z)(function*(g,c,h){const y=nn(g),b=yield ic(y,c,(0,N.m9)(h));return new pi(b,M=>ln(y,M))})).apply(this,arguments)}function Vl(){return(Vl=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g);yield ds(!1,y,"phone");const b=yield ic(y.auth,c,(0,N.m9)(h));return new pi(b,M=>gn(y,M))})).apply(this,arguments)}function Td(){return(Td=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g),b=yield ic(y.auth,c,(0,N.m9)(h));return new pi(b,M=>hs(y,M))})).apply(this,arguments)}function ic(g,c,h){return sc.apply(this,arguments)}function sc(){return(sc=(0,p.Z)(function*(g,c,h){var y;const b=yield h.verify();try{let M;if(U("string"==typeof b,g,"argument-error"),U(h.type===nc,g,"argument-error"),M="string"==typeof c?{phoneNumber:c}:c,"session"in M){const z=M.session;if("phoneNumber"in M)return U("enroll"===z.type,g,"internal-error"),(yield vd(g,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{U("signin"===z.type,g,"internal-error");const ae=(null===(y=M.multiFactorHint)||void 0===y?void 0:y.uid)||M.multiFactorUid;return U(ae,g,"missing-multi-factor-info"),(yield Nl(g,{mfaPendingCredential:z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Ou(g,{phoneNumber:M.phoneNumber,recaptchaToken:b});return z}}finally{h._reset()}})).apply(this,arguments)}function Sd(){return(Sd=(0,p.Z)(function*(g,c){yield sa((0,N.m9)(g),c)})).apply(this,arguments)}let Bl=(()=>{class g{constructor(h){this.providerId=g.PROVIDER_ID,this.auth=nn(h)}verifyPhoneNumber(h,y){return ic(this.auth,h,(0,N.m9)(y))}static credential(h,y){return Pr._fromVerification(h,y)}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:y,temporaryProof:b}=h;return y&&b?Pr._fromTokenResponse(y,b):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Kt(g,c){return c?ee(c):(U(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Sa extends hn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return pn(c,this._buildIdpRequest())}_linkToIdToken(c,h){return pn(c,this._buildIdpRequest(h))}_getReauthenticationResolver(c){return pn(c,this._buildIdpRequest())}_buildIdpRequest(c){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(h.idToken=c),h}}function Co(g){return la(g.auth,new Sa(g),g.bypassAuthState)}function Yh(g){const{auth:c,user:h}=g;return U(h,c,"internal-error"),aa(h,new Sa(g),g.bypassAuthState)}function br(g){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,p.Z)(function*(g){const{auth:c,user:h}=g;return U(h,c,"internal-error"),sa(h,new Sa(g),g.bypassAuthState)})).apply(this,arguments)}class oc{constructor(c,h,y,b,M=!1){this.auth=c,this.resolver=y,this.user=b,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var c=this;return new Promise(function(){var h=(0,p.Z)(function*(y,b){c.pendingPromise={resolve:y,reject:b};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(M){c.reject(M)}});return function(y,b){return h.apply(this,arguments)}}())}onAuthEvent(c){var h=this;return(0,p.Z)(function*(){const{urlResponse:y,sessionId:b,postBody:M,tenantId:z,error:ae,type:Oe}=c;if(ae)return void h.reject(ae);const $e={auth:h.auth,requestUri:y,sessionId:b,tenantId:z||void 0,postBody:M||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Oe)($e))}catch(ut){h.reject(ut)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Co;case"linkViaPopup":case"linkViaRedirect":return br;case"reauthViaPopup":case"reauthViaRedirect":return Yh;default:Ee(this.auth,"internal-error")}}resolve(c){$(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){$(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wo=new Et(2e3,1e4);function Aa(){return(Aa=(0,p.Z)(function*(g,c,h){const y=nn(g);Ne(g,c,ci);const b=Kt(y,h);return new To(y,"signInViaPopup",c,b).executeNotNull()})).apply(this,arguments)}function bo(){return(bo=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g);Ne(y.auth,c,ci);const b=Kt(y.auth,h);return new To(y.auth,"reauthViaPopup",c,b,y).executeNotNull()})).apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g);Ne(y.auth,c,ci);const b=Kt(y.auth,h);return new To(y.auth,"linkViaPopup",c,b,y).executeNotNull()})).apply(this,arguments)}let To=(()=>{class g extends oc{constructor(h,y,b,M,z){super(h,y,M,z),this.provider=b,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var h=this;return(0,p.Z)(function*(){const y=yield h.execute();return U(y,h.auth,"internal-error"),y})()}onExecution(){var h=this;return(0,p.Z)(function*(){$(1===h.filter.length,"Popup operations only handle one event");const y=Ai();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],y),h.authWindow.associatedEvent=y,h.resolver._originValidation(h.auth).catch(b=>{h.reject(b)}),h.resolver._isIframeWebStorageSupported(h.auth,b=>{b||h.reject(fe(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const h=()=>{var y,b;this.pollId=null!==(b=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==b&&b.closed?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(h,wo.get())};h()}}return g.currentPopupAction=null,g})();const Xr=new Map;class Ni extends oc{constructor(c,h,y=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,y),this.eventId=null}execute(){var c=()=>super.execute,h=this;return(0,p.Z)(function*(){let y=Xr.get(h.auth._key());if(!y){try{const M=(yield function So(g,c){return ei.apply(this,arguments)}(h.resolver,h.auth))?yield c().call(h):null;y=()=>Promise.resolve(M)}catch(b){y=()=>Promise.reject(b)}Xr.set(h.auth._key(),y)}return h.bypassAuthState||Xr.set(h.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(c){var h=()=>super.onAuthEvent,y=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return h().call(y,c);if("unknown"!==c.type){if(c.eventId){const b=yield y.auth._redirectUserForId(c.eventId);if(b)return y.user=b,h().call(y,c);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ei(){return(ei=(0,p.Z)(function*(g,c){const h=Jt(c),y=er(g);if(!(yield y._isAvailable()))return!1;const b="true"===(yield y._get(h));return yield y._remove(h),b})).apply(this,arguments)}function ys(g,c){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(g,c){return er(g)._set(Jt(c),"true")})).apply(this,arguments)}function un(g,c){Xr.set(g._key(),c)}function er(g){return ee(g._redirectPersistence)}function Jt(g){return F("pendingRedirect",g.config.apiKey,g.name)}function js(){return(js=(0,p.Z)(function*(g,c,h){const y=nn(g);Ne(g,c,ci),yield y._initializationPromise;const b=Kt(y,h);return yield ys(b,y),b._openRedirect(y,c,"signInViaRedirect")})).apply(this,arguments)}function Ra(){return(Ra=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g);Ne(y.auth,c,ci),yield y.auth._initializationPromise;const b=Kt(y.auth,h);yield ys(b,y.auth);const M=yield Ue(y);return b._openRedirect(y.auth,c,"reauthViaRedirect",M)})).apply(this,arguments)}function S(){return(S=(0,p.Z)(function*(g,c,h){const y=(0,N.m9)(g);Ne(y.auth,c,ci),yield y.auth._initializationPromise;const b=Kt(y.auth,h);yield ds(!1,y,c.providerId),yield ys(b,y.auth);const M=yield Ue(y);return b._openRedirect(y.auth,c,"linkViaRedirect",M)})).apply(this,arguments)}function Z(){return(Z=(0,p.Z)(function*(g,c){return yield nn(g)._initializationPromise,K(g,c,!1)})).apply(this,arguments)}function K(g,c){return me.apply(this,arguments)}function me(){return(me=(0,p.Z)(function*(g,c,h=!1){const y=nn(g),b=Kt(y,c),z=yield new Ni(y,b,h).execute();return z&&!h&&(delete z.user._redirectEventId,yield y._persistUserIfCurrent(z.user),yield y._setRedirectUser(null,c)),z})).apply(this,arguments)}function Ue(g){return Le.apply(this,arguments)}function Le(){return(Le=(0,p.Z)(function*(g){const c=Ai(`${g.uid}:::`);return g._redirectEventId=c,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),c})).apply(this,arguments)}class It{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let h=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(c,y)&&(h=!0,this.sendToConsumer(c,y),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function bn(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lt(g);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=c,h=!0)),h}sendToConsumer(c,h){var y;if(c.error&&!Lt(c)){const b=(null===(y=c.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";h.onError(fe(this.auth,b))}else h.onAuthEvent(c)}isEventForConsumer(c,h){const y=null===h.eventId||!!c.eventId&&c.eventId===h.eventId;return h.filter.includes(c.type)&&y}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ze(c))}saveEventToCache(c){this.cachedEventUids.add(ze(c)),this.lastProcessedEventTime=Date.now()}}function ze(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(c=>c).join("-")}function Lt({type:g,error:c}){return"unknown"===g&&"auth/no-auth-event"===c?.code}function Oi(g){return ki.apply(this,arguments)}function ki(){return(ki=(0,p.Z)(function*(g,c={}){return Ut(g,"GET","/v1/projects",c)})).apply(this,arguments)}const Ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lr=/^https?/;function ac(){return(ac=(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:c}=yield Oi(g);for(const h of c)try{if(jp(h))return}catch{}Ee(g,"unauthorized-domain")})).apply(this,arguments)}function jp(g){const c=Pe(),{protocol:h,hostname:y}=new URL(c);if(g.startsWith("chrome-extension://")){const z=new URL(g);return""===z.hostname&&""===y?"chrome-extension:"===h&&g.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===h&&z.hostname===y}if(!Lr.test(h))return!1;if(Ro.test(g))return y===g;const b=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(y)}const v_=new Et(3e4,6e4);function Qh(){const g=Qt().___jsl;if(g?.H)for(const c of Object.keys(g.H))if(g.H[c].r=g.H[c].r||[],g.H[c].L=g.H[c].L||[],g.H[c].r=[...g.H[c].L],g.CP)for(let h=0;h<g.CP.length;h++)g.CP[h]=null}let jl=null;function XE(g){return jl=jl||function E_(g){return new Promise((c,h)=>{var y,b,M;function z(){Qh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Qh(),h(fe(g,"network-request-failed"))},timeout:v_.get()})}if(null!==(b=null===(y=Qt().gapi)||void 0===y?void 0:y.iframes)&&void 0!==b&&b.Iframe)c(gapi.iframes.getContext());else{if(null===(M=Qt().gapi)||void 0===M||!M.load){const ae=kl("iframefcb");return Qt()[ae]=()=>{gapi.load?z():h(fe(g,"network-request-failed"))},xr(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Oe=>h(Oe))}z()}}).catch(c=>{throw jl=null,c})}(g),jl}const eI=new Et(5e3,15e3),nI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xi(g){const c=g.config;U(c.authDomain,g,"auth-domain-config-required");const h=c.emulator?it(c,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,y={apiKey:c.apiKey,appName:g.name,v:se.SDK_VERSION},b=rI.get(g.config.apiHost);b&&(y.eid=b);const M=g._getFrameworks();return M.length&&(y.fw=M.join(",")),`${h}?${(0,N.xO)(y).slice(1)}`}function gi(){return gi=(0,p.Z)(function*(g){const c=yield XE(g),h=Qt().gapi;return U(h,g,"internal-error"),c.open({where:document.body,url:xi(g),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nI,dontclear:!0},y=>new Promise(function(){var b=(0,p.Z)(function*(M,z){yield y.restyle({setHideOnLeave:!1});const ae=fe(g,"network-request-failed"),Oe=Qt().setTimeout(()=>{z(ae)},eI.get());function $e(){Qt().clearTimeout(Oe),M(y)}y.ping($e).then($e,()=>{z(ae)})});return function(M,z){return b.apply(this,arguments)}}()))}),gi.apply(this,arguments)}const P={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wt{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $l(g,c,h,y,b,M){U(g.config.authDomain,g,"auth-domain-config-required"),U(g.config.apiKey,g,"invalid-api-key");const z={apiKey:g.config.apiKey,appName:g.name,authType:h,redirectUrl:y,v:se.SDK_VERSION,eventId:b};if(c instanceof ci){c.setDefaultLanguage(g.languageCode),z.providerId=c.providerId||"",(0,N.xb)(c.getCustomParameters())||(z.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Oe,$e]of Object.entries(M||{}))z[Oe]=$e}if(c instanceof as){const Oe=c.getScopes().filter($e=>""!==$e);Oe.length>0&&(z.scopes=Oe.join(","))}g.tenantId&&(z.tid=g.tenantId);const ae=z;for(const Oe of Object.keys(ae))void 0===ae[Oe]&&delete ae[Oe];return`${function Gp({config:g}){return g.emulator?it(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,N.xO)(ae).slice(1)}`}const cc="webStorageSupport",Od=class Wp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qr,this._completeRedirectFn=K,this._overrideRedirectResult=un}_openPopup(c,h,y,b){var M=this;return(0,p.Z)(function*(){var z;$(null===(z=M.eventManagers[c._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ae=$l(c,h,y,Pe(),b);return function $p(g,c,h,y=500,b=600){const M=Math.max((window.screen.availHeight-b)/2,0).toString(),z=Math.max((window.screen.availWidth-y)/2,0).toString();let ae="";const Oe=Object.assign(Object.assign({},P),{width:y.toString(),height:b.toString(),top:M,left:z}),$e=(0,N.z$)().toLowerCase();h&&(ae=rt($e)?"_blank":h),ne($e)&&(c=c||"http://localhost",Oe.scrollbars="yes");const ut=Object.entries(Oe).reduce((Tn,[ri,iu])=>`${Tn}${ri}=${iu},`,"");if(function Dn(g=(0,N.z$)()){var c;return Dt(g)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}($e)&&"_self"!==ae)return function uc(g,c){const h=document.createElement("a");h.href=g,h.target=c;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(y)}(c||"",ae),new Wt(null);const Ye=window.open(c||"",ae,ut);U(Ye,g,"popup-blocked");try{Ye.focus()}catch{}return new Wt(Ye)}(c,ae,Ai())})()}_openRedirect(c,h,y,b){var M=this;return(0,p.Z)(function*(){return yield M._originValidation(c),function Ls(g){Qt().location.href=g}($l(c,h,y,Pe(),b)),new Promise(()=>{})})()}_initialize(c){const h=c._key();if(this.eventManagers[h]){const{manager:b,promise:M}=this.eventManagers[h];return b?Promise.resolve(b):($(M,"If manager is not set, promise should be"),M)}const y=this.initAndGetManager(c);return this.eventManagers[h]={promise:y},y.catch(()=>{delete this.eventManagers[h]}),y}initAndGetManager(c){var h=this;return(0,p.Z)(function*(){const y=yield function Fi(g){return gi.apply(this,arguments)}(c),b=new It(c);return y.register("authEvent",M=>(U(M?.authEvent,c,"invalid-auth-event"),{status:b.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[c._key()]={manager:b},h.iframes[c._key()]=y,b})()}_isIframeWebStorageSupported(c,h){this.iframes[c._key()].send(cc,{type:cc},b=>{var M;const z=null===(M=b?.[0])||void 0===M?void 0:M[cc];void 0!==z&&h(!!z),Ee(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const h=c._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Vr(g){return ac.apply(this,arguments)}(c)),this.originValidationPromises[h]}get _shouldInitProactively(){return hd()||Ze()||Dt()}};class zp{constructor(c){this.factorId=c}_process(c,h,y){switch(h.type){case"enroll":return this._finalizeEnroll(c,h.credential,y);case"signin":return this._finalizeSignIn(c,h.credential);default:return ue("unexpected MultiFactorSessionType")}}}class kd extends zp{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new kd(c)}_finalizeEnroll(c,h,y){return function Kh(g,c){return Ut(g,"POST","/v2/accounts/mfaEnrollment:finalize",nt(g,c))}(c,{idToken:h,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,h){return function Id(g,c){return Ut(g,"POST","/v2/accounts/mfaSignIn:finalize",nt(g,c))}(c,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bt=(()=>{class g{constructor(){}static assertion(h){return kd._fromCredential(h)}}return g.FACTOR_ID="phone",g})();var Po="@firebase/auth";class Gl{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var h=this;return(0,p.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const h=this.auth.onIdTokenChanged(y=>{c(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,h),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const h=this.internalListeners.get(c);!h||(this.internalListeners.delete(c),h(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $s(){return window}function Na(){return(Na=(0,p.Z)(function*(g,c,h){var y;const{BuildInfo:b}=$s();$(c.sessionId,"AuthEvent did not contain a session ID");const M=yield Ld(c.sessionId),z={};return Dt()?z.ibi=b.packageName:ot()?z.apn=b.packageName:Ee(g,"operation-not-supported-in-this-environment"),b.displayName&&(z.appDisplayName=b.displayName),z.sessionId=M,$l(g,h,c.type,void 0,null!==(y=c.eventId)&&void 0!==y?y:void 0,z)})).apply(this,arguments)}function zl(){return(zl=(0,p.Z)(function*(g){const{BuildInfo:c}=$s(),h={};Dt()?h.iosBundleId=c.packageName:ot()?h.androidPackageName=c.packageName:Ee(g,"operation-not-supported-in-this-environment"),yield Oi(g,h)})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(g,c,h){const{cordova:y}=$s();let b=()=>{};try{yield new Promise((M,z)=>{let ae=null;function Oe(){var Ye;M();const Tn=null===(Ye=y.plugins.browsertab)||void 0===Ye?void 0:Ye.close;"function"==typeof Tn&&Tn(),"function"==typeof h?.close&&h.close()}function $e(){ae||(ae=window.setTimeout(()=>{z(fe(g,"redirect-cancelled-by-user"))},2e3))}function ut(){"visible"===document?.visibilityState&&$e()}c.addPassiveListener(Oe),document.addEventListener("resume",$e,!1),ot()&&document.addEventListener("visibilitychange",ut,!1),b=()=>{c.removePassiveListener(Oe),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",ut,!1),ae&&window.clearTimeout(ae)}})}finally{b()}})).apply(this,arguments)}function Ld(g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(g){const c=Zl(g),h=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(h)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Zl(g){if($(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const c=new ArrayBuffer(g.length),h=new Uint8Array(c);for(let y=0;y<g.length;y++)h[y]=g.charCodeAt(y);return h}(0,N.Pz)("authIdTokenMaxAge"),function No(g){(0,se._registerComponent)(new ge.wA("auth",(c,{options:h})=>{const y=c.getProvider("app").getImmediate(),b=c.getProvider("heartbeat"),{apiKey:M,authDomain:z}=y.options;return((ae,Oe)=>{U(M&&!M.includes(":"),"invalid-api-key",{appName:ae.name}),U(!z?.includes(":"),"argument-error",{appName:ae.name});const $e={apiKey:M,authDomain:z,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ea(g)},ut=new Pu(ae,Oe,$e);return function Te(g,c){const h=c?.persistence||[],y=(Array.isArray(h)?h:[h]).map(ee);c?.errorMap&&g._updateErrorMap(c.errorMap),g._initializeWithPersistence(y,c?.popupRedirectResolver)}(ut,h),ut})(y,b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,h,y)=>{c.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ge.wA("auth-internal",c=>{const h=nn(c.getProvider("auth").getImmediate());return new Gl(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(Po,"0.21.4",function Pn(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,se.registerVersion)(Po,"0.21.4","esm2017")}("Browser");class Li extends It{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function pc(g){return ql.apply(this,arguments)}function ql(){return(ql=(0,p.Z)(function*(g){const c=yield gc()._get(Kl(g));return c&&(yield gc()._remove(Kl(g))),c})).apply(this,arguments)}function lf(){const g=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<20;h++){const y=Math.floor(Math.random()*c.length);g.push(c.charAt(y))}return g.join("")}function gc(){return ee(Sl)}function Kl(g){return F("authEvent",g.config.apiKey,g.name)}function Yl(g){if(!g?.includes("?"))return{};const[c,...h]=g.split("?");return(0,N.zd)(h.join("?"))}const Ql=class mc{constructor(){this._redirectPersistence=Qr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=K,this._overrideRedirectResult=un}_initialize(c){var h=this;return(0,p.Z)(function*(){const y=c._key();let b=h.eventManagers.get(y);return b||(b=new Li(c),h.eventManagers.set(y,b),h.attachCallbackListeners(c,b)),b})()}_openPopup(c){Ee(c,"operation-not-supported-in-this-environment")}_openRedirect(c,h,y,b){var M=this;return(0,p.Z)(function*(){!function af(g){var c,h,y,b,M,z,ae,Oe,$e,ut;const Ye=$s();U("function"==typeof(null===(c=Ye?.universalLinks)||void 0===c?void 0:c.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(h=Ye?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(M=null===(b=null===(y=Ye?.cordova)||void 0===y?void 0:y.plugins)||void 0===b?void 0:b.browsertab)||void 0===M?void 0:M.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Oe=null===(ae=null===(z=Ye?.cordova)||void 0===z?void 0:z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Oe?void 0:Oe.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(ut=null===($e=Ye?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===ut?void 0:ut.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const z=yield M._initialize(c);yield z.initialized(),z.resetRedirect(),function Fr(){Xr.clear()}(),yield M._originValidation(c);const ae=function Ud(g,c,h=null){return{type:c,eventId:h,urlResponse:null,sessionId:lf(),postBody:null,tenantId:g.tenantId,error:fe(g,"no-auth-event")}}(c,y,b);yield function fc(g,c){return gc()._set(Kl(g),c)}(c,ae);const Oe=yield function xd(g,c,h){return Na.apply(this,arguments)}(c,ae,h),$e=yield function Fd(g){const{cordova:c}=$s();return new Promise(h=>{c.plugins.browsertab.isAvailable(y=>{let b=null;y?c.plugins.browsertab.openUrl(g):b=c.InAppBrowser.open(g,function Mr(g=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),h(b)})})}(Oe);return function Zp(g,c,h){return Oo.apply(this,arguments)}(c,z,$e)})()}_isIframeWebStorageSupported(c,h){throw new Error("Method not implemented.")}_originValidation(c){const h=c._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function sf(g){return zl.apply(this,arguments)}(c)),this.originValidationPromises[h]}attachCallbackListeners(c,h){const{universalLinks:y,handleOpenURL:b,BuildInfo:M}=$s(),z=setTimeout((0,p.Z)(function*(){yield pc(c),h.onEvent(_c())}),500),ae=function(){var ut=(0,p.Z)(function*(Ye){clearTimeout(z);const Tn=yield pc(c);let ri=null;Tn&&Ye?.url&&(ri=function Bd(g,c){var h,y;const b=function Kp(g){const c=Yl(g),h=c.link?decodeURIComponent(c.link):void 0,y=Yl(h).link,b=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Yl(b).link||b||y||h||g}(c);if(b.includes("/__/auth/callback")){const M=Yl(b),z=M.firebaseError?function qp(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,ae=null===(y=null===(h=z?.code)||void 0===h?void 0:h.split("auth/"))||void 0===y?void 0:y[1],Oe=ae?fe(ae):null;return Oe?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:b,postBody:null}}return null}(Tn,Ye.url)),h.onEvent(ri||_c())});return function(Tn){return ut.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,ae);const Oe=b,$e=`${M.packageName.toLowerCase()}://`;$s().handleOpenURL=function(){var ut=(0,p.Z)(function*(Ye){if(Ye.toLowerCase().startsWith($e)&&ae({url:Ye}),"function"==typeof Oe)try{Oe(Ye)}catch(Tn){console.error(Tn)}});return function(Ye){return ut.apply(this,arguments)}}()}};function _c(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fe("no-auth-event")}}function ko(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function hf(g=(0,N.z$)()){return!("file:"!==ko()&&"ionic:"!==ko()&&"capacitor:"!==ko()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function jd(){try{const g=self.localStorage,c=Ai();if(g)return g.setItem(c,"1"),g.removeItem(c),!function ff(g=(0,N.z$)()){return function yc(){return(0,N.w1)()&&11===document?.documentMode}()||function Yp(g=(0,N.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,N.hl)()}catch{return vc()&&(0,N.hl)()}return!1}function vc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jl(){return(function df(){return"http:"===ko()||"https:"===ko()}()||(0,N.ru)()||hf())&&!function D_(){return(0,N.b$)()||(0,N.UG)()}()&&jd()&&!vc()}function xa(){return hf()&&typeof document<"u"}function xo(){return(xo=(0,p.Z)(function*(){return!!xa()&&new Promise(g=>{const c=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),g(!0)})})})).apply(this,arguments)}const ur={LOCAL:"local",NONE:"none",SESSION:"session"},Fo=U,Ic="persistence";function Dc(g){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(g){yield g._initializationPromise;const c=$d(),h=F(Ic,g.config.apiKey,g.name);c&&c.setItem(h,g._getPersistence())})).apply(this,arguments)}function $d(){var g;try{return(null===(g=function Ec(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const C_=U;class vs{constructor(){this.browserResolver=ee(Od),this.cordovaResolver=ee(Ql),this.underlyingResolver=null,this._redirectPersistence=Qr,this._completeRedirectFn=K,this._overrideRedirectResult=un}_initialize(c){var h=this;return(0,p.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,h,y,b){var M=this;return(0,p.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(c,h,y,b)})()}_openRedirect(c,h,y,b){var M=this;return(0,p.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(c,h,y,b)})()}_isIframeWebStorageSupported(c,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,h)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return xa()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return C_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const h=yield function Xl(){return xo.apply(this,arguments)}();c.underlyingResolver=h?c.cordovaResolver:c.browserResolver})()}}function gf(g){return g.unwrap()}function tu(g){return mf(g)}function mf(g){const{_tokenResponse:c}=g instanceof N.ZR?g.customData:g;if(!c)return null;if(!(g instanceof N.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Bl.credentialFromResult(g);const h=c.providerId;if(!h||"password"===h)return null;let y;switch(h){case"google.com":y=gd;break;case"facebook.com":y=xu;break;case"github.com":y=pl;break;case"twitter.com":y=Lu;break;default:const{oauthIdToken:b,oauthAccessToken:M,oauthTokenSecret:z,pendingToken:ae,nonce:Oe}=c;return M||z||b||ae?ae?h.startsWith("saml.")?na._create(h,ae):vr._fromParams({providerId:h,signInMethod:h,pendingToken:ae,idToken:b,accessToken:M}):new ao(h).credential({idToken:b,accessToken:M,rawNonce:Oe}):null}return g instanceof N.ZR?y.credentialFromError(g):y.credentialFromResult(g)}function cr(g,c){return c.catch(h=>{throw h instanceof N.ZR&&function La(g,c){var h;const y=null===(h=c.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new nu(g,function Ln(g,c){var h;const y=(0,N.m9)(g),b=c;return U(c.customData.operationType,y,"argument-error"),U(null===(h=b.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,y,"argument-error"),bl._fromError(y,b)}(g,c));else if(y){const b=mf(c),M=c;b&&(M.credential=b,M.tenantId=y.tenantId||void 0,M.email=y.email||void 0,M.phoneNumber=y.phoneNumber||void 0)}}(g,h),h}).then(h=>{const b=h.user;return{operationType:h.operationType,credential:tu(h),additionalUserInfo:yd(h),user:ni.getOrCreate(b)}})}function _f(g,c){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,p.Z)(function*(g,c){const h=yield c;return{verificationId:h.verificationId,confirm:y=>cr(g,h.confirm(y))}})).apply(this,arguments)}class nu{constructor(c,h){this.resolver=h,this.auth=function Gd(g){return g.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return cr(gf(this.auth),this.resolver.resolveSignIn(c))}}class ni{constructor(c){this._delegate=c,this.multiFactor=function _a(g){const c=(0,N.m9)(g);return Dr.has(c)||Dr.set(c,Si._fromUser(c)),Dr.get(c)}(c)}static getOrCreate(c){return ni.USER_MAP.has(c)||ni.USER_MAP.set(c,new ni(c)),ni.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var h=this;return(0,p.Z)(function*(){return cr(h.auth,gn(h._delegate,c))})()}linkWithPhoneNumber(c,h){var y=this;return(0,p.Z)(function*(){return _f(y.auth,function rc(g,c,h){return Vl.apply(this,arguments)}(y._delegate,c,h))})()}linkWithPopup(c){var h=this;return(0,p.Z)(function*(){return cr(h.auth,function Md(g,c,h){return Rn.apply(this,arguments)}(h._delegate,c,vs))})()}linkWithRedirect(c){var h=this;return(0,p.Z)(function*(){return yield Dc(nn(h.auth)),function I(g,c,h){return function C(g,c,h){return S.apply(this,arguments)}(g,c,h)}(h._delegate,c,vs)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var h=this;return(0,p.Z)(function*(){return cr(h.auth,hs(h._delegate,c))})()}reauthenticateWithPhoneNumber(c,h){return _f(this.auth,function Hp(g,c,h){return Td.apply(this,arguments)}(this._delegate,c,h))}reauthenticateWithPopup(c){return cr(this.auth,function Ad(g,c,h){return bo.apply(this,arguments)}(this._delegate,c,vs))}reauthenticateWithRedirect(c){var h=this;return(0,p.Z)(function*(){return yield Dc(nn(h.auth)),function Mo(g,c,h){return function Rd(g,c,h){return Ra.apply(this,arguments)}(g,c,h)}(h._delegate,c,vs)})()}sendEmailVerification(c){return function vl(g,c){return zu.apply(this,arguments)}(this._delegate,c)}unlink(c){var h=this;return(0,p.Z)(function*(){return yield function ia(g,c){return cs.apply(this,arguments)}(h._delegate,c),h})()}updateEmail(c){return function zh(g,c){return Dl((0,N.m9)(g),c,null)}(this._delegate,c)}updatePassword(c){return function Il(g,c){return Dl((0,N.m9)(g),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ul(g,c){return Sd.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function di(g,c){return Ir.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,h){return function ks(g,c,h){return rn.apply(this,arguments)}(this._delegate,c,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ni.USER_MAP=new WeakMap;const ru=U;let Lo=(()=>{class g{constructor(h,y){if(this.app=h,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=h.options;ru(b,"invalid-api-key",{appName:h.name}),ru(b,"invalid-api-key",{appName:h.name});const M=typeof window<"u"?vs:void 0;this._delegate=y.initialize({options:{persistence:yf(b,h.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(tt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ni.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,y){!function dl(g,c,h){const y=nn(g);U(y._canInitEmulator,y,"emulator-config-failed"),U(/^https?:\/\//.test(c),y,"invalid-emulator-scheme");const b=!!h?.disableWarnings,M=ro(c),{host:z,port:ae}=function io(g){const c=ro(g),h=/(\/\/)?([^?#/]+)/.exec(g.substr(c.length));if(!h)return{host:"",port:null};const y=h[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(y);if(b){const M=b[1];return{host:M,port:Mt(y.substr(M.length+1))}}{const[M,z]=y.split(":");return{host:M,port:Mt(z)}}}(c);y.config.emulator={url:`${M}//${z}${null===ae?"":`:${ae}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:z,port:ae,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function Cn(){function g(){const c=document.createElement("p"),h=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,h,y)}applyActionCode(h){return function ca(g,c){return ml.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return da(this._delegate,h)}confirmPasswordReset(h,y){return function po(g,c,h){return ft.apply(this,arguments)}(this._delegate,h,y)}createUserWithEmailAndPassword(h,y){var b=this;return(0,p.Z)(function*(){return cr(b._delegate,function mn(g,c,h){return Gu.apply(this,arguments)}(b._delegate,h,y))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function pa(g,c){return Os.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function Wu(g,c){return"EMAIL_SIGNIN"===oo.parseLink(c)?.operation}(0,h)}getRedirectResult(){var h=this;return(0,p.Z)(function*(){ru(Jl(),h._delegate,"operation-not-supported-in-this-environment");const y=yield function x(g,c){return Z.apply(this,arguments)}(h._delegate,vs);return y?cr(h._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function uf(g,c){nn(g)._logFramework(c)}(this._delegate,h)}onAuthStateChanged(h,y,b){const{next:M,error:z,complete:ae}=Wd(h,y,b);return this._delegate.onAuthStateChanged(M,z,ae)}onIdTokenChanged(h,y,b){const{next:M,error:z,complete:ae}=Wd(h,y,b);return this._delegate.onIdTokenChanged(M,z,ae)}sendSignInLinkToEmail(h,y){return function Rt(g,c,h){return yl.apply(this,arguments)}(this._delegate,h,y)}sendPasswordResetEmail(h,y){return function Kr(g,c,h){return fo.apply(this,arguments)}(this._delegate,h,y||void 0)}setPersistence(h){var y=this;return(0,p.Z)(function*(){let b;switch(function Fa(g,c){Fo(Object.values(ur).includes(c),g,"invalid-persistence-type"),(0,N.b$)()?Fo(c!==ur.SESSION,g,"unsupported-persistence-type"):(0,N.UG)()?Fo(c===ur.NONE,g,"unsupported-persistence-type"):vc()?Fo(c===ur.NONE||c===ur.LOCAL&&(0,N.hl)(),g,"unsupported-persistence-type"):Fo(c===ur.NONE||jd(),g,"unsupported-persistence-type")}(y._delegate,h),h){case ur.SESSION:b=Qr;break;case ur.LOCAL:b=(yield ee(fi)._isAvailable())?fi:Sl;break;case ur.NONE:b=L;break;default:return Ee("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return cr(this._delegate,function Bu(g){return md.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return cr(this._delegate,ln(this._delegate,h))}signInWithCustomToken(h){return cr(this._delegate,function Ti(g,c){return Mn.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,y){return cr(this._delegate,function Ie(g,c,h){return ln((0,N.m9)(g),fl.credential(c,h))}(this._delegate,h,y))}signInWithEmailLink(h,y){return cr(this._delegate,function Fn(g,c,h){return Ns.apply(this,arguments)}(this._delegate,h,y))}signInWithPhoneNumber(h,y){return _f(this._delegate,function Ft(g,c,h){return Ll.apply(this,arguments)}(this._delegate,h,y))}signInWithPopup(h){var y=this;return(0,p.Z)(function*(){return ru(Jl(),y._delegate,"operation-not-supported-in-this-environment"),cr(y._delegate,function Hs(g,c,h){return Aa.apply(this,arguments)}(y._delegate,h,vs))})()}signInWithRedirect(h){var y=this;return(0,p.Z)(function*(){return ru(Jl(),y._delegate,"operation-not-supported-in-this-environment"),yield Dc(y._delegate),function Hl(g,c,h){return function Ma(g,c,h){return js.apply(this,arguments)}(g,c,h)}(y._delegate,h,vs)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function $u(g,c){return ha.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=ur,g})();function Wd(g,c,h){let y=g;"function"!=typeof g&&({next:y,error:c,complete:h}=g);const b=y;return{next:z=>b(z&&ni.getOrCreate(z)),error:c,complete:h}}function yf(g,c){const h=function pf(g,c){const h=$d();if(!h)return[];const y=F(Ic,g,c);switch(h.getItem(y)){case ur.NONE:return[L];case ur.LOCAL:return[fi,Qr];case ur.SESSION:return[Qr];default:return[]}}(g,c);if(typeof self<"u"&&!h.includes(fi)&&h.push(fi),typeof window<"u")for(const y of[Sl,Qr])h.includes(y)||h.push(y);return h.includes(L)||h.push(L),h}class zd{constructor(){this.providerId="phone",this._delegate=new Bl(gf(X.Z.auth()))}static credential(c,h){return Bl.credential(c,h)}verifyPhoneNumber(c,h){return this._delegate.verifyPhoneNumber(c,h)}unwrap(){return this._delegate}}zd.PHONE_SIGN_IN_METHOD=Bl.PHONE_SIGN_IN_METHOD,zd.PROVIDER_ID=Bl.PROVIDER_ID;const vf=U;class Ef{constructor(c,h,y=X.Z.app()){var b;vf(null===(b=y.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new Ta(c,h,y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function b_(g){g.INTERNAL.registerComponent(new ge.wA("auth-compat",c=>{const h=c.getProvider("app-compat").getImmediate(),y=c.getProvider("auth");return new Lo(h,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:fl,FacebookAuthProvider:xu,GithubAuthProvider:pl,GoogleAuthProvider:gd,OAuthProvider:ao,SAMLAuthProvider:Nr,PhoneAuthProvider:zd,PhoneMultiFactorGenerator:Bt,RecaptchaVerifier:Ef,TwitterAuthProvider:Lu,Auth:Lo,AuthCredential:hn,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.3.4")}(X.Z)},8766:(et,we,k)=>{k.d(we,{Lj:()=>Ee,X3:()=>be});var p=k(5861);let N,se;const ge=new WeakMap,le=new WeakMap,_e=new WeakMap,j=new WeakMap,H=new WeakMap;let Re={get(U,ue,$){if(U instanceof IDBTransaction){if("done"===ue)return le.get(U);if("objectStoreNames"===ue)return U.objectStoreNames||_e.get(U);if("store"===ue)return $.objectStoreNames[1]?void 0:$.objectStore($.objectStoreNames[0])}return ye(U[ue])},set:(U,ue,$)=>(U[ue]=$,!0),has:(U,ue)=>U instanceof IDBTransaction&&("done"===ue||"store"===ue)||ue in U};function ie(U){return"function"==typeof U?function xe(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ue){return U.apply(de(this),ue),ye(ge.get(this))}:function(...ue){return ye(U.apply(de(this),ue))}:function(ue,...$){const q=U.call(de(this),ue,...$);return _e.set(q,ue.sort?ue.sort():[ue]),ye(q)}}(U):(U instanceof IDBTransaction&&function He(U){if(le.has(U))return;const ue=new Promise(($,q)=>{const ee=()=>{U.removeEventListener("complete",te),U.removeEventListener("error",Te),U.removeEventListener("abort",Te)},te=()=>{$(),ee()},Te=()=>{q(U.error||new DOMException("AbortError","AbortError")),ee()};U.addEventListener("complete",te),U.addEventListener("error",Te),U.addEventListener("abort",Te)});le.set(U,ue)}(U),((U,ue)=>ue.some($=>U instanceof $))(U,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Re):U)}function ye(U){if(U instanceof IDBRequest)return function Y(U){const ue=new Promise(($,q)=>{const ee=()=>{U.removeEventListener("success",te),U.removeEventListener("error",Te)},te=()=>{$(ye(U.result)),ee()},Te=()=>{q(U.error),ee()};U.addEventListener("success",te),U.addEventListener("error",Te)});return ue.then($=>{$ instanceof IDBCursor&&ge.set($,U)}).catch(()=>{}),H.set(ue,U),ue}(U);if(j.has(U))return j.get(U);const ue=ie(U);return ue!==U&&(j.set(U,ue),H.set(ue,U)),ue}const de=U=>H.get(U);function be(U,ue,{blocked:$,upgrade:q,blocking:ee,terminated:te}={}){const Te=indexedDB.open(U,ue),Pe=ye(Te);return q&&Te.addEventListener("upgradeneeded",qe=>{q(ye(Te.result),qe.oldVersion,qe.newVersion,ye(Te.transaction))}),$&&Te.addEventListener("blocked",()=>$()),Pe.then(qe=>{te&&qe.addEventListener("close",()=>te()),ee&&qe.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Pe}function Ee(U,{blocked:ue}={}){const $=indexedDB.deleteDatabase(U);return ue&&$.addEventListener("blocked",()=>ue()),ye($).then(()=>{})}const fe=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Ne=new Map;function Se(U,ue){if(!(U instanceof IDBDatabase)||ue in U||"string"!=typeof ue)return;if(Ne.get(ue))return Ne.get(ue);const $=ue.replace(/FromIndex$/,""),q=ue!==$,ee=De.includes($);if(!($ in(q?IDBIndex:IDBObjectStore).prototype)||!ee&&!fe.includes($))return;const te=function(){var Te=(0,p.Z)(function*(Pe,...qe){const Nt=this.transaction(Pe,ee?"readwrite":"readonly");let $t=Nt.store;return q&&($t=$t.index(qe.shift())),(yield Promise.all([$t[$](...qe),ee&&Nt.done]))[0]});return function(qe){return Te.apply(this,arguments)}}();return Ne.set(ue,te),te}!function tt(U){Re=U(Re)}(U=>({...U,get:(ue,$,q)=>Se(ue,$)||U.get(ue,$,q),has:(ue,$)=>!!Se(ue,$)||U.has(ue,$)}))},5861:(et,we,k)=>{function p(N,se,re,oe,ge,le,_e){try{var j=N[le](_e),H=j.value}catch(Y){return void re(Y)}j.done?se(H):Promise.resolve(H).then(oe,ge)}function X(N){return function(){var se=this,re=arguments;return new Promise(function(oe,ge){var le=N.apply(se,re);function _e(H){p(le,oe,ge,_e,j,"next",H)}function j(H){p(le,oe,ge,_e,j,"throw",H)}_e(void 0)})}}k.d(we,{Z:()=>X})}},et=>{et(et.s=8974)}]);